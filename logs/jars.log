2025-12-31 01:58:49 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divine@gmail.com from 127.0.0.1
2025-12-31 01:58:50 - application.services.account_service - ERROR - [account_service.py:56] - Failed to create new user: Could not determine join condition between parent/child tables on relationship TraderProfile.kyc - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1453, in _join_condition
    raise exc.NoForeignKeysError(
    ...<3 lines>...
    )
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'trader_profiles' and 'user_kyc'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Code\python\jars\application\services\account_service.py", line 22, in create_new_user
    existing_account = db.query(account.User).filter(account.User.email == user.email).first()
                       ~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2941, in query
    return self._query_cls(entities, self, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
    ~~~~~~~~~~~~~~~~^
        roles.ColumnsClauseRole,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        post_inspect=True,
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 389, in expect
    insp._post_inspect
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2455, in _determine_joins
    raise sa_exc.NoForeignKeysError(
    ...<7 lines>...
    ) from nfe
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship TraderProfile.kyc - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-12-31 01:58:50 - application.routers.auth - ERROR - [auth.py:51] - User creation failed: Failed to create user: Could not determine join condition between parent/child tables on relationship TraderProfile.kyc - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression. from 127.0.0.1
2025-12-31 02:00:55 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divine@gmail.com from 127.0.0.1
2025-12-31 02:00:57 - application.services.account_service - ERROR - [account_service.py:56] - Failed to create new user: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "jars_user"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3309, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 711, in checkout
    rec = pool._do_get()
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\psycopg2\__init__.py", line 135, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "jars_user"


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Code\python\jars\application\services\account_service.py", line 22, in create_new_user
    existing_account = db.query(account.User).filter(account.User.email == user.email).first()
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3285, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2448, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 3309, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 711, in checkout
    rec = pool._do_get()
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\pool\base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Code\python\jars\venv\Lib\site-packages\psycopg2\__init__.py", line 135, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "jars_user"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-31 02:00:57 - application.routers.auth - ERROR - [auth.py:51] - User creation failed: Failed to create user: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "jars_user"

(Background on this error at: https://sqlalche.me/e/20/e3q8) from 127.0.0.1
2025-12-31 16:44:55 - application.routers.auth - INFO - [auth.py:25] - Registration attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 16:44:56 - application.services.account_service - ERROR - [account_service.py:56] - Failed to create new user: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.first_name AS users_first_name, users.last_name AS users_last_name, users.email AS users_email, users.status AS users_status, users.password AS users_password, users.two_factor_secret AS users_two_factor_secret, users.is_2fa_enabled AS users_is_2fa_enabled, users.password_reset_token AS users_password_reset_token, users.email_verification_token AS users_email_verification_token, users.password_reset_expires AS users_password_reset_expires, users.email_verification_expires AS users_email_verification_expires, users.country AS users_country, users.is_active AS users_is_active, users.is_admin AS users_is_admin, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'divineuzoukwu3@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "users" does not exist
LINE 2: FROM users 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/application/application/services/account_service.py", line 22, in create_new_user
    existing_account = db.query(account.User).filter(account.User.email == user.email).first()
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.first_name AS users_first_name, users.last_name AS users_last_name, users.email AS users_email, users.status AS users_status, users.password AS users_password, users.two_factor_secret AS users_two_factor_secret, users.is_2fa_enabled AS users_is_2fa_enabled, users.password_reset_token AS users_password_reset_token, users.email_verification_token AS users_email_verification_token, users.password_reset_expires AS users_password_reset_expires, users.email_verification_expires AS users_email_verification_expires, users.country AS users_country, users.is_active AS users_is_active, users.is_admin AS users_is_admin, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'divineuzoukwu3@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-31 16:44:56 - application.routers.auth - ERROR - [auth.py:50] - User creation failed: Failed to create user: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.id AS users_id, users.first_name AS users_first_name, users.last_name AS users_last_name, users.email AS users_email, users.status AS users_status, users.password AS users_password, users.two_factor_secret AS users_two_factor_secret, users.is_2fa_enabled AS users_is_2fa_enabled, users.password_reset_token AS users_password_reset_token, users.email_verification_token AS users_email_verification_token, users.password_reset_expires AS users_password_reset_expires, users.email_verification_expires AS users_email_verification_expires, users.country AS users_country, users.is_active AS users_is_active, users.is_admin AS users_is_admin, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'divineuzoukwu3@gmail.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) from 172.18.0.1
2025-12-31 17:52:37 - application.routers.auth - INFO - [auth.py:25] - Registration attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 17:52:38 - application.tasks - INFO - [tasks.py:15] - Sending verification email to divineuzoukwu3@gmail.com
2025-12-31 17:52:38 - jars_app - ERROR - [audit.py:227] - Failed to write to AuditLog database table: 'trader_id' is an invalid keyword argument for AuditLog
Traceback (most recent call last):
  File "/application/application/utilities/audit.py", line 212, in log_user_action
    new_audit_log_entry = AuditLog(
                          ^^^^^^^^^
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 596, in _initialize_instance
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 594, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 2179, in _declarative_constructor
    raise TypeError(
TypeError: 'trader_id' is an invalid keyword argument for AuditLog
2025-12-31 17:52:38 - application.routers.auth - INFO - [auth.py:44] - New user registered: f615b727-9fe0-418a-9543-5ce4f880b108 (divineuzoukwu3@gmail.com) from 172.18.0.1
2025-12-31 17:52:40 - application.services.email_service - ERROR - [email_service.py:88] - Failed to send email to divineuzoukwu3@gmail.com: The jars.app domain is not verified. Please, add and verify your domain on https://resend.com/domains
Traceback (most recent call last):
  File "/application/application/services/email_service.py", line 79, in _send_email
    response = resend.Emails.send({
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/emails/_emails.py", line 277, in send
    ).perform_with_content()
      ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/request.py", line 44, in perform_with_content
    resp = self.perform()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/request.py", line 35, in perform
    raise_for_code_and_type(
  File "/usr/local/lib/python3.12/site-packages/resend/exceptions.py", line 219, in raise_for_code_and_type
    raise ResendError(
resend.exceptions.ResendError: The jars.app domain is not verified. Please, add and verify your domain on https://resend.com/domains
2025-12-31 17:52:41 - application.tasks - ERROR - [tasks.py:19] - Failed to send email: Email service is unavailable
2025-12-31 17:53:41 - application.tasks - INFO - [tasks.py:15] - Sending verification email to divineuzoukwu3@gmail.com
2025-12-31 17:53:42 - application.services.email_service - ERROR - [email_service.py:88] - Failed to send email to divineuzoukwu3@gmail.com: The jars.app domain is not verified. Please, add and verify your domain on https://resend.com/domains
Traceback (most recent call last):
  File "/application/application/services/email_service.py", line 79, in _send_email
    response = resend.Emails.send({
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/emails/_emails.py", line 277, in send
    ).perform_with_content()
      ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/request.py", line 44, in perform_with_content
    resp = self.perform()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/request.py", line 35, in perform
    raise_for_code_and_type(
  File "/usr/local/lib/python3.12/site-packages/resend/exceptions.py", line 219, in raise_for_code_and_type
    raise ResendError(
resend.exceptions.ResendError: The jars.app domain is not verified. Please, add and verify your domain on https://resend.com/domains
2025-12-31 17:53:42 - application.tasks - ERROR - [tasks.py:19] - Failed to send email: Email service is unavailable
2025-12-31 17:54:42 - application.tasks - INFO - [tasks.py:15] - Sending verification email to divineuzoukwu3@gmail.com
2025-12-31 17:54:46 - application.services.email_service - ERROR - [email_service.py:88] - Failed to send email to divineuzoukwu3@gmail.com: The jars.app domain is not verified. Please, add and verify your domain on https://resend.com/domains
Traceback (most recent call last):
  File "/application/application/services/email_service.py", line 79, in _send_email
    response = resend.Emails.send({
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/emails/_emails.py", line 277, in send
    ).perform_with_content()
      ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/request.py", line 44, in perform_with_content
    resp = self.perform()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/request.py", line 35, in perform
    raise_for_code_and_type(
  File "/usr/local/lib/python3.12/site-packages/resend/exceptions.py", line 219, in raise_for_code_and_type
    raise ResendError(
resend.exceptions.ResendError: The jars.app domain is not verified. Please, add and verify your domain on https://resend.com/domains
2025-12-31 17:54:47 - application.tasks - ERROR - [tasks.py:19] - Failed to send email: Email service is unavailable
2025-12-31 17:55:35 - application.routers.auth - INFO - [auth.py:62] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 17:55:35 - application.services.auth_service - WARNING - [auth_service.py:26] - Invalid password for user divineuzoukwu3@gmail.com
2025-12-31 17:55:35 - application.routers.auth - WARNING - [auth.py:108] - Login failed - invalid password: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 17:55:47 - application.tasks - INFO - [tasks.py:15] - Sending verification email to divineuzoukwu3@gmail.com
2025-12-31 17:55:48 - application.services.email_service - ERROR - [email_service.py:88] - Failed to send email to divineuzoukwu3@gmail.com: The jars.app domain is not verified. Please, add and verify your domain on https://resend.com/domains
Traceback (most recent call last):
  File "/application/application/services/email_service.py", line 79, in _send_email
    response = resend.Emails.send({
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/emails/_emails.py", line 277, in send
    ).perform_with_content()
      ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/request.py", line 44, in perform_with_content
    resp = self.perform()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/resend/request.py", line 35, in perform
    raise_for_code_and_type(
  File "/usr/local/lib/python3.12/site-packages/resend/exceptions.py", line 219, in raise_for_code_and_type
    raise ResendError(
resend.exceptions.ResendError: The jars.app domain is not verified. Please, add and verify your domain on https://resend.com/domains
2025-12-31 17:55:48 - application.tasks - ERROR - [tasks.py:19] - Failed to send email: Email service is unavailable
2025-12-31 17:56:01 - application.routers.auth - INFO - [auth.py:62] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 17:56:02 - jars_app - ERROR - [audit.py:227] - Failed to write to AuditLog database table: 'trader_id' is an invalid keyword argument for AuditLog
Traceback (most recent call last):
  File "/application/application/utilities/audit.py", line 212, in log_user_action
    new_audit_log_entry = AuditLog(
                          ^^^^^^^^^
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 596, in _initialize_instance
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 594, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 2179, in _declarative_constructor
    raise TypeError(
TypeError: 'trader_id' is an invalid keyword argument for AuditLog
2025-12-31 17:56:02 - application.routers.auth - INFO - [auth.py:99] - User f615b727-9fe0-418a-9543-5ce4f880b108 logged in successfully from 172.18.0.1
2025-12-31 17:59:39 - application.routers.auth - INFO - [auth.py:62] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 17:59:40 - jars_app - ERROR - [audit.py:227] - Failed to write to AuditLog database table: 'trader_id' is an invalid keyword argument for AuditLog
Traceback (most recent call last):
  File "/application/application/utilities/audit.py", line 212, in log_user_action
    new_audit_log_entry = AuditLog(
                          ^^^^^^^^^
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 596, in _initialize_instance
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 594, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 2179, in _declarative_constructor
    raise TypeError(
TypeError: 'trader_id' is an invalid keyword argument for AuditLog
2025-12-31 17:59:40 - application.routers.auth - INFO - [auth.py:99] - User f615b727-9fe0-418a-9543-5ce4f880b108 logged in successfully from 172.18.0.1
2025-12-31 18:01:43 - application.routers.auth - INFO - [auth.py:180] - 2FA setup requested by user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 18:01:43 - application.routers.auth - INFO - [auth.py:190] - 2FA secret generated for user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 18:55:26 - application.routers.auth - INFO - [auth.py:62] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 18:55:28 - jars_app - ERROR - [audit.py:245] - Failed to write to AuditLog database table: 'trader_id' is an invalid keyword argument for AuditLog
Traceback (most recent call last):
  File "/application/application/utilities/audit.py", line 230, in log_user_action
    new_audit_log_entry = AuditLog(
                          ^^^^^^^^^
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 596, in _initialize_instance
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 594, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 2179, in _declarative_constructor
    raise TypeError(
TypeError: 'trader_id' is an invalid keyword argument for AuditLog
2025-12-31 18:55:28 - application.routers.auth - INFO - [auth.py:99] - User f615b727-9fe0-418a-9543-5ce4f880b108 logged in successfully from 172.18.0.1
2025-12-31 18:55:32 - application.routers.auth - INFO - [auth.py:180] - 2FA setup requested by user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 18:55:32 - application.routers.auth - INFO - [auth.py:190] - 2FA secret generated for user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:02:16 - application.routers.auth - INFO - [auth.py:202] - 2FA confirmation attempt by user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:02:16 - application.services.account_service - INFO - [account_service.py:93] - Getting basic user info for id: f615b727-9fe0-418a-9543-5ce4f880b108
2025-12-31 19:02:16 - application.main - ERROR - [main.py:43] - Unhandled exception: 'Config' object has no attribute 'ENCRYPTION_KEY'
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/auth.py", line 210, in confirm_2fa
    AuthService.confirm_2fa(db, data.code, data.secret, current_user.id)
  File "/application/application/services/auth_service.py", line 67, in confirm_2fa
    cipher = Fernet(settings.ENCRYPTION_KEY.encode())
                    ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pydantic/main.py", line 1026, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Config' object has no attribute 'ENCRYPTION_KEY'
2025-12-31 19:19:22 - application.routers.auth - INFO - [auth.py:62] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 19:19:23 - application.routers.auth - INFO - [auth.py:99] - User f615b727-9fe0-418a-9543-5ce4f880b108 logged in successfully from 172.18.0.1
2025-12-31 19:19:27 - application.routers.auth - INFO - [auth.py:202] - 2FA confirmation attempt by user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:19:27 - application.routers.auth - WARNING - [auth.py:207] - 2FA confirmation failed - invalid code for user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:19:55 - application.routers.auth - INFO - [auth.py:202] - 2FA confirmation attempt by user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:19:55 - application.services.account_service - INFO - [account_service.py:93] - Getting basic user info for id: f615b727-9fe0-418a-9543-5ce4f880b108
2025-12-31 19:19:55 - application.services.auth_service - INFO - [auth_service.py:74] - 2FA enabled for user f615b727-9fe0-418a-9543-5ce4f880b108
2025-12-31 19:19:55 - application.routers.auth - INFO - [auth.py:224] - 2FA enabled successfully for user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:20:52 - application.routers.auth - INFO - [auth.py:420] - Resend verification requested for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 19:20:52 - application.services.account_service - INFO - [account_service.py:282] - Verification email resent to divineuzoukwu3@gmail.com
2025-12-31 19:20:52 - application.routers.auth - INFO - [auth.py:425] - Verification email resent (if account exists) for divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 19:20:53 - application.tasks - INFO - [tasks.py:15] - Sending verification email to divineuzoukwu3@gmail.com
2025-12-31 19:20:53 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2025-12-31 19:20:53 - application.services.email_service - INFO - [email_service.py:26] - To: divineuzoukwu3@gmail.com
2025-12-31 19:20:53 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2025-12-31 19:20:53 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: cWfN-LuJIM3wC9WE-iiNCTicC5R2lumNT6R_dzMjJOE
2025-12-31 19:20:53 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=cWfN-LuJIM3wC9WE-iiNCTicC5R2lumNT6R_dzMjJOE
2025-12-31 19:20:53 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=cWfN-LuJIM3wC9WE-iiNCTicC5R2lumNT6R_dzMjJOE
2025-12-31 19:20:53 - application.tasks - INFO - [tasks.py:17] - Email sent successfully to divineuzoukwu3@gmail.com
2025-12-31 19:21:55 - application.routers.auth - INFO - [auth.py:384] - Email verification attempt from 172.18.0.1
2025-12-31 19:21:55 - application.services.account_service - INFO - [account_service.py:251] - Email verified for user f615b727-9fe0-418a-9543-5ce4f880b108
2025-12-31 19:21:55 - application.routers.auth - INFO - [auth.py:401] - Email verified successfully for user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:22:49 - application.routers.auth - INFO - [auth.py:355] - Password reset requested for email: divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 19:22:49 - application.services.auth_service - INFO - [auth_service.py:118] - Password reset token generated for user f615b727-9fe0-418a-9543-5ce4f880b108
2025-12-31 19:22:49 - application.routers.auth - INFO - [auth.py:359] - Password reset email sent (if account exists) for divineuzoukwu3@gmail.com from 172.18.0.1
2025-12-31 19:22:49 - application.tasks - INFO - [tasks.py:29] - Sending password reset email to divineuzoukwu3@gmail.com
2025-12-31 19:22:49 - application.services.email_service - INFO - [email_service.py:53] - DEVELOPMENT MODE - EMAIL NOT SENT
2025-12-31 19:22:49 - application.services.email_service - INFO - [email_service.py:54] - To: divineuzoukwu3@gmail.com
2025-12-31 19:22:49 - application.services.email_service - INFO - [email_service.py:55] - Subject: Reset your JARS Password
2025-12-31 19:22:49 - application.services.email_service - INFO - [email_service.py:56] - Reset Token: 6apK_X7XZ4O9Y08G6PlF0gHUoqCGPxLstffPNvG1ilU
2025-12-31 19:22:49 - application.services.email_service - INFO - [email_service.py:57] - Reset Link: https://jars.app/reset-password?token=6apK_X7XZ4O9Y08G6PlF0gHUoqCGPxLstffPNvG1ilU
2025-12-31 19:22:49 - application.services.email_service - INFO - [email_service.py:58] - API Endpoint: POST /api/v1/auth/password-reset/confirm
2025-12-31 19:22:49 - application.tasks - INFO - [tasks.py:31] - Email sent successfully to divineuzoukwu3@gmail.com
2025-12-31 19:23:53 - application.routers.auth - INFO - [auth.py:370] - Password reset confirmation attempt from 172.18.0.1
2025-12-31 19:23:54 - application.services.auth_service - INFO - [auth_service.py:139] - Password reset successful for user f615b727-9fe0-418a-9543-5ce4f880b108. All sessions revoked.
2025-12-31 19:23:54 - application.routers.auth - INFO - [auth.py:374] - Password reset successful from 172.18.0.1
2025-12-31 19:24:12 - application.routers.users - INFO - [users.py:26] - User f615b727-9fe0-418a-9543-5ce4f880b108 requesting basic profile from 172.18.0.1
2025-12-31 19:24:26 - application.routers.users - INFO - [users.py:37] - User f615b727-9fe0-418a-9543-5ce4f880b108 requesting full profile from 172.18.0.1
2025-12-31 19:24:26 - application.routers.users - INFO - [users.py:48] - Full profile returned for user f615b727-9fe0-418a-9543-5ce4f880b108 (KYC: False, Trader: False) from 172.18.0.1
2025-12-31 19:24:42 - application.routers.users - INFO - [users.py:62] - User f615b727-9fe0-418a-9543-5ce4f880b108 refreshing their data from 172.18.0.1
2025-12-31 19:24:42 - application.routers.users - INFO - [users.py:92] - User f615b727-9fe0-418a-9543-5ce4f880b108 data refreshed successfully (KYC: False, Trader: False) from 172.18.0.1
2025-12-31 19:25:01 - application.routers.users - INFO - [users.py:246] - User activity request for user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:25:01 - application.routers.users - INFO - [users.py:270] - Returned 3 activity logs for user f615b727-9fe0-418a-9543-5ce4f880b108 from 172.18.0.1
2025-12-31 19:25:39 - application.routers.traders - INFO - [traders.py:36] - User f615b727-9fe0-418a-9543-5ce4f880b108 applying to become trader from 172.18.0.1
2025-12-31 19:25:39 - application.services.tf_service - INFO - [tf_service.py:65] - Trader profile application created for user f615b727-9fe0-418a-9543-5ce4f880b108 with alias dhee - Status: DRAFT
2025-12-31 19:25:39 - application.routers.traders - ERROR - [traders.py:64] - Unexpected error in trader application: Object of type Decimal is not JSON serializable
Traceback (most recent call last):
  File "/application/application/routers/traders.py", line 45, in apply_to_become_trader
    log_user_action(
  File "/application/application/utilities/audit.py", line 223, in log_user_action
    message += f" | Changes: {json.dumps(changes)}"
                              ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
2026-01-01 22:14:04 - application.routers.auth - INFO - [auth.py:68] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-01 22:14:05 - application.services.auth_service - INFO - [auth_service.py:37] - User f615b727-9fe0-418a-9543-5ce4f880b108 requires 2FA verification
2026-01-01 22:14:05 - application.routers.auth - INFO - [auth.py:107] - User f615b727-9fe0-418a-9543-5ce4f880b108 requires 2FA from 172.18.0.1
2026-01-01 22:14:48 - application.routers.auth - INFO - [auth.py:68] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-01 22:14:48 - application.services.auth_service - INFO - [auth_service.py:37] - User f615b727-9fe0-418a-9543-5ce4f880b108 requires 2FA verification
2026-01-01 22:14:48 - application.routers.auth - INFO - [auth.py:107] - User f615b727-9fe0-418a-9543-5ce4f880b108 requires 2FA from 172.18.0.1
2026-01-02 02:28:41 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divineuzidh@gmail.com from 172.18.0.1
2026-01-02 02:28:42 - application.services.account_service - ERROR - [account_service.py:66] - Failed to create new user: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum account_type: "user_wallet"
LINE 1: ...-47aa-b034-e52517311317'::uuid::UUID, NULL::UUID, 'user_wall...
                                                             ^

[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES (%(id)s::UUID, %(owner_id)s::UUID, %(type)s, %(name)s, %(currency)s, %(balance)s, %(is_active)s, %(is_system)s, %(created_at)s)]
[parameters: {'id': UUID('1eb47c5e-04d7-47aa-b034-e52517311317'), 'owner_id': None, 'type': 'user_wallet', 'name': None, 'currency': 'NGN', 'balance': 0, 'is_active': False, 'is_system': False, 'created_at': datetime.datetime(2026, 1, 2, 2, 28, 42, 421320, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input value for enum account_type: "user_wallet"
LINE 1: ...-47aa-b034-e52517311317'::uuid::UUID, NULL::UUID, 'user_wall...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/application/application/services/account_service.py", line 47, in create_new_user
    db.flush()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum account_type: "user_wallet"
LINE 1: ...-47aa-b034-e52517311317'::uuid::UUID, NULL::UUID, 'user_wall...
                                                             ^

[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES (%(id)s::UUID, %(owner_id)s::UUID, %(type)s, %(name)s, %(currency)s, %(balance)s, %(is_active)s, %(is_system)s, %(created_at)s)]
[parameters: {'id': UUID('1eb47c5e-04d7-47aa-b034-e52517311317'), 'owner_id': None, 'type': 'user_wallet', 'name': None, 'currency': 'NGN', 'balance': 0, 'is_active': False, 'is_system': False, 'created_at': datetime.datetime(2026, 1, 2, 2, 28, 42, 421320, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2026-01-02 02:28:42 - application.routers.auth - ERROR - [auth.py:56] - User creation failed: Failed to create user: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum account_type: "user_wallet"
LINE 1: ...-47aa-b034-e52517311317'::uuid::UUID, NULL::UUID, 'user_wall...
                                                             ^

[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES (%(id)s::UUID, %(owner_id)s::UUID, %(type)s, %(name)s, %(currency)s, %(balance)s, %(is_active)s, %(is_system)s, %(created_at)s)]
[parameters: {'id': UUID('1eb47c5e-04d7-47aa-b034-e52517311317'), 'owner_id': None, 'type': 'user_wallet', 'name': None, 'currency': 'NGN', 'balance': 0, 'is_active': False, 'is_system': False, 'created_at': datetime.datetime(2026, 1, 2, 2, 28, 42, 421320, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/9h9h) from 172.18.0.1
2026-01-02 13:14:35 - application.routers.auth - INFO - [auth.py:68] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-02 13:14:36 - application.services.auth_service - WARNING - [auth_service.py:22] - Login attempt for non-existent user: divineuzoukwu3@gmail.com
2026-01-02 13:14:36 - application.routers.auth - WARNING - [auth.py:111] - Login failed - user not found: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-02 13:16:02 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-02 13:16:03 - application.services.account_service - ERROR - [account_service.py:66] - Failed to create new user: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum account_type: "user_wallet"
LINE 1: ...-4e9c-b150-6c706b6f7942'::uuid::UUID, NULL::UUID, 'user_wall...
                                                             ^

[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES (%(id)s::UUID, %(owner_id)s::UUID, %(type)s, %(name)s, %(currency)s, %(balance)s, %(is_active)s, %(is_system)s, %(created_at)s)]
[parameters: {'id': UUID('577b4798-734e-4e9c-b150-6c706b6f7942'), 'owner_id': None, 'type': 'user_wallet', 'name': None, 'currency': 'NGN', 'balance': 0, 'is_active': False, 'is_system': False, 'created_at': datetime.datetime(2026, 1, 2, 13, 16, 3, 653232, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input value for enum account_type: "user_wallet"
LINE 1: ...-4e9c-b150-6c706b6f7942'::uuid::UUID, NULL::UUID, 'user_wall...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/application/application/services/account_service.py", line 47, in create_new_user
    db.flush()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum account_type: "user_wallet"
LINE 1: ...-4e9c-b150-6c706b6f7942'::uuid::UUID, NULL::UUID, 'user_wall...
                                                             ^

[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES (%(id)s::UUID, %(owner_id)s::UUID, %(type)s, %(name)s, %(currency)s, %(balance)s, %(is_active)s, %(is_system)s, %(created_at)s)]
[parameters: {'id': UUID('577b4798-734e-4e9c-b150-6c706b6f7942'), 'owner_id': None, 'type': 'user_wallet', 'name': None, 'currency': 'NGN', 'balance': 0, 'is_active': False, 'is_system': False, 'created_at': datetime.datetime(2026, 1, 2, 13, 16, 3, 653232, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2026-01-02 13:16:03 - application.routers.auth - ERROR - [auth.py:56] - User creation failed: Failed to create user: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum account_type: "user_wallet"
LINE 1: ...-4e9c-b150-6c706b6f7942'::uuid::UUID, NULL::UUID, 'user_wall...
                                                             ^

[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES (%(id)s::UUID, %(owner_id)s::UUID, %(type)s, %(name)s, %(currency)s, %(balance)s, %(is_active)s, %(is_system)s, %(created_at)s)]
[parameters: {'id': UUID('577b4798-734e-4e9c-b150-6c706b6f7942'), 'owner_id': None, 'type': 'user_wallet', 'name': None, 'currency': 'NGN', 'balance': 0, 'is_active': False, 'is_system': False, 'created_at': datetime.datetime(2026, 1, 2, 13, 16, 3, 653232, tzinfo=datetime.timezone.utc)}]
(Background on this error at: https://sqlalche.me/e/20/9h9h) from 172.18.0.1
2026-01-02 13:37:16 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-02 13:37:18 - application.tasks - INFO - [tasks.py:16] - Sending verification email to divineuzoukwu3@gmail.com
2026-01-02 13:37:18 - application.routers.auth - INFO - [auth.py:50] - New user registered: e18257ea-8095-4673-a231-0a9e1b822493 (divineuzoukwu3@gmail.com) from 172.18.0.1
2026-01-02 13:37:18 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-02 13:37:18 - application.services.email_service - INFO - [email_service.py:26] - To: divineuzoukwu3@gmail.com
2026-01-02 13:37:18 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-02 13:37:18 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: arGMxi5YKOlu_ZohbMMAyZsjLYh1LztZiqEAKR_4Ztg
2026-01-02 13:37:18 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=arGMxi5YKOlu_ZohbMMAyZsjLYh1LztZiqEAKR_4Ztg
2026-01-02 13:37:18 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=arGMxi5YKOlu_ZohbMMAyZsjLYh1LztZiqEAKR_4Ztg
2026-01-02 13:37:18 - application.tasks - INFO - [tasks.py:18] - Email sent successfully to divineuzoukwu3@gmail.com
2026-01-02 13:37:26 - application.routers.auth - INFO - [auth.py:68] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-02 13:37:27 - application.services.auth_service - WARNING - [auth_service.py:30] - Login attempt for unverified user: divineuzoukwu3@gmail.com
2026-01-02 13:37:27 - application.routers.auth - WARNING - [auth.py:117] - Login failed - email not verified: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-02 13:40:21 - application.routers.auth - INFO - [auth.py:393] - Email verification attempt from 172.18.0.1
2026-01-02 13:40:21 - application.services.account_service - INFO - [account_service.py:275] - Email verified for user e18257ea-8095-4673-a231-0a9e1b822493, account activated
2026-01-02 13:40:21 - application.routers.auth - INFO - [auth.py:410] - Email verified successfully for user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:40:21 - application.tasks - INFO - [tasks.py:111] - Sending welcome email to divineuzoukwu3@gmail.com
2026-01-02 13:40:22 - application.services.email_service - INFO - [email_service.py:123] - DEVELOPMENT MODE - WELCOME EMAIL NOT SENT
2026-01-02 13:40:22 - application.services.email_service - INFO - [email_service.py:124] - To: divineuzoukwu3@gmail.com
2026-01-02 13:40:22 - application.services.email_service - INFO - [email_service.py:125] - Subject: Welcome to JARS, Divine!
2026-01-02 13:40:22 - application.services.email_service - INFO - [email_service.py:126] - Dashboard Link: https://jars.app/dashboard
2026-01-02 13:40:22 - application.tasks - INFO - [tasks.py:113] - Welcome email sent successfully to divineuzoukwu3@gmail.com
2026-01-02 13:40:31 - application.routers.auth - INFO - [auth.py:68] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-02 13:40:34 - application.routers.auth - INFO - [auth.py:105] - User e18257ea-8095-4673-a231-0a9e1b822493 logged in successfully from 172.18.0.1
2026-01-02 13:40:45 - application.routers.keys - INFO - [keys.py:62] - User e18257ea-8095-4673-a231-0a9e1b822493 listing exchange keys (exchange=None) from 172.18.0.1
2026-01-02 13:40:45 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:40:46 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:40:48 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:40:53 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:41:41 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:41:42 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:41:44 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:41:48 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:42:32 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:42:33 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:42:35 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:42:47 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:43:48 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:43:50 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:44:52 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:44:57 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 13:45:23 - application.routers.users - INFO - [users.py:26] - User e18257ea-8095-4673-a231-0a9e1b822493 requesting basic profile from 172.18.0.1
2026-01-02 14:03:28 - application.routers.auth - INFO - [auth.py:68] - Login attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-02 14:03:34 - application.routers.auth - INFO - [auth.py:105] - User e18257ea-8095-4673-a231-0a9e1b822493 logged in successfully from 172.18.0.1
2026-01-02 14:03:43 - application.routers.keys - INFO - [keys.py:62] - User e18257ea-8095-4673-a231-0a9e1b822493 listing exchange keys (exchange=None) from 172.18.0.1
2026-01-02 14:03:46 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 14:03:48 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 14:03:50 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 14:03:55 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 14:04:22 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 14:04:23 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 14:04:25 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 14:04:29 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 14:15:57 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 15:16:11 - application.routers.auth - INFO - [auth.py:260] - Token refresh for user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 15:16:13 - application.routers.auth - INFO - [auth.py:284] - Token refreshed successfully for user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 15:16:15 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 15:16:18 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-02 15:16:22 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user e18257ea-8095-4673-a231-0a9e1b822493 from 172.18.0.1
2026-01-04 14:55:46 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-04 14:55:46 - application.routers.auth - WARNING - [auth.py:53] - Registration failed - email already exists: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-04 14:56:09 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 14:56:11 - application.tasks - INFO - [tasks.py:16] - Sending verification email to divnexoxo@gmail.com
2026-01-04 14:56:11 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-04 14:56:11 - application.services.email_service - INFO - [email_service.py:26] - To: divnexoxo@gmail.com
2026-01-04 14:56:11 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-04 14:56:11 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: BXFU8qwRhkjOvW5q645dB69Dbb286_5YAqrCuXz4POU
2026-01-04 14:56:11 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=BXFU8qwRhkjOvW5q645dB69Dbb286_5YAqrCuXz4POU
2026-01-04 14:56:11 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=BXFU8qwRhkjOvW5q645dB69Dbb286_5YAqrCuXz4POU
2026-01-04 14:56:11 - application.routers.auth - INFO - [auth.py:50] - New user registered: ea84851d-f841-4140-be49-486923174bb1 (divnexoxo@gmail.com) from 172.18.0.1
2026-01-04 14:56:11 - application.tasks - INFO - [tasks.py:18] - Email sent successfully to divnexoxo@gmail.com
2026-01-04 14:56:49 - application.routers.auth - INFO - [auth.py:393] - Email verification attempt from 172.18.0.1
2026-01-04 14:56:49 - application.routers.auth - WARNING - [auth.py:413] - Email verification failed - invalid token from 172.18.0.1
2026-01-04 14:57:03 - application.routers.auth - INFO - [auth.py:393] - Email verification attempt from 172.18.0.1
2026-01-04 14:57:03 - application.services.account_service - INFO - [account_service.py:275] - Email verified for user ea84851d-f841-4140-be49-486923174bb1, account activated
2026-01-04 14:57:03 - application.tasks - INFO - [tasks.py:111] - Sending welcome email to divnexoxo@gmail.com
2026-01-04 14:57:03 - application.services.email_service - INFO - [email_service.py:123] - DEVELOPMENT MODE - WELCOME EMAIL NOT SENT
2026-01-04 14:57:03 - application.services.email_service - INFO - [email_service.py:124] - To: divnexoxo@gmail.com
2026-01-04 14:57:03 - application.services.email_service - INFO - [email_service.py:125] - Subject: Welcome to JARS, Divine!
2026-01-04 14:57:03 - application.services.email_service - INFO - [email_service.py:126] - Dashboard Link: https://jars.app/dashboard
2026-01-04 14:57:03 - application.tasks - INFO - [tasks.py:113] - Welcome email sent successfully to divnexoxo@gmail.com
2026-01-04 14:57:03 - application.routers.auth - INFO - [auth.py:410] - Email verified successfully for user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 14:58:05 - application.routers.auth - INFO - [auth.py:68] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 14:58:06 - application.routers.auth - INFO - [auth.py:105] - User ea84851d-f841-4140-be49-486923174bb1 logged in successfully from 172.18.0.1
2026-01-04 14:58:43 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 14:59:12 - application.routers.wallet - INFO - [wallet.py:58] - Deposit initiation by user ea84851d-f841-4140-be49-486923174bb1 for 5000 NGN from 172.18.0.1
2026-01-04 14:59:12 - application.services.ledger_service - INFO - [ledger_service.py:91] - Created pending deposit: dep_ea84851d_1fc9ed93df29 for 5000 NGN
2026-01-04 14:59:13 - application.services.paystack_service - INFO - [paystack_service.py:76] - Paystack transaction initialized: dep_ea84851d_1fc9ed93df29
2026-01-04 14:59:13 - application.routers.wallet - INFO - [wallet.py:80] - Deposit initiated: dep_ea84851d_1fc9ed93df29 for user ea84851d-f841-4140-be49-486923174bb1
2026-01-04 15:02:36 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 15:05:20 - application.routers.wallet - INFO - [wallet.py:44] - Wallet summary request by user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 15:06:03 - application.routers.wallet - INFO - [wallet.py:103] - Deposit verification for m4dx9e55scwu03g by user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 15:06:04 - application.services.paystack_service - ERROR - [paystack_service.py:103] - Paystack verification failed: Transaction reference not found.
2026-01-04 15:06:04 - application.routers.wallet - ERROR - [wallet.py:148] - Deposit verification failed: Deposit failed: Transaction reference not found.
Traceback (most recent call last):
  File "/application/application/routers/wallet.py", line 106, in verify_deposit
    paystack_data = PaystackService.verify_transaction(reference)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/paystack_service.py", line 104, in verify_transaction
    raise es.DepositError(message)
application.utilities.exceptions.DepositError: Deposit failed: Transaction reference not found.
2026-01-04 15:06:48 - application.routers.wallet - INFO - [wallet.py:103] - Deposit verification for dep_ea84851d_1fc9ed93df29 by user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 15:06:50 - application.routers.wallet - ERROR - [wallet.py:148] - Deposit verification failed: Wallet not found for user ea84851d-f841-4140-be49-486923174bb1 not found
Traceback (most recent call last):
  File "/application/application/routers/wallet.py", line 109, in verify_deposit
    transaction, amount = LedgerService.process_successful_deposit(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 119, in process_successful_deposit
    raise es.AccountNotFoundError(f"Wallet not found for user {user_id}")
application.utilities.exceptions.AccountNotFoundError: Wallet not found for user ea84851d-f841-4140-be49-486923174bb1 not found
2026-01-04 15:09:33 - application.routers.wallet - INFO - [wallet.py:161] - Transaction history request by user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 15:09:43 - application.routers.webhooks - WARNING - [webhooks.py:28] - Paystack webhook received without signature
2026-01-04 15:10:02 - application.routers.users - INFO - [users.py:246] - User activity request for user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 15:10:03 - application.routers.users - INFO - [users.py:270] - Returned 4 activity logs for user ea84851d-f841-4140-be49-486923174bb1 from 172.18.0.1
2026-01-04 15:26:55 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:26:56 - application.routers.auth - WARNING - [auth.py:53] - Registration failed - email already exists: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:29:28 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:29:28 - application.routers.auth - WARNING - [auth.py:52] - Registration failed - email already exists: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:30:17 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:30:19 - application.routers.auth - INFO - [auth.py:49] - New user registered: 3afe8f43-db1a-4829-9d38-456f1c325530 (divnexoxo@gmail.com) from 172.18.0.1
2026-01-04 15:30:19 - application.tasks - INFO - [tasks.py:16] - Sending verification email to divnexoxo@gmail.com
2026-01-04 15:30:19 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-04 15:30:19 - application.services.email_service - INFO - [email_service.py:26] - To: divnexoxo@gmail.com
2026-01-04 15:30:19 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-04 15:30:19 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: PBT0oNyydch2580BvcxHFP-L04AZXhmkA0-TLjPGUes
2026-01-04 15:30:19 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=PBT0oNyydch2580BvcxHFP-L04AZXhmkA0-TLjPGUes
2026-01-04 15:30:19 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=PBT0oNyydch2580BvcxHFP-L04AZXhmkA0-TLjPGUes
2026-01-04 15:30:19 - application.tasks - INFO - [tasks.py:18] - Email sent successfully to divnexoxo@gmail.com
2026-01-04 15:32:25 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:32:26 - application.routers.auth - INFO - [auth.py:49] - New user registered: fcea0621-330b-40a7-93a2-c2fcbaa403d7 (divnexoxo@gmail.com) from 172.18.0.1
2026-01-04 15:32:26 - application.tasks - INFO - [tasks.py:16] - Sending verification email to divnexoxo@gmail.com
2026-01-04 15:32:26 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-04 15:32:26 - application.services.email_service - INFO - [email_service.py:26] - To: divnexoxo@gmail.com
2026-01-04 15:32:26 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-04 15:32:26 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: IHnQDuw0gNX7dTnVYBKii7S991YZSN3UU-R5EuyKp-A
2026-01-04 15:32:26 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=IHnQDuw0gNX7dTnVYBKii7S991YZSN3UU-R5EuyKp-A
2026-01-04 15:32:26 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=IHnQDuw0gNX7dTnVYBKii7S991YZSN3UU-R5EuyKp-A
2026-01-04 15:32:26 - application.tasks - INFO - [tasks.py:18] - Email sent successfully to divnexoxo@gmail.com
2026-01-04 15:34:22 - application.routers.auth - INFO - [auth.py:26] - Registration attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:34:23 - application.tasks - INFO - [tasks.py:16] - Sending verification email to divnexoxo@gmail.com
2026-01-04 15:34:23 - application.routers.auth - INFO - [auth.py:49] - New user registered: 42d7c605-d4c9-4911-abc6-f2c0159f366d (divnexoxo@gmail.com) from 172.18.0.1
2026-01-04 15:34:23 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-04 15:34:23 - application.services.email_service - INFO - [email_service.py:26] - To: divnexoxo@gmail.com
2026-01-04 15:34:23 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-04 15:34:23 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: 4mPeUyhDsG1bS1quIabeVeXWuNKtkg63sXVSmFTFs0M
2026-01-04 15:34:23 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=4mPeUyhDsG1bS1quIabeVeXWuNKtkg63sXVSmFTFs0M
2026-01-04 15:34:23 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=4mPeUyhDsG1bS1quIabeVeXWuNKtkg63sXVSmFTFs0M
2026-01-04 15:34:23 - application.tasks - INFO - [tasks.py:18] - Email sent successfully to divnexoxo@gmail.com
2026-01-04 15:35:11 - application.routers.auth - INFO - [auth.py:392] - Email verification attempt from 172.18.0.1
2026-01-04 15:35:11 - application.routers.auth - WARNING - [auth.py:412] - Email verification failed - invalid token from 172.18.0.1
2026-01-04 15:35:47 - application.routers.auth - INFO - [auth.py:392] - Email verification attempt from 172.18.0.1
2026-01-04 15:35:47 - application.routers.auth - WARNING - [auth.py:412] - Email verification failed - invalid token from 172.18.0.1
2026-01-04 15:37:01 - application.routers.auth - INFO - [auth.py:392] - Email verification attempt from 172.18.0.1
2026-01-04 15:37:01 - application.routers.auth - WARNING - [auth.py:412] - Email verification failed - invalid token from 172.18.0.1
2026-01-04 15:37:18 - application.routers.auth - INFO - [auth.py:428] - Resend verification requested for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:37:18 - application.services.account_service - INFO - [account_service.py:310] - Verification email resent to divnexoxo@gmail.com
2026-01-04 15:37:18 - application.routers.auth - INFO - [auth.py:433] - Verification email resent (if account exists) for divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:37:18 - application.tasks - INFO - [tasks.py:16] - Sending verification email to divnexoxo@gmail.com
2026-01-04 15:37:18 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-04 15:37:18 - application.services.email_service - INFO - [email_service.py:26] - To: divnexoxo@gmail.com
2026-01-04 15:37:18 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-04 15:37:18 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: Cqr1YEFLwyboHqZ9he0Y1LdsmQ8RQf0fLVtQAp6H9qA
2026-01-04 15:37:18 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=Cqr1YEFLwyboHqZ9he0Y1LdsmQ8RQf0fLVtQAp6H9qA
2026-01-04 15:37:18 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=Cqr1YEFLwyboHqZ9he0Y1LdsmQ8RQf0fLVtQAp6H9qA
2026-01-04 15:37:18 - application.tasks - INFO - [tasks.py:18] - Email sent successfully to divnexoxo@gmail.com
2026-01-04 15:37:40 - application.routers.auth - INFO - [auth.py:392] - Email verification attempt from 172.18.0.1
2026-01-04 15:37:40 - application.routers.auth - WARNING - [auth.py:412] - Email verification failed - invalid token from 172.18.0.1
2026-01-04 15:37:47 - application.routers.auth - INFO - [auth.py:392] - Email verification attempt from 172.18.0.1
2026-01-04 15:37:47 - application.routers.auth - WARNING - [auth.py:412] - Email verification failed - invalid token from 172.18.0.1
2026-01-04 15:39:41 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:39:42 - application.services.auth_service - WARNING - [auth_service.py:30] - Login attempt for unverified user: divnexoxo@gmail.com
2026-01-04 15:39:42 - application.routers.auth - WARNING - [auth.py:116] - Login failed - email not verified: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:40:32 - application.routers.auth - INFO - [auth.py:428] - Resend verification requested for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:40:32 - application.services.account_service - INFO - [account_service.py:310] - Verification email resent to divnexoxo@gmail.com
2026-01-04 15:40:32 - application.routers.auth - INFO - [auth.py:433] - Verification email resent (if account exists) for divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:40:32 - application.tasks - INFO - [tasks.py:16] - Sending verification email to divnexoxo@gmail.com
2026-01-04 15:40:32 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-04 15:40:32 - application.services.email_service - INFO - [email_service.py:26] - To: divnexoxo@gmail.com
2026-01-04 15:40:32 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-04 15:40:32 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: Bp6R71m_Ex2wykpRvPZsIEMa7T5Uljn2OGdbhfkbFEk
2026-01-04 15:40:32 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=Bp6R71m_Ex2wykpRvPZsIEMa7T5Uljn2OGdbhfkbFEk
2026-01-04 15:40:32 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=Bp6R71m_Ex2wykpRvPZsIEMa7T5Uljn2OGdbhfkbFEk
2026-01-04 15:40:32 - application.tasks - INFO - [tasks.py:18] - Email sent successfully to divnexoxo@gmail.com
2026-01-04 15:41:04 - application.routers.auth - INFO - [auth.py:392] - Email verification attempt from 172.18.0.1
2026-01-04 15:41:04 - application.services.account_service - INFO - [account_service.py:279] - Email verified for user 42d7c605-d4c9-4911-abc6-f2c0159f366d, account activated
2026-01-04 15:41:04 - application.routers.auth - INFO - [auth.py:409] - Email verified successfully for user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-04 15:41:05 - application.tasks - INFO - [tasks.py:111] - Sending welcome email to divnexoxo@gmail.com
2026-01-04 15:41:05 - application.services.email_service - INFO - [email_service.py:123] - DEVELOPMENT MODE - WELCOME EMAIL NOT SENT
2026-01-04 15:41:05 - application.services.email_service - INFO - [email_service.py:124] - To: divnexoxo@gmail.com
2026-01-04 15:41:05 - application.services.email_service - INFO - [email_service.py:125] - Subject: Welcome to JARS, Divine!
2026-01-04 15:41:05 - application.services.email_service - INFO - [email_service.py:126] - Dashboard Link: https://jars.app/dashboard
2026-01-04 15:41:05 - application.tasks - INFO - [tasks.py:113] - Welcome email sent successfully to divnexoxo@gmail.com
2026-01-04 15:41:28 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:41:29 - application.services.auth_service - WARNING - [auth_service.py:26] - Invalid password for user divnexoxo@gmail.com
2026-01-04 15:41:29 - application.routers.auth - WARNING - [auth.py:113] - Login failed - invalid password: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:41:35 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 15:41:36 - application.routers.auth - INFO - [auth.py:104] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d logged in successfully from 172.18.0.1
2026-01-04 15:42:04 - application.routers.users - INFO - [users.py:26] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d requesting basic profile from 172.18.0.1
2026-01-04 15:42:48 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-04 15:43:44 - application.routers.wallet - INFO - [wallet.py:44] - Wallet summary request by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-04 15:43:56 - application.routers.wallet - INFO - [wallet.py:58] - Deposit initiation by user 42d7c605-d4c9-4911-abc6-f2c0159f366d for 5000 NGN from 172.18.0.1
2026-01-04 15:43:56 - application.services.ledger_service - INFO - [ledger_service.py:91] - Created pending deposit: dep_42d7c605_1a83952ff979 for 5000 NGN
2026-01-04 15:43:58 - application.services.paystack_service - INFO - [paystack_service.py:76] - Paystack transaction initialized: dep_42d7c605_1a83952ff979
2026-01-04 15:43:58 - application.routers.wallet - INFO - [wallet.py:80] - Deposit initiated: dep_42d7c605_1a83952ff979 for user 42d7c605-d4c9-4911-abc6-f2c0159f366d
2026-01-04 15:46:11 - application.routers.wallet - INFO - [wallet.py:103] - Deposit verification for  dep_42d7c605_1a83952ff979 by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-04 15:46:12 - application.services.paystack_service - ERROR - [paystack_service.py:103] - Paystack verification failed: Transaction reference not found.
2026-01-04 15:46:12 - application.routers.wallet - ERROR - [wallet.py:148] - Deposit verification failed: Deposit failed: Transaction reference not found.
Traceback (most recent call last):
  File "/application/application/routers/wallet.py", line 106, in verify_deposit
    paystack_data = PaystackService.verify_transaction(reference)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/paystack_service.py", line 104, in verify_transaction
    raise es.DepositError(message)
application.utilities.exceptions.DepositError: Deposit failed: Transaction reference not found.
2026-01-04 15:57:46 - application.routers.webhooks - WARNING - [webhooks.py:28] - Paystack webhook received without signature
2026-01-04 16:26:16 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 16:26:17 - application.routers.auth - INFO - [auth.py:104] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d logged in successfully from 172.18.0.1
2026-01-04 16:29:48 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 16:29:49 - application.routers.auth - INFO - [auth.py:104] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d logged in successfully from 172.18.0.1
2026-01-04 16:30:07 - application.routers.admin - INFO - [admin.py:24] - Admin 42d7c605-d4c9-4911-abc6-f2c0159f366d attempting to create systems account: system_fee_wallet from 172.18.0.1
2026-01-04 16:30:07 - application.routers.admin - INFO - [admin.py:42] - Systems account created: 666137d8-628e-419e-bafa-cc6ca21c04e6 (system_fee_wallet) by admin 42d7c605-d4c9-4911-abc6-f2c0159f366d
2026-01-04 16:30:19 - application.routers.admin - INFO - [admin.py:24] - Admin 42d7c605-d4c9-4911-abc6-f2c0159f366d attempting to create systems account: system_fee_wallet from 172.18.0.1
2026-01-04 16:30:19 - application.services.admin_service - WARNING - [admin_service.py:17] - Account system_fee_wallet already exists, can only have one systems account per type
2026-01-04 16:30:19 - application.routers.admin - WARNING - [admin.py:46] - Creation failed - account already exists: system_fee_wallet
2026-01-04 16:30:27 - application.routers.admin - INFO - [admin.py:24] - Admin 42d7c605-d4c9-4911-abc6-f2c0159f366d attempting to create systems account: system_bank_settlement from 172.18.0.1
2026-01-04 16:30:27 - application.routers.admin - INFO - [admin.py:42] - Systems account created: 9daf722c-75c8-4224-900f-d189a6493c2a (system_bank_settlement) by admin 42d7c605-d4c9-4911-abc6-f2c0159f366d
2026-01-04 19:28:41 - application.routers.webhooks - WARNING - [webhooks.py:28] - Paystack webhook received without signature
2026-01-04 19:30:34 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-04 19:30:37 - application.routers.auth - INFO - [auth.py:104] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d logged in successfully from 172.18.0.1
2026-01-04 19:30:47 - application.routers.webhooks - WARNING - [webhooks.py:28] - Paystack webhook received without signature
2026-01-05 06:56:50 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-05 06:56:51 - application.routers.auth - INFO - [auth.py:104] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d logged in successfully from 172.18.0.1
2026-01-05 06:57:26 - application.routers.wallet - INFO - [wallet.py:58] - Deposit initiation by user 42d7c605-d4c9-4911-abc6-f2c0159f366d for 67800 NGN from 172.18.0.1
2026-01-05 06:57:26 - application.services.ledger_service - INFO - [ledger_service.py:88] - Created pending deposit: dep_42d7c605_2566ef76136d for 67800 NGN
2026-01-05 06:57:28 - application.services.paystack_service - INFO - [paystack_service.py:76] - Paystack transaction initialized: dep_42d7c605_2566ef76136d
2026-01-05 06:57:28 - application.routers.wallet - INFO - [wallet.py:80] - Deposit initiated: dep_42d7c605_2566ef76136d for user 42d7c605-d4c9-4911-abc6-f2c0159f366d
2026-01-05 06:58:08 - application.routers.webhooks - INFO - [webhooks.py:55] - Paystack webhook received: charge.success for dep_42d7c605_2566ef76136d - queuing to Celery
2026-01-05 06:58:09 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_2566ef76136d
2026-01-05 06:58:09 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_2566ef76136d: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account(db, str(AccountType.SYSTEM_BANK_SETTLEMENT))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account '{name}' not found.")
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 06:58:39 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_2566ef76136d
2026-01-05 06:58:39 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_2566ef76136d: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account(db, str(AccountType.SYSTEM_BANK_SETTLEMENT))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account '{name}' not found.")
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 06:59:09 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_2566ef76136d
2026-01-05 06:59:09 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_2566ef76136d: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account(db, str(AccountType.SYSTEM_BANK_SETTLEMENT))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account '{name}' not found.")
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 06:59:39 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_2566ef76136d
2026-01-05 06:59:40 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_2566ef76136d: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account(db, str(AccountType.SYSTEM_BANK_SETTLEMENT))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account '{name}' not found.")
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 07:00:10 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_2566ef76136d
2026-01-05 07:00:10 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_2566ef76136d: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account(db, str(AccountType.SYSTEM_BANK_SETTLEMENT))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account '{name}' not found.")
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 07:00:40 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_2566ef76136d
2026-01-05 07:00:40 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_2566ef76136d: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account(db, str(AccountType.SYSTEM_BANK_SETTLEMENT))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account '{name}' not found.")
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 07:05:52 - application.routers.wallet - INFO - [wallet.py:58] - Deposit initiation by user 42d7c605-d4c9-4911-abc6-f2c0159f366d for 67800 NGN from 172.18.0.1
2026-01-05 07:05:52 - application.services.ledger_service - INFO - [ledger_service.py:89] - Created pending deposit: dep_42d7c605_348cf1cd7479 for 67800 NGN
2026-01-05 07:05:54 - application.services.paystack_service - INFO - [paystack_service.py:76] - Paystack transaction initialized: dep_42d7c605_348cf1cd7479
2026-01-05 07:05:54 - application.routers.wallet - INFO - [wallet.py:80] - Deposit initiated: dep_42d7c605_348cf1cd7479 for user 42d7c605-d4c9-4911-abc6-f2c0159f366d
2026-01-05 07:06:23 - application.routers.webhooks - INFO - [webhooks.py:55] - Paystack webhook received: charge.success for dep_42d7c605_348cf1cd7479 - queuing to Celery
2026-01-05 07:06:24 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_348cf1cd7479
2026-01-05 07:06:25 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_348cf1cd7479: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account_by_type(db, AccountType.SYSTEM_BANK_SETTLEMENT)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account of type '{account_type.value}' not found.")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 07:06:55 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_348cf1cd7479
2026-01-05 07:06:55 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_348cf1cd7479: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account_by_type(db, AccountType.SYSTEM_BANK_SETTLEMENT)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account of type '{account_type.value}' not found.")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 07:07:25 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_348cf1cd7479
2026-01-05 07:07:25 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_348cf1cd7479: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account_by_type(db, AccountType.SYSTEM_BANK_SETTLEMENT)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account of type '{account_type.value}' not found.")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 07:07:55 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_348cf1cd7479
2026-01-05 07:07:55 - application.tasks - ERROR - [tasks.py:71] - Webhook processing failed for dep_42d7c605_348cf1cd7479: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
Traceback (most recent call last):
  File "/application/application/tasks.py", line 45, in task_process_paystack_webhook
    transaction, credited_amount = LedgerService.process_successful_deposit(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 118, in process_successful_deposit
    paystack_account = LedgerService.get_paystack_settlement_account(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 32, in get_paystack_settlement_account
    return LedgerService.get_system_account_by_type(db, AccountType.SYSTEM_BANK_SETTLEMENT)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/ledger_service.py", line 26, in get_system_account
    raise es.SystemAccountNotFoundError(f"System account of type '{account_type.value}' not found.")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
application.utilities.exceptions.SystemAccountNotFoundError: System account 'AccountType.SYSTEM_BANK_SETTLEMENT' not found. not found
2026-01-05 07:26:01 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-05 07:26:03 - application.routers.auth - INFO - [auth.py:104] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d logged in successfully from 172.18.0.1
2026-01-05 07:26:25 - application.routers.wallet - INFO - [wallet.py:58] - Deposit initiation by user 42d7c605-d4c9-4911-abc6-f2c0159f366d for 20000 NGN from 172.18.0.1
2026-01-05 07:26:25 - application.services.ledger_service - INFO - [ledger_service.py:88] - Created pending deposit: dep_42d7c605_8f82a8b1ff0a for 20000 NGN
2026-01-05 07:26:26 - application.services.paystack_service - INFO - [paystack_service.py:76] - Paystack transaction initialized: dep_42d7c605_8f82a8b1ff0a
2026-01-05 07:26:27 - application.routers.wallet - INFO - [wallet.py:80] - Deposit initiated: dep_42d7c605_8f82a8b1ff0a for user 42d7c605-d4c9-4911-abc6-f2c0159f366d
2026-01-05 07:26:49 - application.routers.webhooks - INFO - [webhooks.py:55] - Paystack webhook received: charge.success for dep_42d7c605_8f82a8b1ff0a - queuing to Celery
2026-01-05 07:26:50 - application.tasks - INFO - [tasks.py:39] - Processing webhook task: charge.success for dep_42d7c605_8f82a8b1ff0a
2026-01-05 07:26:50 - application.services.ledger_service - INFO - [ledger_service.py:146] - Processed deposit dep_42d7c605_8f82a8b1ff0a: 20000.00000000 NGN credited to user 42d7c605-d4c9-4911-abc6-f2c0159f366d
2026-01-05 07:26:50 - application.tasks - INFO - [tasks.py:51] - Deposit processed: dep_42d7c605_8f82a8b1ff0a, amount: 20000.00000000 NGN
2026-01-05 07:31:41 - application.routers.wallet - INFO - [wallet.py:161] - Transaction history request by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:31:54 - application.routers.wallet - INFO - [wallet.py:24] - Balance check by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:46:32 - application.routers.auth - INFO - [auth.py:67] - Login attempt for email: divnexoxo@gmail.com from 172.18.0.1
2026-01-05 07:46:32 - application.services.auth_service - INFO - [auth_service.py:21] - [AUTH] Login attempt for email: divnexoxo@gmail.com
2026-01-05 07:46:33 - application.services.auth_service - INFO - [auth_service.py:53] - [AUTH SUCCESS] User 42d7c605-d4c9-4911-abc6-f2c0159f366d (divnexoxo@gmail.com) logged in successfully
2026-01-05 07:46:33 - application.routers.auth - INFO - [auth.py:104] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d logged in successfully from 172.18.0.1
2026-01-05 07:46:40 - application.routers.auth - INFO - [auth.py:188] - 2FA setup requested by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:46:40 - application.routers.auth - INFO - [auth.py:198] - 2FA secret generated for user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:54:33 - application.routers.auth - INFO - [auth.py:210] - 2FA confirmation attempt by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:54:33 - application.routers.auth - WARNING - [auth.py:215] - 2FA confirmation failed - invalid code for user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:54:49 - application.routers.auth - INFO - [auth.py:210] - 2FA confirmation attempt by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:54:49 - application.routers.auth - WARNING - [auth.py:215] - 2FA confirmation failed - invalid code for user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:56:18 - application.routers.auth - INFO - [auth.py:210] - 2FA confirmation attempt by user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:56:18 - application.services.auth_service - INFO - [auth_service.py:66] - [2FA SETUP] User 42d7c605-d4c9-4911-abc6-f2c0159f366d is confirming 2FA setup
2026-01-05 07:56:18 - application.services.auth_service - INFO - [auth_service.py:85] - [2FA ENABLED] User 42d7c605-d4c9-4911-abc6-f2c0159f366d (divnexoxo@gmail.com) successfully enabled two-factor authentication
2026-01-05 07:56:18 - application.routers.auth - INFO - [auth.py:232] - 2FA enabled successfully for user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:58:34 - application.routers.users - INFO - [users.py:26] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d requesting basic profile from 172.18.0.1
2026-01-05 07:59:05 - application.routers.users - INFO - [users.py:37] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d requesting full profile from 172.18.0.1
2026-01-05 07:59:05 - application.routers.users - INFO - [users.py:48] - Full profile returned for user 42d7c605-d4c9-4911-abc6-f2c0159f366d (KYC: False, Trader: False) from 172.18.0.1
2026-01-05 07:59:49 - application.routers.users - INFO - [users.py:246] - User activity request for user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 07:59:49 - application.routers.users - INFO - [users.py:270] - Returned 16 activity logs for user 42d7c605-d4c9-4911-abc6-f2c0159f366d from 172.18.0.1
2026-01-05 08:00:19 - application.routers.traders - INFO - [traders.py:180] - Listing active traders from 172.18.0.1 - Skip: 0, Limit: 50
2026-01-05 08:00:19 - application.routers.traders - INFO - [traders.py:184] - Found 0 active traders
2026-01-05 08:00:28 - application.routers.traders - INFO - [traders.py:135] - User 42d7c605-d4c9-4911-abc6-f2c0159f366d fetching their trader profile from 172.18.0.1
2026-01-05 08:00:28 - application.routers.traders - ERROR - [traders.py:148] - Unexpected error fetching trader profile: 404: Trader profile not found
Traceback (most recent call last):
  File "/application/application/routers/traders.py", line 141, in get_my_trader_profile
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Trader profile not found")
fastapi.exceptions.HTTPException: 404: Trader profile not found
2026-01-11 10:58:53 - application.routers.auth - INFO - [auth.py:31] - [REGISTRATION] New signup attempt | Email: divineuzoukwu3@gmail.com | Country: NG | IP: 172.18.0.1
2026-01-11 10:58:53 - application.services.account_service - INFO - [account_service.py:25] - [USER REGISTRATION] Starting registration for email: divineuzoukwu3@gmail.com
2026-01-11 10:58:54 - application.services.account_service - INFO - [account_service.py:48] - [USER CREATED] User record created | ID: 2f80162b-9714-4607-8cd1-1186022e128f | Email: divineuzoukwu3@gmail.com
2026-01-11 10:58:54 - application.services.account_service - ERROR - [account_service.py:82] - [REGISTRATION FAILED] Unexpected error for divineuzoukwu3@gmail.com | Error: 'USER_WALLET' is not a valid AccountType
2026-01-11 10:58:54 - application.routers.auth - ERROR - [auth.py:63] - [REGISTRATION FAILED] Error creating user divineuzoukwu3@gmail.com | IP: 172.18.0.1 | Error: Failed to create user: 'USER_WALLET' is not a valid AccountType
2026-01-11 11:14:33 - application.routers.auth - INFO - [auth.py:31] - [REGISTRATION] New signup attempt | Email: divineuzoukwu3@gmail.com | Country: NG | IP: 172.18.0.1
2026-01-11 11:14:33 - application.services.account_service - INFO - [account_service.py:25] - [USER REGISTRATION] Starting registration for email: divineuzoukwu3@gmail.com
2026-01-11 11:14:34 - application.services.account_service - INFO - [account_service.py:48] - [USER CREATED] User record created | ID: ec250062-4f6e-4eb4-90f2-4aefe12428f3 | Email: divineuzoukwu3@gmail.com
2026-01-11 11:14:34 - application.services.account_service - ERROR - [account_service.py:82] - [REGISTRATION FAILED] Unexpected error for divineuzoukwu3@gmail.com | Error: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum account_type: "USER_WALLET"
[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES ($1::UUID, $2::UUID, $3::account_type, $4::VARCHAR, $5::VARCHAR, $6::NUMERIC(20, 8), $7::BOOLEAN, $8::BOOLEAN, $9::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('abfb8635-f19c-469e-b929-04792d3b85a1'), UUID('ec250062-4f6e-4eb4-90f2-4aefe12428f3'), 'USER_WALLET', 'Divine Uzoukwu', 'NGN', 0, False, False, datetime.datetime(2026, 1, 11, 11, 14, 34, 492812, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2026-01-11 11:14:34 - application.routers.auth - ERROR - [auth.py:63] - [REGISTRATION FAILED] Error creating user divineuzoukwu3@gmail.com | IP: 172.18.0.1 | Error: Failed to create user: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum account_type: "USER_WALLET"
[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES ($1::UUID, $2::UUID, $3::account_type, $4::VARCHAR, $5::VARCHAR, $6::NUMERIC(20, 8), $7::BOOLEAN, $8::BOOLEAN, $9::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('abfb8635-f19c-469e-b929-04792d3b85a1'), UUID('ec250062-4f6e-4eb4-90f2-4aefe12428f3'), 'USER_WALLET', 'Divine Uzoukwu', 'NGN', 0, False, False, datetime.datetime(2026, 1, 11, 11, 14, 34, 492812, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2026-01-11 11:21:27 - application.routers.auth - INFO - [auth.py:31] - [REGISTRATION] New signup attempt | Email: divineuzoukwu3@gmail.com | Country: NG | IP: 172.18.0.1
2026-01-11 11:21:27 - application.services.account_service - INFO - [account_service.py:25] - [USER REGISTRATION] Starting registration for email: divineuzoukwu3@gmail.com
2026-01-11 11:21:28 - application.services.account_service - INFO - [account_service.py:48] - [USER CREATED] User record created | ID: 9f4614ac-ec8c-4dd3-9158-803e811f8588 | Email: divineuzoukwu3@gmail.com
2026-01-11 11:21:28 - application.services.account_service - ERROR - [account_service.py:82] - [REGISTRATION FAILED] Unexpected error for divineuzoukwu3@gmail.com | Error: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum account_type: "USER_WALLET"
[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES ($1::UUID, $2::UUID, $3::account_type, $4::VARCHAR, $5::VARCHAR, $6::NUMERIC(20, 8), $7::BOOLEAN, $8::BOOLEAN, $9::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('567d9b0e-18a6-4942-93ae-436e8ece32c8'), UUID('9f4614ac-ec8c-4dd3-9158-803e811f8588'), 'USER_WALLET', 'Divine Uzoukwu', 'NGN', 0, False, False, datetime.datetime(2026, 1, 11, 11, 21, 28, 485915, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2026-01-11 11:21:28 - application.routers.auth - ERROR - [auth.py:63] - [REGISTRATION FAILED] Error creating user divineuzoukwu3@gmail.com | IP: 172.18.0.1 | Error: Failed to create user: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum account_type: "USER_WALLET"
[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES ($1::UUID, $2::UUID, $3::account_type, $4::VARCHAR, $5::VARCHAR, $6::NUMERIC(20, 8), $7::BOOLEAN, $8::BOOLEAN, $9::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('567d9b0e-18a6-4942-93ae-436e8ece32c8'), UUID('9f4614ac-ec8c-4dd3-9158-803e811f8588'), 'USER_WALLET', 'Divine Uzoukwu', 'NGN', 0, False, False, datetime.datetime(2026, 1, 11, 11, 21, 28, 485915, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2026-01-11 11:24:41 - application.routers.auth - INFO - [auth.py:31] - [REGISTRATION] New signup attempt | Email: divineuzoukwu3@gmail.com | Country: NG | IP: 172.18.0.1
2026-01-11 11:24:41 - application.services.account_service - INFO - [account_service.py:25] - [USER REGISTRATION] Starting registration for email: divineuzoukwu3@gmail.com
2026-01-11 11:24:42 - application.services.account_service - INFO - [account_service.py:48] - [USER CREATED] User record created | ID: 7dc39551-853b-4373-96a9-e45546db1937 | Email: divineuzoukwu3@gmail.com
2026-01-11 11:24:42 - application.services.account_service - INFO - [account_service.py:67] - [WALLET CREATED] Wallet created for user 7dc39551-853b-4373-96a9-e45546db1937 | Wallet ID: 1bc5cd4b-1df5-4aac-bf90-7e66cacc7852 | Status: Inactive
2026-01-11 11:24:43 - application.services.account_service - INFO - [account_service.py:76] - [EMAIL QUEUED] Verification email queued for user 7dc39551-853b-4373-96a9-e45546db1937 (divineuzoukwu3@gmail.com)
2026-01-11 11:24:43 - application.routers.auth - INFO - [auth.py:53] - [REGISTRATION SUCCESS] New user created | ID: 7dc39551-853b-4373-96a9-e45546db1937 | Email: divineuzoukwu3@gmail.com | Country: NG | IP: 172.18.0.1
2026-01-11 11:24:43 - application.tasks - INFO - [tasks.py:15] - [EMAIL TASK] Sending verification email to divineuzoukwu3@gmail.com | Attempt 1/3
2026-01-11 11:24:43 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-11 11:24:43 - application.services.email_service - INFO - [email_service.py:26] - To: divineuzoukwu3@gmail.com
2026-01-11 11:24:43 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-11 11:24:43 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: ZH5JJy2gSBWCM_pQYQFkbwVzZQ42Z5DY1VdJ0AQqnEI
2026-01-11 11:24:43 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=ZH5JJy2gSBWCM_pQYQFkbwVzZQ42Z5DY1VdJ0AQqnEI
2026-01-11 11:24:43 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=ZH5JJy2gSBWCM_pQYQFkbwVzZQ42Z5DY1VdJ0AQqnEI
2026-01-11 11:24:43 - application.tasks - INFO - [tasks.py:18] - [EMAIL SUCCESS] Verification email delivered to divineuzoukwu3@gmail.com
2026-01-11 11:25:35 - application.routers.auth - INFO - [auth.py:408] - Email verification attempt from 172.18.0.1
2026-01-11 11:25:35 - application.routers.auth - WARNING - [auth.py:428] - Email verification failed - invalid token from 172.18.0.1
2026-01-11 11:26:04 - application.routers.auth - INFO - [auth.py:408] - Email verification attempt from 172.18.0.1
2026-01-11 11:26:04 - application.routers.auth - WARNING - [auth.py:428] - Email verification failed - invalid token from 172.18.0.1
2026-01-11 11:27:54 - application.routers.auth - INFO - [auth.py:408] - Email verification attempt from 172.18.0.1
2026-01-11 11:27:54 - application.routers.auth - WARNING - [auth.py:428] - Email verification failed - invalid token from 172.18.0.1
2026-01-11 11:28:35 - application.routers.auth - INFO - [auth.py:408] - Email verification attempt from 172.18.0.1
2026-01-11 11:28:35 - application.routers.auth - WARNING - [auth.py:428] - Email verification failed - invalid token from 172.18.0.1
2026-01-11 11:31:02 - application.routers.auth - INFO - [auth.py:408] - Email verification attempt from 172.18.0.1
2026-01-11 11:31:02 - application.routers.auth - WARNING - [auth.py:428] - Email verification failed - invalid token from 172.18.0.1
2026-01-11 11:32:04 - application.routers.auth - INFO - [auth.py:78] - [LOGIN] Login attempt | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-11 11:32:04 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzoukwu3@gmail.com
2026-01-11 11:32:04 - application.services.auth_service - WARNING - [auth_service.py:37] - [AUTH BLOCKED] User 7dc39551-853b-4373-96a9-e45546db1937 (divineuzoukwu3@gmail.com) tried to login before email verification
2026-01-11 11:32:04 - application.routers.auth - WARNING - [auth.py:130] - [LOGIN BLOCKED] Email not verified | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-11 11:33:36 - application.routers.auth - INFO - [auth.py:445] - Resend verification requested for email: divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-11 11:33:36 - application.services.account_service - INFO - [account_service.py:359] - Verification email resent to divineuzoukwu3@gmail.com
2026-01-11 11:33:36 - application.routers.auth - INFO - [auth.py:450] - Verification email resent (if account exists) for divineuzoukwu3@gmail.com from 172.18.0.1
2026-01-11 11:33:36 - application.tasks - INFO - [tasks.py:15] - [EMAIL TASK] Sending verification email to divineuzoukwu3@gmail.com | Attempt 1/3
2026-01-11 11:33:36 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-11 11:33:36 - application.services.email_service - INFO - [email_service.py:26] - To: divineuzoukwu3@gmail.com
2026-01-11 11:33:36 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-11 11:33:36 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: tg40Eo6dRl-4e_PXdIf1x6HW1985Kfz9REkuLEHP6Eg
2026-01-11 11:33:36 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=tg40Eo6dRl-4e_PXdIf1x6HW1985Kfz9REkuLEHP6Eg
2026-01-11 11:33:36 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=tg40Eo6dRl-4e_PXdIf1x6HW1985Kfz9REkuLEHP6Eg
2026-01-11 11:33:36 - application.tasks - INFO - [tasks.py:18] - [EMAIL SUCCESS] Verification email delivered to divineuzoukwu3@gmail.com
2026-01-11 11:34:04 - application.routers.auth - INFO - [auth.py:408] - Email verification attempt from 172.18.0.1
2026-01-11 11:34:04 - application.services.account_service - INFO - [account_service.py:325] - Email verified for user 7dc39551-853b-4373-96a9-e45546db1937, account activated
2026-01-11 11:34:04 - application.tasks - INFO - [tasks.py:138] - Sending welcome email to divineuzoukwu3@gmail.com
2026-01-11 11:34:04 - application.services.email_service - INFO - [email_service.py:123] - DEVELOPMENT MODE - WELCOME EMAIL NOT SENT
2026-01-11 11:34:04 - application.services.email_service - INFO - [email_service.py:124] - To: divineuzoukwu3@gmail.com
2026-01-11 11:34:04 - application.services.email_service - INFO - [email_service.py:125] - Subject: Welcome to JARS, Divine!
2026-01-11 11:34:04 - application.services.email_service - INFO - [email_service.py:126] - Dashboard Link: https://jars.app/dashboard
2026-01-11 11:34:04 - application.tasks - INFO - [tasks.py:140] - Welcome email sent successfully to divineuzoukwu3@gmail.com
2026-01-11 11:34:04 - application.routers.auth - INFO - [auth.py:425] - Email verified successfully for user 7dc39551-853b-4373-96a9-e45546db1937 from 172.18.0.1
2026-01-11 11:34:14 - application.routers.auth - INFO - [auth.py:78] - [LOGIN] Login attempt | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-11 11:34:14 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzoukwu3@gmail.com
2026-01-11 11:34:15 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 7dc39551-853b-4373-96a9-e45546db1937 (divineuzoukwu3@gmail.com) logged in successfully
2026-01-11 11:34:15 - application.routers.auth - INFO - [auth.py:117] - [LOGIN SUCCESS] User authenticated | ID: 7dc39551-853b-4373-96a9-e45546db1937 | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-11 11:34:52 - application.routers.users - INFO - [users.py:27] - User 7dc39551-853b-4373-96a9-e45546db1937 requesting basic profile from 172.18.0.1
2026-01-11 11:36:15 - application.routers.users - INFO - [users.py:27] - User 7dc39551-853b-4373-96a9-e45546db1937 requesting basic profile from 172.18.0.1
2026-01-11 11:36:15 - application.routers.users - INFO - [users.py:27] - User 7dc39551-853b-4373-96a9-e45546db1937 requesting basic profile from 172.18.0.1
2026-01-11 11:39:05 - application.routers.auth - INFO - [auth.py:78] - [LOGIN] Login attempt | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-11 11:39:05 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzoukwu3@gmail.com
2026-01-11 11:39:06 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 7dc39551-853b-4373-96a9-e45546db1937 (divineuzoukwu3@gmail.com) logged in successfully
2026-01-11 11:39:06 - application.routers.auth - INFO - [auth.py:117] - [LOGIN SUCCESS] User authenticated | ID: 7dc39551-853b-4373-96a9-e45546db1937 | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-11 11:39:09 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:09 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:10 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:10 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:12 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:12 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:16 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:16 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:25 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:25 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:26 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:26 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:28 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:28 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:32 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:32 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:39 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:40 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:41 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:41 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:43 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:43 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:47 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:47 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:55 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:55 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:55 - application.routers.keys - INFO - [keys.py:85] - [KEY] Returned 0 keys for user 7dc39551-853b-4373-96a9-e45546db1937
2026-01-11 11:39:56 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:56 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:39:58 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:39:58 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:02 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:02 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:05 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:05 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:05 - application.routers.traders - INFO - [traders.py:178] - Returned 0 active traders from 172.18.0.1
2026-01-11 11:40:06 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:06 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:08 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:08 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:12 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:13 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:13 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:13 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:14 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:14 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:16 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:16 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:40:20 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:40:20 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:42:59 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:42:59 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:00 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:00 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:03 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:03 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:07 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:07 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:26 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:26 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:27 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:27 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:29 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:29 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:33 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:33 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:43 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:43 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:44 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:44 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:46 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:46 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:43:50 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:43:50 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:44:50 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:44:50 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:44:51 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:44:51 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:44:53 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:44:53 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:44:57 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:44:57 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:45:57 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:45:57 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:45:58 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:45:58 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:46:00 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:46:00 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:46:04 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:46:04 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:47:04 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:47:04 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:47:06 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:47:06 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:47:08 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:47:08 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 11:47:13 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 11:47:13 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:11:50 - application.routers.auth - INFO - [auth.py:78] - [LOGIN] Login attempt | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-11 12:11:50 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzoukwu3@gmail.com
2026-01-11 12:11:51 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 7dc39551-853b-4373-96a9-e45546db1937 (divineuzoukwu3@gmail.com) logged in successfully
2026-01-11 12:11:51 - application.routers.auth - INFO - [auth.py:117] - [LOGIN SUCCESS] User authenticated | ID: 7dc39551-853b-4373-96a9-e45546db1937 | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-11 12:11:55 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:11:55 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:11:56 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:11:56 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:11:58 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:11:58 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:12:02 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:12:02 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:12:25 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:12:25 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:12:25 - application.routers.traders - INFO - [traders.py:178] - Returned 0 active traders from 172.18.0.1
2026-01-11 12:12:26 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:12:26 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:12:28 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:12:28 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:12:30 - application.routers.keys - INFO - [keys.py:85] - [KEY] Returned 0 keys for user 7dc39551-853b-4373-96a9-e45546db1937
2026-01-11 12:12:32 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:12:32 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:12:37 - application.routers.auth - INFO - [auth.py:203] - 2FA setup requested by user 7dc39551-853b-4373-96a9-e45546db1937 from 172.18.0.1
2026-01-11 12:12:37 - application.routers.auth - INFO - [auth.py:213] - 2FA secret generated for user 7dc39551-853b-4373-96a9-e45546db1937 from 172.18.0.1
2026-01-11 12:13:32 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:13:32 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:13:33 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:13:33 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:13:35 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:13:35 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:13:39 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:13:39 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:13:47 - application.routers.auth - INFO - [auth.py:225] - 2FA confirmation attempt by user 7dc39551-853b-4373-96a9-e45546db1937 from 172.18.0.1
2026-01-11 12:13:47 - application.services.auth_service - INFO - [auth_service.py:70] - [2FA SETUP] User 7dc39551-853b-4373-96a9-e45546db1937 is confirming 2FA setup
2026-01-11 12:13:47 - application.services.auth_service - INFO - [auth_service.py:89] - [2FA ENABLED] User 7dc39551-853b-4373-96a9-e45546db1937 (divineuzoukwu3@gmail.com) successfully enabled two-factor authentication
2026-01-11 12:13:47 - application.routers.auth - INFO - [auth.py:247] - 2FA enabled successfully for user 7dc39551-853b-4373-96a9-e45546db1937 from 172.18.0.1
2026-01-11 12:14:12 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:12 - application.routers.keys - INFO - [keys.py:85] - [KEY] Returned 0 keys for user 7dc39551-853b-4373-96a9-e45546db1937
2026-01-11 12:14:12 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:13 - application.routers.users - INFO - [users.py:27] - User 7dc39551-853b-4373-96a9-e45546db1937 requesting basic profile from 172.18.0.1
2026-01-11 12:14:13 - application.routers.auth - INFO - [auth.py:203] - 2FA setup requested by user 7dc39551-853b-4373-96a9-e45546db1937 from 172.18.0.1
2026-01-11 12:14:13 - application.routers.auth - WARNING - [auth.py:206] - 2FA already enabled for user 7dc39551-853b-4373-96a9-e45546db1937 from 172.18.0.1
2026-01-11 12:14:14 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:14 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:16 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:16 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:20 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:20 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:30 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:30 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:31 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:31 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:33 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:33 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:37 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:37 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:41 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:41 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:43 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:43 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:45 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:45 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-11 12:14:49 - application.routers.wallet - INFO - [wallet.py:36] - [WALLET] Balance returned | User: 7dc39551-853b-4373-96a9-e45546db1937 | Balance: NGN 0E-8
2026-01-11 12:14:49 - application.main - ERROR - [main.py:53] - Unhandled exception: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'missing', 'loc': ('response', 'user_id'), 'msg': 'Field required', 'input': {'balance': Decimal('0E-8'), 'currency': 'NGN', 'account_id': UUID('1bc5cd4b-1df5-4aac-bf90-7e66cacc7852'), 'is_active': True}}

  File "/application/application/routers/wallet.py", line 21, in get_wallet_balance
    GET /api/v1/wallet/balance
2026-01-12 14:36:30 - application.routers.auth - INFO - [auth.py:78] - [LOGIN] Login attempt | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-12 14:36:30 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzoukwu3@gmail.com
2026-01-12 14:36:31 - application.services.auth_service - INFO - [auth_service.py:45] - [AUTH 2FA] User 7dc39551-853b-4373-96a9-e45546db1937 requires 2FA verification - issuing pre-auth token
2026-01-12 14:36:31 - application.routers.auth - INFO - [auth.py:119] - [LOGIN 2FA REQUIRED] User needs to complete 2FA | ID: 7dc39551-853b-4373-96a9-e45546db1937 | Email: divineuzoukwu3@gmail.com | IP: 172.18.0.1
2026-01-12 14:40:52 - application.routers.auth - INFO - [auth.py:31] - [REGISTRATION] New signup attempt | Email: dhee@gmail.com | Country: NGN | IP: 172.18.0.1
2026-01-12 14:40:52 - application.services.account_service - INFO - [account_service.py:25] - [USER REGISTRATION] Starting registration for email: dhee@gmail.com
2026-01-12 14:40:53 - application.services.account_service - INFO - [account_service.py:48] - [USER CREATED] User record created | ID: 0bcf3af6-a893-421b-8493-2be2fee40ade | Email: dhee@gmail.com
2026-01-12 14:40:53 - application.services.account_service - INFO - [account_service.py:67] - [WALLET CREATED] Wallet created for user 0bcf3af6-a893-421b-8493-2be2fee40ade | Wallet ID: 2f39c316-2ccf-45ff-868a-d795dee58d26 | Status: Inactive
2026-01-12 14:40:53 - application.services.account_service - INFO - [account_service.py:76] - [EMAIL QUEUED] Verification email queued for user 0bcf3af6-a893-421b-8493-2be2fee40ade (dhee@gmail.com)
2026-01-12 14:40:53 - application.tasks - INFO - [tasks.py:15] - [EMAIL TASK] Sending verification email to dhee@gmail.com | Attempt 1/3
2026-01-12 14:40:53 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-12 14:40:53 - application.services.email_service - INFO - [email_service.py:26] - To: dhee@gmail.com
2026-01-12 14:40:53 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-12 14:40:53 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: KxmEryyKVHyw6tOMNGZ3BnuIi2Nil7UG-8zb3sGLCe0
2026-01-12 14:40:53 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=KxmEryyKVHyw6tOMNGZ3BnuIi2Nil7UG-8zb3sGLCe0
2026-01-12 14:40:53 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=KxmEryyKVHyw6tOMNGZ3BnuIi2Nil7UG-8zb3sGLCe0
2026-01-12 14:40:53 - application.tasks - INFO - [tasks.py:18] - [EMAIL SUCCESS] Verification email delivered to dhee@gmail.com
2026-01-12 14:40:53 - application.routers.auth - INFO - [auth.py:53] - [REGISTRATION SUCCESS] New user created | ID: 0bcf3af6-a893-421b-8493-2be2fee40ade | Email: dhee@gmail.com | Country: NGN | IP: 172.18.0.1
2026-01-12 14:40:53 - application.main - ERROR - [main.py:55] - Unhandled exception: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 'updated_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <application.models.account.User object at 0x76b835477aa0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

  File "/usr/local/lib/python3.12/site-packages/slowapi/extension.py", line 25, in register
    POST /api/v1/auth/register
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 'updated_at'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <application.models.account.User object at 0x76b835477aa0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

  File "/usr/local/lib/python3.12/site-packages/slowapi/extension.py", line 25, in register
    POST /api/v1/auth/register
2026-01-15 16:36:25 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: divineuzo7@gmail.com | Country: NGN | IP: 172.18.0.1
2026-01-15 16:36:25 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for divineuzo7@gmail.com
2026-01-15 16:36:26 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: e48626ff-5780-4f35-acd4-f5dfa0206cdf
2026-01-15 16:36:26 - application.main - ERROR - [main.py:54] - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.StringDataRightTruncationError'>: value too long for type character varying(3)
[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES ($1::UUID, $2::UUID, $3::account_type, $4::VARCHAR, $5::VARCHAR, $6::NUMERIC(20, 8), $7::BOOLEAN, $8::BOOLEAN, $9::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('8843a8b4-e03c-4492-8231-bc5aae33daee'), UUID('e48626ff-5780-4f35-acd4-f5dfa0206cdf'), 'USER_DEMO_WALLET', 'Divine Uzoukwu Demo', 'USDT', 0, True, False, datetime.datetime(2026, 1, 15, 16, 36, 26, 443951, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 205, in bind_execute
asyncpg.exceptions.StringDataRightTruncationError: value too long for type character varying(3)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.StringDataRightTruncationError'>: value too long for type character varying(3)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/auth.py", line 35, in register
    new_user = await RegistrationService.register_free_user(db, user_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/registration_service.py", line 80, in register_free_user
    await db.flush()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 787, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.StringDataRightTruncationError'>: value too long for type character varying(3)
[SQL: INSERT INTO accounts (id, owner_id, type, name, currency, balance, is_active, is_system, created_at) VALUES ($1::UUID, $2::UUID, $3::account_type, $4::VARCHAR, $5::VARCHAR, $6::NUMERIC(20, 8), $7::BOOLEAN, $8::BOOLEAN, $9::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('8843a8b4-e03c-4492-8231-bc5aae33daee'), UUID('e48626ff-5780-4f35-acd4-f5dfa0206cdf'), 'USER_DEMO_WALLET', 'Divine Uzoukwu Demo', 'USDT', 0, True, False, datetime.datetime(2026, 1, 15, 16, 36, 26, 443951, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2026-01-15 16:41:19 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: divineuzo7@gmail.com | Country: NGN | IP: 172.18.0.1
2026-01-15 16:41:19 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for divineuzo7@gmail.com
2026-01-15 16:41:20 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: fe141218-4ddf-40a6-865e-506c6a194426
2026-01-15 16:41:20 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 022590fd-6a39-4b78-8014-447b5512d06f
2026-01-15 16:41:20 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user fe141218-4ddf-40a6-865e-506c6a194426
2026-01-15 16:41:20 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 16:41:20 - application.routers.auth - ERROR - [auth.py:63] - [REGISTRATION FAILED] System account missing | Error: System account of type 'system_bank_balance' not found. not found
2026-01-15 16:53:07 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: divineuzo7@gmail.com | Country: NGN | IP: 172.18.0.1
2026-01-15 16:53:07 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for divineuzo7@gmail.com
2026-01-15 16:53:08 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-15 16:53:08 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 5c6c9a7f-17df-41bc-adfe-9c854524e619
2026-01-15 16:53:08 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-15 16:53:08 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 33003f09-a262-4bd2-9d9a-08112383319f | New balance: 10000
2026-01-15 16:53:08 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 16:53:09 - application.routers.auth - INFO - [auth.py:50] - [REGISTRATION SUCCESS] Free tier user created | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | 10k V-USDT issued | IP: 172.18.0.1
2026-01-15 16:53:09 - application.tasks - INFO - [tasks.py:15] - [EMAIL TASK] Sending verification email to divineuzo7@gmail.com | Attempt 1/3
2026-01-15 16:53:09 - application.services.email_service - INFO - [email_service.py:25] - DEVELOPMENT MODE - EMAIL NOT SENT
2026-01-15 16:53:09 - application.services.email_service - INFO - [email_service.py:26] - To: divineuzo7@gmail.com
2026-01-15 16:53:09 - application.services.email_service - INFO - [email_service.py:27] - Subject: Verify your JARS Account
2026-01-15 16:53:09 - application.services.email_service - INFO - [email_service.py:28] - Verification Token: Yw_kwoGlqVhvMI1snIn5Virhl8wozXcSZN1gdKc2Awk
2026-01-15 16:53:09 - application.services.email_service - INFO - [email_service.py:29] - Verification Link: https://jars.app/verify?token=Yw_kwoGlqVhvMI1snIn5Virhl8wozXcSZN1gdKc2Awk
2026-01-15 16:53:09 - application.services.email_service - INFO - [email_service.py:30] - API Endpoint: POST /api/v1/auth/verify-email?token=Yw_kwoGlqVhvMI1snIn5Virhl8wozXcSZN1gdKc2Awk
2026-01-15 16:53:09 - application.tasks - INFO - [tasks.py:18] - [EMAIL SUCCESS] Verification email delivered to divineuzo7@gmail.com
2026-01-15 17:01:20 - application.routers.auth - INFO - [auth.py:478] - Email verification attempt from 172.18.0.1
2026-01-15 17:01:20 - application.services.account_service - INFO - [account_service.py:331] - Email verified for user 33003f09-a262-4bd2-9d9a-08112383319f, account activated
2026-01-15 17:01:20 - application.routers.auth - INFO - [auth.py:495] - Email verified successfully for user 33003f09-a262-4bd2-9d9a-08112383319f from 172.18.0.1
2026-01-15 17:01:20 - application.tasks - INFO - [tasks.py:138] - Sending welcome email to divineuzo7@gmail.com
2026-01-15 17:01:20 - application.services.email_service - INFO - [email_service.py:123] - DEVELOPMENT MODE - WELCOME EMAIL NOT SENT
2026-01-15 17:01:20 - application.services.email_service - INFO - [email_service.py:124] - To: divineuzo7@gmail.com
2026-01-15 17:01:20 - application.services.email_service - INFO - [email_service.py:125] - Subject: Welcome to JARS, Divine!
2026-01-15 17:01:20 - application.services.email_service - INFO - [email_service.py:126] - Dashboard Link: https://jars.app/dashboard
2026-01-15 17:01:20 - application.tasks - INFO - [tasks.py:140] - Welcome email sent successfully to divineuzo7@gmail.com
2026-01-15 17:01:54 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzou7@gmail.com | IP: 172.18.0.1
2026-01-15 17:01:54 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzou7@gmail.com
2026-01-15 17:01:54 - application.services.auth_service - WARNING - [auth_service.py:29] - [AUTH FAILED] Login attempt for non-existent account: divineuzou7@gmail.com
2026-01-15 17:01:54 - application.routers.auth - WARNING - [auth.py:194] - [LOGIN FAILED] User not found | Email: divineuzou7@gmail.com | IP: 172.18.0.1
2026-01-15 17:02:40 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 17:02:40 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-15 17:02:41 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-15 17:02:41 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 17:02:55 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-15 17:02:55 - application.routers.wallet - WARNING - [wallet.py:33] - [WALLET] No wallet found | User: 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-15 17:30:33 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 17:30:33 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-15 17:30:35 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-15 17:30:35 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 17:30:44 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/traders.py", line 126, in get_my_trader_profile
    trader = await TraderProfileService.get_trader_by_user_id(db, current_user.id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/tf_service.py", line 298, in get_trader_by_user_id
    return user.trader_profile
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 18:42:22 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 18:42:22 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-15 18:42:23 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-15 18:42:23 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 18:43:03 - application.routers.users - INFO - [users.py:28] - User 33003f09-a262-4bd2-9d9a-08112383319f requesting basic profile from 172.18.0.1
2026-01-15 18:43:32 - application.routers.users - INFO - [users.py:39] - [USER] Full profile requested | User: 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) | IP: 172.18.0.1
2026-01-15 18:43:32 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-15 18:43:32 - application.routers.users - INFO - [users.py:55] - [USER] Full profile returned | User: 33003f09-a262-4bd2-9d9a-08112383319f | Balance: None None | KYC: False | Trader: False | IP: 172.18.0.1
2026-01-15 18:43:32 - application.main - ERROR - [main.py:54] - Unhandled exception: 1 validation error for UserFullResponse
tier
  Field required [type=missing, input_value={'id': UUID('33003f09-a26..., 'wallet_active': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 60, in get_current_user_full_info
    return account_schema.UserFullResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserFullResponse
tier
  Field required [type=missing, input_value={'id': UUID('33003f09-a26..., 'wallet_active': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2026-01-15 21:10:06 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for newuser@example.com
2026-01-15 21:10:07 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 72b8c28a-416b-4b46-a032-682b647bb22f
2026-01-15 21:10:07 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: b64c81b9-297b-4ea3-8175-4945265b7f95
2026-01-15 21:10:07 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 72b8c28a-416b-4b46-a032-682b647bb22f
2026-01-15 21:10:07 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 72b8c28a-416b-4b46-a032-682b647bb22f | New balance: 10000
2026-01-15 21:10:07 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:10:10 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for testuser@example.com
2026-01-15 21:10:12 - application.services.registration_service - INFO - [registration_service.py:93] - [PLUS REGISTRATION] Starting for plusnew@example.com
2026-01-15 21:10:13 - application.services.registration_service - INFO - [registration_service.py:96] - [PLUS REGISTRATION] User created | ID: 4b036eec-c5c4-4505-9536-3886b0344484
2026-01-15 21:10:13 - application.services.registration_service - INFO - [registration_service.py:119] - [PLUS REGISTRATION] Wallets created | Demo: 38194b1c-b1b1-410d-af67-dd98ee607c3b | Live: 95a9ad9c-f533-4fc3-9f8c-b2cc2c3645f4
2026-01-15 21:10:13 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 4b036eec-c5c4-4505-9536-3886b0344484
2026-01-15 21:10:13 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 4b036eec-c5c4-4505-9536-3886b0344484 | New balance: 10000
2026-01-15 21:10:15 - application.services.registration_service - INFO - [registration_service.py:130] - [BUSINESS REGISTRATION] Starting for business@example.com
2026-01-15 21:10:15 - application.services.registration_service - INFO - [registration_service.py:133] - [BUSINESS REGISTRATION] User created | ID: 6862f6df-0704-49d7-83b6-9d2a0ad0de3b
2026-01-15 21:10:15 - application.services.registration_service - INFO - [registration_service.py:156] - [BUSINESS REGISTRATION] Wallets created | Demo: 2b59851b-2dc5-427a-acaa-15a5f1239db2 | Live: 1416afb4-59b9-4fbb-8200-b1974bdbbae1
2026-01-15 21:10:15 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 6862f6df-0704-49d7-83b6-9d2a0ad0de3b
2026-01-15 21:10:15 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 6862f6df-0704-49d7-83b6-9d2a0ad0de3b | New balance: 10000
2026-01-15 21:10:17 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem@example.com
2026-01-15 21:10:18 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 81d034b1-31f3-4284-bd06-f74bc5cdfd9d
2026-01-15 21:10:18 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 90945167-5023-4b93-8e8c-055cb1956de6
2026-01-15 21:10:18 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 81d034b1-31f3-4284-bd06-f74bc5cdfd9d
2026-01-15 21:10:18 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:10:39 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 4eedbade-bc4a-4cfc-8c35-81851af760bb from free to PLUS
2026-01-15 21:10:39 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 4eedbade-bc4a-4cfc-8c35-81851af760bb
2026-01-15 21:10:39 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 4eedbade-bc4a-4cfc-8c35-81851af760bb
2026-01-15 21:10:40 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 4eedbade-bc4a-4cfc-8c35-81851af760bb | New balance: 10000
2026-01-15 21:10:40 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:10:40 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 4eedbade-bc4a-4cfc-8c35-81851af760bb upgraded to PLUS tier
2026-01-15 21:10:43 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user d1667d27-66db-4284-8989-c202385d54fa from plus to BUSINESS
2026-01-15 21:10:43 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user d1667d27-66db-4284-8989-c202385d54fa
2026-01-15 21:10:43 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user d1667d27-66db-4284-8989-c202385d54fa
2026-01-15 21:10:43 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user d1667d27-66db-4284-8989-c202385d54fa | New balance: 10000
2026-01-15 21:10:43 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:10:43 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User d1667d27-66db-4284-8989-c202385d54fa upgraded to BUSINESS tier
2026-01-15 21:10:56 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User a4803b15-81a7-446e-aaa5-507d0178894e downgraded to FREE tier
2026-01-15 21:11:03 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 42df90c4-7300-4666-bb9f-f2238a6b278d
2026-01-15 21:11:03 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 42df90c4-7300-4666-bb9f-f2238a6b278d | New balance: 10000
2026-01-15 21:11:03 - application.services.registration_service - INFO - [registration_service.py:381] - [DEMO WALLET] Created demo wallet 3b77f9df-60cb-49a2-b207-6957de1fcd98 for user 42df90c4-7300-4666-bb9f-f2238a6b278d with 10000 V-USD
2026-01-15 21:11:06 - application.services.registration_service - INFO - [registration_service.py:365] - [DEMO WALLET] User dbf89d18-0199-479a-998b-db4cf1214ee7 already has demo wallet f8619c06-3271-498b-96bb-ae1b140fe9ab
2026-01-15 21:11:11 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: new1674ea@example.com | Country: NG | IP: 127.0.0.1
2026-01-15 21:11:11 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for new1674ea@example.com
2026-01-15 21:11:11 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 1bcc95da-52a2-4f6b-b34e-3cb2bfaeda71
2026-01-15 21:11:11 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 23c947ed-a199-4f03-84fb-fdb88ae482af
2026-01-15 21:11:11 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 1bcc95da-52a2-4f6b-b34e-3cb2bfaeda71
2026-01-15 21:11:12 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 1bcc95da-52a2-4f6b-b34e-3cb2bfaeda71 | New balance: 10000
2026-01-15 21:11:12 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:11:12 - application.routers.auth - INFO - [auth.py:50] - [REGISTRATION SUCCESS] Free tier user created | ID: 1bcc95da-52a2-4f6b-b34e-3cb2bfaeda71 | Email: new1674ea@example.com | 10k V-USDT issued | IP: 127.0.0.1
2026-01-15 21:11:15 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: testuser@example.com | Country: NG | IP: 127.0.0.1
2026-01-15 21:11:15 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for testuser@example.com
2026-01-15 21:11:15 - application.routers.auth - WARNING - [auth.py:57] - [REGISTRATION BLOCKED] Email already registered: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:11:26 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:11:26 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:11:27 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 7d1413e2-ef10-49d3-b8d4-b0a24df1c408 (testuser@example.com) logged in successfully
2026-01-15 21:11:28 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 7d1413e2-ef10-49d3-b8d4-b0a24df1c408 | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:11:31 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:11:31 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:11:32 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 06e0ea1a-ab6e-4994-bc57-5f83e40f1ee1 (testuser@example.com) - possible brute force attempt
2026-01-15 21:11:32 - application.routers.auth - WARNING - [auth.py:197] - [LOGIN FAILED] Wrong password | Email: testuser@example.com | IP: 127.0.0.1 - Possible brute force
2026-01-15 21:11:34 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: nonexistent@example.com | IP: 127.0.0.1
2026-01-15 21:11:34 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: nonexistent@example.com
2026-01-15 21:11:34 - application.services.auth_service - WARNING - [auth_service.py:29] - [AUTH FAILED] Login attempt for non-existent account: nonexistent@example.com
2026-01-15 21:11:34 - application.routers.auth - WARNING - [auth.py:194] - [LOGIN FAILED] User not found | Email: nonexistent@example.com | IP: 127.0.0.1
2026-01-15 21:12:44 - application.services.account_service - WARNING - [account_service.py:252] - User dbfe9ffb-7d46-4e8f-af6f-24eada1e6ba1 not found
2026-01-15 21:13:26 - application.services.account_service - ERROR - [account_service.py:282] - Error getting activity logs for user 4a001b97-dbbd-4f7b-861f-71eb790fa9e5: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/services/account_service.py", line 267, in get_activity_logs
    if user.trader_profile and user.trader_profile.id:
       ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:13:29 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for race86939f@example.com
2026-01-15 21:13:29 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for race86939f@example.com
2026-01-15 21:13:30 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 1e6926e1-310a-442b-816b-c95c47b8e645
2026-01-15 21:13:30 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: d951f125-b136-4937-880b-c9285838cb9d
2026-01-15 21:13:30 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 1e6926e1-310a-442b-816b-c95c47b8e645
2026-01-15 21:13:30 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 1e6926e1-310a-442b-816b-c95c47b8e645 | New balance: 10000
2026-01-15 21:13:30 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:13:36 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 7446015f-c0a5-4ff4-a34c-eae0063e5cee
2026-01-15 21:13:36 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 7446015f-c0a5-4ff4-a34c-eae0063e5cee | New balance: 10000
2026-01-15 21:13:39 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 50000 V-USDT to user 3ea4b0dd-4266-44ed-86ff-dc14c5424500
2026-01-15 21:13:40 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 50000 V-USDT issued to user 3ea4b0dd-4266-44ed-86ff-dc14c5424500 | New balance: 50000
2026-01-15 21:13:43 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user fc644f3d-8a9e-4100-b8a8-c308bface601
2026-01-15 21:13:45 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 61de2c3d-abbd-47fc-9af2-4e2a2c6497f7
2026-01-15 21:13:45 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:13:48 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User da5ecb21-15ab-4454-be64-50988c690e65 balance reset to 10000 V-USDT (free)
2026-01-15 21:13:55 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 2b76a90a-30a5-4acc-b788-cfc5acfa4e20 balance reset to 10000 V-USDT (paid)
2026-01-15 21:13:58 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 63c5d300-f021-401e-bf1a-4abacbdd2297 balance reset to 10000 V-USDT (free)
2026-01-15 21:14:13 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 240a4be7-f16e-4462-8c1e-163447dd23fe
2026-01-15 21:14:16 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 106c6808-1df0-432b-9f3d-db4b3735c9f1
2026-01-15 21:14:19 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 463a66e4-76b7-4c4f-915f-83242a87cca7
2026-01-15 21:14:19 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 463a66e4-76b7-4c4f-915f-83242a87cca7 | New balance: 10000
2026-01-15 21:14:22 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 064f37ee-2642-4192-ba56-40e8dd5b63ec
2026-01-15 21:14:22 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 064f37ee-2642-4192-ba56-40e8dd5b63ec | New balance: 10000
2026-01-15 21:14:25 - application.services.registration_service - INFO - [registration_service.py:181] - [WALLET ACTIVATED] Live wallet da3176f0-09e0-4a43-b823-91768325ff33 activated for user fc7207f7-5e65-42cc-97e3-819844e36dda
2026-01-15 21:14:31 - application.services.registration_service - INFO - [registration_service.py:181] - [WALLET ACTIVATED] Live wallet 58bad713-3b8c-4380-8d7c-ed5a77602d72 activated for user 9f4fe6cc-0f44-4e05-8e54-0508abfa91e5
2026-01-15 21:14:34 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 44c81e8b-d6bb-4d32-9228-a0409022010f
2026-01-15 21:14:34 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 44c81e8b-d6bb-4d32-9228-a0409022010f | New balance: 10000
2026-01-15 21:14:36 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 195faf09-9a3c-47c6-98ea-c007b446953d
2026-01-15 21:14:37 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 195faf09-9a3c-47c6-98ea-c007b446953d | New balance: 10000
2026-01-15 21:14:40 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User f728f0ff-b403-44eb-bc9f-6ea31b563a47 balance reset to 10000 V-USDT (free)
2026-01-15 21:14:43 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 52c75c23-6457-4a8a-aa4f-b4f51d376552 balance reset to 10000 V-USDT (free)
2026-01-15 21:14:59 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User d76424fe-3aeb-4113-8ab8-61588fd42f79 balance reset to 10000 V-USDT (free)
2026-01-15 21:15:52 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for newuser@example.com
2026-01-15 21:15:53 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: c4b60966-a9e8-48a8-90dd-4aa2fe084a83
2026-01-15 21:15:53 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 5e19d692-bd98-4aab-8760-b1fb282fcb7d
2026-01-15 21:15:53 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user c4b60966-a9e8-48a8-90dd-4aa2fe084a83
2026-01-15 21:15:53 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user c4b60966-a9e8-48a8-90dd-4aa2fe084a83 | New balance: 10000
2026-01-15 21:15:53 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:18:22 - application.services.account_service - WARNING - [account_service.py:252] - User 08bfcbda-1b96-4d73-8b2a-5ab4cfa20988 not found
2026-01-15 21:19:31 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for newuser@example.com
2026-01-15 21:19:31 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: b8a122cf-e17b-44ee-8ff8-a062c7f2bab5
2026-01-15 21:19:31 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: cc98e1ac-8430-40e4-aab7-dae8f104337c
2026-01-15 21:19:31 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user b8a122cf-e17b-44ee-8ff8-a062c7f2bab5
2026-01-15 21:19:32 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user b8a122cf-e17b-44ee-8ff8-a062c7f2bab5 | New balance: 10000
2026-01-15 21:19:32 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:19:34 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for testuser@example.com
2026-01-15 21:19:37 - application.services.registration_service - INFO - [registration_service.py:93] - [PLUS REGISTRATION] Starting for plusnew@example.com
2026-01-15 21:19:37 - application.services.registration_service - INFO - [registration_service.py:96] - [PLUS REGISTRATION] User created | ID: 57fd1bf9-c663-49dc-b044-c9a0872787b8
2026-01-15 21:19:37 - application.services.registration_service - INFO - [registration_service.py:119] - [PLUS REGISTRATION] Wallets created | Demo: 808f3d25-abee-4972-a907-5696429bec46 | Live: 4a3cbd35-d48b-4b6e-b94f-073edd4a1db6
2026-01-15 21:19:37 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 57fd1bf9-c663-49dc-b044-c9a0872787b8
2026-01-15 21:19:37 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 57fd1bf9-c663-49dc-b044-c9a0872787b8 | New balance: 10000
2026-01-15 21:19:40 - application.services.registration_service - INFO - [registration_service.py:130] - [BUSINESS REGISTRATION] Starting for business@example.com
2026-01-15 21:19:40 - application.services.registration_service - INFO - [registration_service.py:133] - [BUSINESS REGISTRATION] User created | ID: ee9386a0-8257-45df-8b93-a4ddae0816e7
2026-01-15 21:19:40 - application.services.registration_service - INFO - [registration_service.py:156] - [BUSINESS REGISTRATION] Wallets created | Demo: af024338-d12a-4b3e-b21b-7847673073f8 | Live: c07440f2-cb17-4be7-8b47-c381739e857c
2026-01-15 21:19:40 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user ee9386a0-8257-45df-8b93-a4ddae0816e7
2026-01-15 21:19:40 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user ee9386a0-8257-45df-8b93-a4ddae0816e7 | New balance: 10000
2026-01-15 21:19:42 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem@example.com
2026-01-15 21:19:43 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 21cd1f96-7d90-48c2-aa09-3f8c29f8ae9c
2026-01-15 21:19:43 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 2d55ac7e-dfa4-4458-997d-c46ad35b5ec1
2026-01-15 21:19:43 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 21cd1f96-7d90-48c2-aa09-3f8c29f8ae9c
2026-01-15 21:19:43 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:20:03 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user f219fc0f-5aca-497d-a349-911b34f02aa7 from free to PLUS
2026-01-15 21:20:03 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user f219fc0f-5aca-497d-a349-911b34f02aa7
2026-01-15 21:20:03 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user f219fc0f-5aca-497d-a349-911b34f02aa7
2026-01-15 21:20:03 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user f219fc0f-5aca-497d-a349-911b34f02aa7 | New balance: 10000
2026-01-15 21:20:03 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:20:03 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User f219fc0f-5aca-497d-a349-911b34f02aa7 upgraded to PLUS tier
2026-01-15 21:20:06 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user 175b5549-f19d-485e-970d-8e66aa109632 from plus to BUSINESS
2026-01-15 21:20:06 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user 175b5549-f19d-485e-970d-8e66aa109632
2026-01-15 21:20:06 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 175b5549-f19d-485e-970d-8e66aa109632
2026-01-15 21:20:06 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 175b5549-f19d-485e-970d-8e66aa109632 | New balance: 10000
2026-01-15 21:20:06 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:20:06 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User 175b5549-f19d-485e-970d-8e66aa109632 upgraded to BUSINESS tier
2026-01-15 21:20:18 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User 8e6f686b-a386-4e5c-9c9c-d1c7e6bfbfff downgraded to FREE tier
2026-01-15 21:20:25 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 6659c4a0-75ab-41db-b806-5933fd2629d9
2026-01-15 21:20:25 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 6659c4a0-75ab-41db-b806-5933fd2629d9 | New balance: 10000
2026-01-15 21:20:25 - application.services.registration_service - INFO - [registration_service.py:381] - [DEMO WALLET] Created demo wallet 985526f3-016d-4c3a-9c44-f1e4c71b9356 for user 6659c4a0-75ab-41db-b806-5933fd2629d9 with 10000 V-USD
2026-01-15 21:20:29 - application.services.registration_service - INFO - [registration_service.py:365] - [DEMO WALLET] User 08cfc7a0-ccb7-41aa-a95e-0d4505e8bd22 already has demo wallet c8caaf42-69ef-4e91-b9ea-cd1b55185437
2026-01-15 21:20:34 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: new21c630@example.com | Country: NG | IP: 127.0.0.1
2026-01-15 21:20:34 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for new21c630@example.com
2026-01-15 21:20:34 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: e07ecf17-72c1-4658-9b64-6c3bc4037dde
2026-01-15 21:20:34 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 0e82529a-6617-4399-966b-049987b24e2d
2026-01-15 21:20:34 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user e07ecf17-72c1-4658-9b64-6c3bc4037dde
2026-01-15 21:20:34 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user e07ecf17-72c1-4658-9b64-6c3bc4037dde | New balance: 10000
2026-01-15 21:20:34 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:20:34 - application.routers.auth - INFO - [auth.py:50] - [REGISTRATION SUCCESS] Free tier user created | ID: e07ecf17-72c1-4658-9b64-6c3bc4037dde | Email: new21c630@example.com | 10k V-USDT issued | IP: 127.0.0.1
2026-01-15 21:20:37 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: testuser@example.com | Country: NG | IP: 127.0.0.1
2026-01-15 21:20:37 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for testuser@example.com
2026-01-15 21:20:37 - application.routers.auth - WARNING - [auth.py:57] - [REGISTRATION BLOCKED] Email already registered: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:20:46 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:20:46 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:20:47 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 934e2af9-4e8c-4a93-ba8e-9e870d6382be (testuser@example.com) logged in successfully
2026-01-15 21:20:47 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 934e2af9-4e8c-4a93-ba8e-9e870d6382be | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:20:50 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:20:50 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:20:50 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 8b8d2814-06eb-4f23-b1c2-288d1678f157 (testuser@example.com) - possible brute force attempt
2026-01-15 21:20:50 - application.routers.auth - WARNING - [auth.py:197] - [LOGIN FAILED] Wrong password | Email: testuser@example.com | IP: 127.0.0.1 - Possible brute force
2026-01-15 21:20:52 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: nonexistent@example.com | IP: 127.0.0.1
2026-01-15 21:20:52 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: nonexistent@example.com
2026-01-15 21:20:52 - application.services.auth_service - WARNING - [auth_service.py:29] - [AUTH FAILED] Login attempt for non-existent account: nonexistent@example.com
2026-01-15 21:20:52 - application.routers.auth - WARNING - [auth.py:194] - [LOGIN FAILED] User not found | Email: nonexistent@example.com | IP: 127.0.0.1
2026-01-15 21:21:56 - application.services.account_service - WARNING - [account_service.py:252] - User 4c702dcd-1ad6-45cd-bd01-f4ea0bd4e85b not found
2026-01-15 21:22:44 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 727b43e1-4fe0-4f25-9127-875c4101e932
2026-01-15 21:22:44 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 727b43e1-4fe0-4f25-9127-875c4101e932 | New balance: 10000
2026-01-15 21:22:47 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 50000 V-USDT to user b552bc77-7a90-4923-9619-d46d467002fa
2026-01-15 21:22:47 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 50000 V-USDT issued to user b552bc77-7a90-4923-9619-d46d467002fa | New balance: 50000
2026-01-15 21:22:50 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 034f85ff-671c-4882-8f66-1633c6c0e776
2026-01-15 21:22:53 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user e8686361-7224-4825-8685-e09a14e26767
2026-01-15 21:22:53 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:22:56 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User e13d7398-005c-4b11-a6c3-7a0173690254 balance reset to 10000 V-USDT (free)
2026-01-15 21:23:03 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 0e8720f9-723e-4c9d-a071-379a01336773 balance reset to 10000 V-USDT (paid)
2026-01-15 21:23:06 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 5fa8a1d8-fa02-4734-8ce0-7f030cd4d5a2 balance reset to 10000 V-USDT (free)
2026-01-15 21:23:24 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 37b01245-070d-4601-a0ea-76090140a17c
2026-01-15 21:23:26 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 34939498-4016-4067-ae8e-76412eeb6422
2026-01-15 21:23:29 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 0e9d44eb-e95b-465a-8857-d658919bc6d9
2026-01-15 21:23:29 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 0e9d44eb-e95b-465a-8857-d658919bc6d9 | New balance: 10000
2026-01-15 21:23:32 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 1ce30744-8ed8-4530-b488-f362ce739bcd
2026-01-15 21:23:32 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 1ce30744-8ed8-4530-b488-f362ce739bcd | New balance: 10000
2026-01-15 21:23:35 - application.services.registration_service - INFO - [registration_service.py:181] - [WALLET ACTIVATED] Live wallet b1fe5688-fcc3-4e71-b791-3d869ee44d2a activated for user 74fc0f1a-1f10-4c72-9a72-e5ec136993ea
2026-01-15 21:23:41 - application.services.registration_service - INFO - [registration_service.py:181] - [WALLET ACTIVATED] Live wallet f2bd9a59-a74e-477b-b9e8-4570edd2c40f activated for user b67cc34e-ce60-443e-b5a3-3bba7933dcc5
2026-01-15 21:23:44 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 15945203-337d-4bc1-8c34-7a2fc527f6c4
2026-01-15 21:23:44 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 15945203-337d-4bc1-8c34-7a2fc527f6c4 | New balance: 10000
2026-01-15 21:23:48 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 6935de7e-888b-42e1-9773-9f90a52fdaca
2026-01-15 21:23:48 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 6935de7e-888b-42e1-9773-9f90a52fdaca | New balance: 10000
2026-01-15 21:23:52 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 67a00fc7-b284-4bc2-b4a3-87346b30520b balance reset to 10000 V-USDT (free)
2026-01-15 21:23:55 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User d7607e93-03d3-4327-8b41-1ed2283ce854 balance reset to 10000 V-USDT (free)
2026-01-15 21:24:10 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User d6012213-fc1a-4795-affb-cb750e83edea balance reset to 10000 V-USDT (free)
2026-01-15 21:26:11 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for newuser@example.com
2026-01-15 21:26:12 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 47262b18-ec08-4aff-b451-e569d7168c03
2026-01-15 21:26:12 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 4a6e3e76-89a8-4b52-a6b2-db7e08966fa1
2026-01-15 21:26:12 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 47262b18-ec08-4aff-b451-e569d7168c03
2026-01-15 21:26:12 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 47262b18-ec08-4aff-b451-e569d7168c03 | New balance: 10000
2026-01-15 21:26:12 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:26:15 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for testuser@example.com
2026-01-15 21:26:17 - application.services.registration_service - INFO - [registration_service.py:93] - [PLUS REGISTRATION] Starting for plusnew@example.com
2026-01-15 21:26:17 - application.services.registration_service - INFO - [registration_service.py:96] - [PLUS REGISTRATION] User created | ID: 6e3a855a-4828-484a-8c48-9504b8e48ff8
2026-01-15 21:26:17 - application.services.registration_service - INFO - [registration_service.py:119] - [PLUS REGISTRATION] Wallets created | Demo: 73032c1b-1676-4417-81d0-38870c7b0dfe | Live: 8f6c107f-67ed-42a2-8d19-e2caa700c253
2026-01-15 21:26:17 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 6e3a855a-4828-484a-8c48-9504b8e48ff8
2026-01-15 21:26:17 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 6e3a855a-4828-484a-8c48-9504b8e48ff8 | New balance: 10000
2026-01-15 21:26:20 - application.services.registration_service - INFO - [registration_service.py:130] - [BUSINESS REGISTRATION] Starting for business@example.com
2026-01-15 21:26:21 - application.services.registration_service - INFO - [registration_service.py:133] - [BUSINESS REGISTRATION] User created | ID: 386e58ca-b573-4208-8b15-fb30e620234d
2026-01-15 21:26:21 - application.services.registration_service - INFO - [registration_service.py:156] - [BUSINESS REGISTRATION] Wallets created | Demo: 8d87c4ca-65c8-4c77-9481-bc20926f838c | Live: 7869c550-e22a-4309-9d8e-4d203b14b41d
2026-01-15 21:26:21 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 386e58ca-b573-4208-8b15-fb30e620234d
2026-01-15 21:26:21 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 386e58ca-b573-4208-8b15-fb30e620234d | New balance: 10000
2026-01-15 21:26:24 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem@example.com
2026-01-15 21:26:24 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 08c98bdd-0514-4417-82e6-fee0cd5434f8
2026-01-15 21:26:24 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 30c7ae05-0f60-41e5-bbde-18c05f876d84
2026-01-15 21:26:24 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 08c98bdd-0514-4417-82e6-fee0cd5434f8
2026-01-15 21:26:24 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:26:44 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 345556ce-0218-462a-8571-c946ce336a08 from free to PLUS
2026-01-15 21:26:44 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 345556ce-0218-462a-8571-c946ce336a08
2026-01-15 21:26:44 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 345556ce-0218-462a-8571-c946ce336a08
2026-01-15 21:26:44 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 345556ce-0218-462a-8571-c946ce336a08 | New balance: 10000
2026-01-15 21:26:44 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:26:44 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 345556ce-0218-462a-8571-c946ce336a08 upgraded to PLUS tier
2026-01-15 21:26:47 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user 47d002fc-3098-4f3b-a143-239eb95bd85e from plus to BUSINESS
2026-01-15 21:26:47 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user 47d002fc-3098-4f3b-a143-239eb95bd85e
2026-01-15 21:26:47 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 47d002fc-3098-4f3b-a143-239eb95bd85e
2026-01-15 21:26:47 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 47d002fc-3098-4f3b-a143-239eb95bd85e | New balance: 10000
2026-01-15 21:26:47 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:26:47 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User 47d002fc-3098-4f3b-a143-239eb95bd85e upgraded to BUSINESS tier
2026-01-15 21:26:59 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User c093c1ee-0be3-4023-8895-bdd72ab2d509 downgraded to FREE tier
2026-01-15 21:27:04 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 544998e6-7334-48bf-91b4-0beb47d4b570
2026-01-15 21:27:04 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 544998e6-7334-48bf-91b4-0beb47d4b570 | New balance: 10000
2026-01-15 21:27:04 - application.services.registration_service - INFO - [registration_service.py:381] - [DEMO WALLET] Created demo wallet 3c1f1355-6197-48e2-b08f-bc9e65f37949 for user 544998e6-7334-48bf-91b4-0beb47d4b570 with 10000 V-USD
2026-01-15 21:27:07 - application.services.registration_service - INFO - [registration_service.py:365] - [DEMO WALLET] User 526846c0-f941-4794-a0af-dc3601f8be78 already has demo wallet af7d23b0-3924-4de6-9694-756b1cb20177
2026-01-15 21:27:13 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: new76344a@example.com | Country: NG | IP: 127.0.0.1
2026-01-15 21:27:13 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for new76344a@example.com
2026-01-15 21:27:14 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: d44f31cb-5136-4e33-b274-27f1be85b5aa
2026-01-15 21:27:14 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: c108932f-2e22-4bd7-9327-6b5cd2a1c4c2
2026-01-15 21:27:14 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user d44f31cb-5136-4e33-b274-27f1be85b5aa
2026-01-15 21:27:14 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user d44f31cb-5136-4e33-b274-27f1be85b5aa | New balance: 10000
2026-01-15 21:27:14 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:27:14 - application.routers.auth - INFO - [auth.py:50] - [REGISTRATION SUCCESS] Free tier user created | ID: d44f31cb-5136-4e33-b274-27f1be85b5aa | Email: new76344a@example.com | 10k V-USDT issued | IP: 127.0.0.1
2026-01-15 21:27:17 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: testuser@example.com | Country: NG | IP: 127.0.0.1
2026-01-15 21:27:17 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for testuser@example.com
2026-01-15 21:27:17 - application.routers.auth - WARNING - [auth.py:57] - [REGISTRATION BLOCKED] Email already registered: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:27:29 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:27:29 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:27:30 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User e71f3837-017a-421c-b6a4-51bd82b5c27a (testuser@example.com) logged in successfully
2026-01-15 21:27:30 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: e71f3837-017a-421c-b6a4-51bd82b5c27a | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:27:33 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:27:33 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:27:33 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 8b72bcd3-9637-491c-8c19-48ae2d6d8738 (testuser@example.com) - possible brute force attempt
2026-01-15 21:27:33 - application.routers.auth - WARNING - [auth.py:197] - [LOGIN FAILED] Wrong password | Email: testuser@example.com | IP: 127.0.0.1 - Possible brute force
2026-01-15 21:27:35 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: nonexistent@example.com | IP: 127.0.0.1
2026-01-15 21:27:35 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: nonexistent@example.com
2026-01-15 21:27:36 - application.services.auth_service - WARNING - [auth_service.py:29] - [AUTH FAILED] Login attempt for non-existent account: nonexistent@example.com
2026-01-15 21:27:36 - application.routers.auth - WARNING - [auth.py:194] - [LOGIN FAILED] User not found | Email: nonexistent@example.com | IP: 127.0.0.1
2026-01-15 21:27:42 - application.routers.users - INFO - [users.py:28] - User 20558d93-8861-4931-b9c2-c24caf462bdc requesting basic profile from 127.0.0.1
2026-01-15 21:27:48 - application.routers.users - INFO - [users.py:146] - User 45fdcb28-d2b0-4c45-9509-fe61548da9cc updating profile from 127.0.0.1
2026-01-15 21:27:48 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/routers/users.py", line 151, in update_current_user
    trader_profile_id = current_user.trader_profile.id if hasattr(current_user, 'trader_profile') and current_user.trader_profile else None
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 178, in update_current_user
    logger.error(f"Unexpected error updating user {current_user.id} from {ip_address}: {e}", exc_info=True)
                                                   ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:27:56 - application.routers.users - INFO - [users.py:146] - User 7fe34a7c-f998-4eff-8d79-4986f1a78f9d updating profile from 127.0.0.1
2026-01-15 21:27:56 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/routers/users.py", line 151, in update_current_user
    trader_profile_id = current_user.trader_profile.id if hasattr(current_user, 'trader_profile') and current_user.trader_profile else None
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 178, in update_current_user
    logger.error(f"Unexpected error updating user {current_user.id} from {ip_address}: {e}", exc_info=True)
                                                   ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:28:03 - application.routers.users - INFO - [users.py:324] - [TIER UPGRADE] Plus upgrade request | User: b95de43c-4fa4-4042-a039-36df3fd09b9b | IP: 127.0.0.1
2026-01-15 21:28:03 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user b95de43c-4fa4-4042-a039-36df3fd09b9b from free to PLUS
2026-01-15 21:28:03 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user b95de43c-4fa4-4042-a039-36df3fd09b9b
2026-01-15 21:28:03 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user b95de43c-4fa4-4042-a039-36df3fd09b9b
2026-01-15 21:28:03 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user b95de43c-4fa4-4042-a039-36df3fd09b9b | New balance: 10000
2026-01-15 21:28:03 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:28:03 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User b95de43c-4fa4-4042-a039-36df3fd09b9b upgraded to PLUS tier
2026-01-15 21:28:04 - application.routers.users - INFO - [users.py:342] - [TIER UPGRADE SUCCESS] User b95de43c-4fa4-4042-a039-36df3fd09b9b upgraded to Plus | IP: 127.0.0.1
2026-01-15 21:28:10 - application.routers.users - INFO - [users.py:363] - [TIER UPGRADE] Business upgrade request | User: 04ddddb8-fa75-42aa-8175-6402b14892b3 | IP: 127.0.0.1
2026-01-15 21:28:10 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user 04ddddb8-fa75-42aa-8175-6402b14892b3 from free to BUSINESS
2026-01-15 21:28:10 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user 04ddddb8-fa75-42aa-8175-6402b14892b3
2026-01-15 21:28:10 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 04ddddb8-fa75-42aa-8175-6402b14892b3
2026-01-15 21:28:10 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 04ddddb8-fa75-42aa-8175-6402b14892b3 | New balance: 10000
2026-01-15 21:28:10 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:28:10 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User 04ddddb8-fa75-42aa-8175-6402b14892b3 upgraded to BUSINESS tier
2026-01-15 21:28:10 - application.routers.users - INFO - [users.py:381] - [TIER UPGRADE SUCCESS] User 04ddddb8-fa75-42aa-8175-6402b14892b3 upgraded to Business | IP: 127.0.0.1
2026-01-15 21:28:21 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:47] - [VIRTUAL RESET] Free reset request from user 75335f10-bd74-4ac2-b21d-17932756adb8 | IP: 127.0.0.1
2026-01-15 21:28:21 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 75335f10-bd74-4ac2-b21d-17932756adb8 balance reset to 10000 V-USDT (free)
2026-01-15 21:28:21 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:66] - [VIRTUAL RESET] Free reset completed for user 75335f10-bd74-4ac2-b21d-17932756adb8
2026-01-15 21:28:25 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:88] - [VIRTUAL RESET] Paid reset request from user 3dd69c80-51de-4c36-a549-cebb16b78ca3 | IP: 127.0.0.1
2026-01-15 21:28:25 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 3dd69c80-51de-4c36-a549-cebb16b78ca3 balance reset to 10000 V-USDT (paid)
2026-01-15 21:28:25 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:110] - [VIRTUAL RESET] Paid reset completed for user 3dd69c80-51de-4c36-a549-cebb16b78ca3
2026-01-15 21:28:29 - application.routers.users - INFO - [users.py:190] - Password change request for user 634281ea-13bf-45a2-97b8-1d23eb42ea03 from 127.0.0.1
2026-01-15 21:28:30 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/routers/users.py", line 201, in change_password
    trader_profile_id = current_user.trader_profile.id if hasattr(current_user, 'trader_profile') and current_user.trader_profile else None
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 230, in change_password
    logger.error(f"Unexpected error changing password for user {current_user.id} from {ip_address}: {e}", exc_info=True)
                                                                ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:28:36 - application.routers.users - INFO - [users.py:190] - Password change request for user 37678bc2-b5ad-4c3c-a023-9c16b1842f54 from 127.0.0.1
2026-01-15 21:28:36 - application.routers.users - WARNING - [users.py:219] - Invalid old password provided for user 37678bc2-b5ad-4c3c-a023-9c16b1842f54 from 127.0.0.1
2026-01-15 21:28:39 - application.routers.users - INFO - [users.py:190] - Password change request for user 66a0187e-12ad-49eb-8074-4ad502914d12 from 127.0.0.1
2026-01-15 21:28:40 - application.routers.users - WARNING - [users.py:222] - New password mismatch for user 66a0187e-12ad-49eb-8074-4ad502914d12 from 127.0.0.1
2026-01-15 21:28:43 - application.routers.users - INFO - [users.py:241] - User 5a4451d0-2053-4cb2-af8a-a1bbaec8fa03 (testuser@example.com) requesting account deletion from 127.0.0.1
2026-01-15 21:28:43 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/routers/users.py", line 244, in delete_current_user
    trader_profile_id = current_user.trader_profile.id if hasattr(current_user, 'trader_profile') and current_user.trader_profile else None
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 271, in delete_current_user
    logger.error(f"Unexpected error deleting user {current_user.id} from {ip_address}: {e}", exc_info=True)
                                                   ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:29:00 - application.services.account_service - WARNING - [account_service.py:252] - User c162db85-4e9b-4dc8-b394-0110bf52cd48 not found
2026-01-15 21:29:50 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 7dcb75e5-6e2d-4d17-b725-95d30fa2891c
2026-01-15 21:29:51 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 7dcb75e5-6e2d-4d17-b725-95d30fa2891c | New balance: 10000
2026-01-15 21:29:54 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 50000 V-USDT to user 1d8f8dae-36c2-4290-967a-18118df5e85a
2026-01-15 21:29:54 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 50000 V-USDT issued to user 1d8f8dae-36c2-4290-967a-18118df5e85a | New balance: 50000
2026-01-15 21:29:57 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user ae4582b9-a861-4c94-ace1-8159afacec37
2026-01-15 21:30:01 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 8f125243-47f2-4c11-a363-7f4c43e56d9e
2026-01-15 21:30:01 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:30:04 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User e086b569-85d2-4cda-9453-93fefb77a85e balance reset to 10000 V-USDT (free)
2026-01-15 21:30:11 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 3c779c6e-bc5c-4088-b2c5-df2b8bddc727 balance reset to 10000 V-USDT (paid)
2026-01-15 21:30:15 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 296d0034-7f85-4256-8cae-4b21632eb02f balance reset to 10000 V-USDT (free)
2026-01-15 21:30:37 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 46bb5521-b709-405f-b4e4-8d516037c3df
2026-01-15 21:30:40 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user faed9f20-aeff-4de2-a05f-ce28c1cc504d
2026-01-15 21:30:43 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 213a4422-1673-4dfe-bc04-506fc974767a
2026-01-15 21:30:43 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 213a4422-1673-4dfe-bc04-506fc974767a | New balance: 10000
2026-01-15 21:30:47 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 3291c26e-d856-4a46-870d-f07bb6418487
2026-01-15 21:30:47 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 3291c26e-d856-4a46-870d-f07bb6418487 | New balance: 10000
2026-01-15 21:30:51 - application.services.registration_service - INFO - [registration_service.py:181] - [WALLET ACTIVATED] Live wallet 387b96e1-a169-4f91-aee3-d2ea4b02a2e9 activated for user 87f73ec0-228d-4bd8-9b88-6b8dcb6b0156
2026-01-15 21:30:57 - application.services.registration_service - INFO - [registration_service.py:181] - [WALLET ACTIVATED] Live wallet 8e11c416-647a-4746-a658-f5a351ff28be activated for user 0fa311d8-7f48-45d9-8287-0e88c2bae982
2026-01-15 21:31:00 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 5f4950ae-9c9e-4ad6-b145-27e54d8ec63f
2026-01-15 21:31:01 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 5f4950ae-9c9e-4ad6-b145-27e54d8ec63f | New balance: 10000
2026-01-15 21:31:04 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 3aa6e7b7-8aad-4ca1-a2c4-bceadbb1b439
2026-01-15 21:31:04 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 3aa6e7b7-8aad-4ca1-a2c4-bceadbb1b439 | New balance: 10000
2026-01-15 21:31:08 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 4aacdbc9-4fbd-4c53-b336-07da5c18c52c balance reset to 10000 V-USDT (free)
2026-01-15 21:31:13 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 37b4d0b3-a541-4c48-a585-ebc3031cfe56 balance reset to 10000 V-USDT (free)
2026-01-15 21:31:33 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User c8f95a85-5261-4329-8eed-d1f501161535 balance reset to 10000 V-USDT (free)
2026-01-15 21:32:10 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 21:32:10 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-15 21:32:11 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) - possible brute force attempt
2026-01-15 21:32:11 - application.routers.auth - WARNING - [auth.py:197] - [LOGIN FAILED] Wrong password | Email: divineuzo7@gmail.com | IP: 172.18.0.1 - Possible brute force
2026-01-15 21:32:20 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 21:32:20 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-15 21:32:21 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-15 21:32:21 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-15 21:32:51 - application.routers.users - INFO - [users.py:39] - [USER] Full profile requested | User: 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) | IP: 172.18.0.1
2026-01-15 21:32:51 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-15 21:32:51 - application.routers.users - INFO - [users.py:55] - [USER] Full profile returned | User: 33003f09-a262-4bd2-9d9a-08112383319f | Balance: None None | KYC: False | Trader: False | IP: 172.18.0.1
2026-01-15 21:32:51 - application.main - ERROR - [main.py:54] - Unhandled exception: 1 validation error for UserFullResponse
tier
  Field required [type=missing, input_value={'id': UUID('33003f09-a26..., 'wallet_active': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 60, in get_current_user_full_info
    return account_schema.UserFullResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserFullResponse
tier
  Field required [type=missing, input_value={'id': UUID('33003f09-a26..., 'wallet_active': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2026-01-15 21:38:28 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for lifecycle4e3622@example.com
2026-01-15 21:38:29 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 86559f21-1302-47a8-bf80-f16ee94e9a13
2026-01-15 21:38:29 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 0cdf7097-a32e-4279-a5b8-113b6b950db6
2026-01-15 21:38:29 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 86559f21-1302-47a8-bf80-f16ee94e9a13
2026-01-15 21:38:29 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 86559f21-1302-47a8-bf80-f16ee94e9a13 | New balance: 10000
2026-01-15 21:38:29 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:38:29 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 86559f21-1302-47a8-bf80-f16ee94e9a13 from free to PLUS
2026-01-15 21:38:29 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 86559f21-1302-47a8-bf80-f16ee94e9a13
2026-01-15 21:38:29 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 86559f21-1302-47a8-bf80-f16ee94e9a13 upgraded to PLUS tier
2026-01-15 21:38:33 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 9be0234c-665c-432d-8efb-2a101e16d4ee balance reset to 10000 V-USDT (free)
2026-01-15 21:38:36 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user ec309e41-bddc-4700-82e0-c20d6ff295dc from free to PLUS
2026-01-15 21:38:36 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user ec309e41-bddc-4700-82e0-c20d6ff295dc
2026-01-15 21:38:36 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user ec309e41-bddc-4700-82e0-c20d6ff295dc
2026-01-15 21:38:36 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user ec309e41-bddc-4700-82e0-c20d6ff295dc | New balance: 10000
2026-01-15 21:38:36 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:38:36 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User ec309e41-bddc-4700-82e0-c20d6ff295dc upgraded to PLUS tier
2026-01-15 21:38:36 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user ec309e41-bddc-4700-82e0-c20d6ff295dc from plus to BUSINESS
2026-01-15 21:38:36 - application.services.registration_service - INFO - [registration_service.py:305] - [TIER UPGRADE] Reusing existing live wallet 5d26f642-7875-42cc-9a6c-52cfa11f2cca
2026-01-15 21:38:36 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User ec309e41-bddc-4700-82e0-c20d6ff295dc upgraded to BUSINESS tier
2026-01-15 21:38:36 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User ec309e41-bddc-4700-82e0-c20d6ff295dc downgraded to FREE tier
2026-01-15 21:38:40 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user d1cc7db8-15fb-4e6a-9832-21b97032c24c from free to BUSINESS
2026-01-15 21:38:40 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user d1cc7db8-15fb-4e6a-9832-21b97032c24c
2026-01-15 21:38:40 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user d1cc7db8-15fb-4e6a-9832-21b97032c24c
2026-01-15 21:38:40 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user d1cc7db8-15fb-4e6a-9832-21b97032c24c | New balance: 10000
2026-01-15 21:38:40 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:38:40 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User d1cc7db8-15fb-4e6a-9832-21b97032c24c upgraded to BUSINESS tier
2026-01-15 21:38:43 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for authflow10fe83@example.com
2026-01-15 21:38:43 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: ad9b3280-2fb2-4ecf-af8c-abe6e88841f8
2026-01-15 21:38:43 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: f7a2b4d5-17eb-47c8-8327-d9e422e0f5e0
2026-01-15 21:38:43 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user ad9b3280-2fb2-4ecf-af8c-abe6e88841f8
2026-01-15 21:38:43 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user ad9b3280-2fb2-4ecf-af8c-abe6e88841f8 | New balance: 10000
2026-01-15 21:38:43 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:38:51 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for delete2e9285@example.com
2026-01-15 21:38:52 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 1b8e152d-d877-4f5d-a418-e93ca8c826cc
2026-01-15 21:38:52 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 999546c3-c079-40d8-9092-eb9908e8f8a3
2026-01-15 21:38:52 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 1b8e152d-d877-4f5d-a418-e93ca8c826cc
2026-01-15 21:38:52 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 1b8e152d-d877-4f5d-a418-e93ca8c826cc | New balance: 10000
2026-01-15 21:38:52 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:38:55 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user cff85590-82ee-4586-86f0-b22861cb947a
2026-01-15 21:38:55 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user cff85590-82ee-4586-86f0-b22861cb947a | New balance: 10000
2026-01-15 21:38:58 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for uniquefb3635@example.com
2026-01-15 21:38:58 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 346cf0d5-e8ad-41b4-baa0-687595c9513f
2026-01-15 21:38:58 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 993e1ec4-c79a-4eb6-a805-d4cec3612c04
2026-01-15 21:38:58 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 346cf0d5-e8ad-41b4-baa0-687595c9513f
2026-01-15 21:38:58 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 346cf0d5-e8ad-41b4-baa0-687595c9513f | New balance: 10000
2026-01-15 21:38:58 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:38:58 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for uniquefb3635@example.com
2026-01-15 21:39:00 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem0a73c7@example.com
2026-01-15 21:39:01 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: f6ebeaaf-727f-47b1-b1d8-3f35a02f9346
2026-01-15 21:39:01 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: af307916-37f6-49a9-a21a-603403e13f42
2026-01-15 21:39:01 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user f6ebeaaf-727f-47b1-b1d8-3f35a02f9346
2026-01-15 21:39:01 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:39:56 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User c948d2d9-b7ec-4309-92d8-53bbaacbc9ea balance reset to 10000 V-USDT (free)
2026-01-15 21:41:21 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for lifecyclea71099@example.com
2026-01-15 21:41:23 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 6d2054ba-1b8a-4e39-a7e0-58855f620a0d
2026-01-15 21:41:23 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: e86f2f74-e565-4fd7-812a-68f6f0576866
2026-01-15 21:41:23 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 6d2054ba-1b8a-4e39-a7e0-58855f620a0d
2026-01-15 21:41:23 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 6d2054ba-1b8a-4e39-a7e0-58855f620a0d | New balance: 10000
2026-01-15 21:41:23 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:41:23 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 6d2054ba-1b8a-4e39-a7e0-58855f620a0d from free to PLUS
2026-01-15 21:41:23 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 6d2054ba-1b8a-4e39-a7e0-58855f620a0d
2026-01-15 21:41:23 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 6d2054ba-1b8a-4e39-a7e0-58855f620a0d upgraded to PLUS tier
2026-01-15 21:41:29 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User a3b882cb-cb41-42bf-8618-6bbe77198d20 balance reset to 10000 V-USDT (free)
2026-01-15 21:41:30 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User a3b882cb-cb41-42bf-8618-6bbe77198d20 balance reset to 10000 V-USDT (paid)
2026-01-15 21:41:35 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 3cdf1466-32b7-4a54-b67e-df6e8095afef from free to PLUS
2026-01-15 21:41:35 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 3cdf1466-32b7-4a54-b67e-df6e8095afef
2026-01-15 21:41:35 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 3cdf1466-32b7-4a54-b67e-df6e8095afef
2026-01-15 21:41:36 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 3cdf1466-32b7-4a54-b67e-df6e8095afef | New balance: 10000
2026-01-15 21:41:36 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:41:36 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 3cdf1466-32b7-4a54-b67e-df6e8095afef upgraded to PLUS tier
2026-01-15 21:41:36 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user 3cdf1466-32b7-4a54-b67e-df6e8095afef from plus to BUSINESS
2026-01-15 21:41:36 - application.services.registration_service - INFO - [registration_service.py:305] - [TIER UPGRADE] Reusing existing live wallet bcdb0158-a29b-46c8-938a-0b062411551c
2026-01-15 21:41:36 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User 3cdf1466-32b7-4a54-b67e-df6e8095afef upgraded to BUSINESS tier
2026-01-15 21:41:36 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User 3cdf1466-32b7-4a54-b67e-df6e8095afef downgraded to FREE tier
2026-01-15 21:41:42 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user e43f290b-f409-490a-bad7-b7ae72ca90f5 from free to BUSINESS
2026-01-15 21:41:42 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user e43f290b-f409-490a-bad7-b7ae72ca90f5
2026-01-15 21:41:42 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user e43f290b-f409-490a-bad7-b7ae72ca90f5
2026-01-15 21:41:42 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user e43f290b-f409-490a-bad7-b7ae72ca90f5 | New balance: 10000
2026-01-15 21:41:42 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:41:42 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User e43f290b-f409-490a-bad7-b7ae72ca90f5 upgraded to BUSINESS tier
2026-01-15 21:41:47 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for authflowcd4c7b@example.com
2026-01-15 21:41:47 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: e463d414-cf4e-4e33-8a4b-057a1938bc8f
2026-01-15 21:41:47 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: cfa7eb7f-d726-4cea-8290-32b3c2a09182
2026-01-15 21:41:47 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user e463d414-cf4e-4e33-8a4b-057a1938bc8f
2026-01-15 21:41:48 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user e463d414-cf4e-4e33-8a4b-057a1938bc8f | New balance: 10000
2026-01-15 21:41:48 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:41:58 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for delete0b5afc@example.com
2026-01-15 21:41:58 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 7977506f-3f40-44d5-926b-024656380737
2026-01-15 21:41:58 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 1a8fad12-9b6a-4539-9395-6af079f91832
2026-01-15 21:41:58 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 7977506f-3f40-44d5-926b-024656380737
2026-01-15 21:41:58 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 7977506f-3f40-44d5-926b-024656380737 | New balance: 10000
2026-01-15 21:41:58 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:42:02 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user e379532a-ae0a-41b9-8a53-85a4b5c26254
2026-01-15 21:42:02 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user e379532a-ae0a-41b9-8a53-85a4b5c26254 | New balance: 10000
2026-01-15 21:42:04 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for uniquea58547@example.com
2026-01-15 21:42:05 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 59dbd044-b08d-4b7c-9ded-bed17e56f2e4
2026-01-15 21:42:05 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: dc3f65d2-feb1-49e3-97de-681aa2a70e05
2026-01-15 21:42:05 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 59dbd044-b08d-4b7c-9ded-bed17e56f2e4
2026-01-15 21:42:05 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 59dbd044-b08d-4b7c-9ded-bed17e56f2e4 | New balance: 10000
2026-01-15 21:42:05 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:42:05 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for uniquea58547@example.com
2026-01-15 21:42:07 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem769f32@example.com
2026-01-15 21:42:07 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: fab380eb-6518-47bf-a0c2-27f1bf7b784e
2026-01-15 21:42:07 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 1dcae0f5-6594-4ef7-9498-77024ae159d7
2026-01-15 21:42:07 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user fab380eb-6518-47bf-a0c2-27f1bf7b784e
2026-01-15 21:42:08 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:43:33 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for lifecyclef6b43d@example.com
2026-01-15 21:43:34 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: fe1e83b6-993b-46a5-8f30-bb82f4d7e972
2026-01-15 21:43:34 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 70ed9151-6f76-4a9f-878b-984d7cdefd2a
2026-01-15 21:43:34 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user fe1e83b6-993b-46a5-8f30-bb82f4d7e972
2026-01-15 21:43:34 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user fe1e83b6-993b-46a5-8f30-bb82f4d7e972 | New balance: 10000
2026-01-15 21:43:34 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:43:34 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user fe1e83b6-993b-46a5-8f30-bb82f4d7e972 from free to PLUS
2026-01-15 21:43:34 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user fe1e83b6-993b-46a5-8f30-bb82f4d7e972
2026-01-15 21:43:34 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User fe1e83b6-993b-46a5-8f30-bb82f4d7e972 upgraded to PLUS tier
2026-01-15 21:43:37 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 7917cebb-376b-4dd3-8e69-9de6e2747202 balance reset to 10000 V-USDT (free)
2026-01-15 21:43:38 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 7917cebb-376b-4dd3-8e69-9de6e2747202 balance reset to 10000 V-USDT (paid)
2026-01-15 21:43:41 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user deb02190-f9c5-4c93-ada9-91401440bdec from free to PLUS
2026-01-15 21:43:41 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user deb02190-f9c5-4c93-ada9-91401440bdec
2026-01-15 21:43:41 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user deb02190-f9c5-4c93-ada9-91401440bdec
2026-01-15 21:43:41 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user deb02190-f9c5-4c93-ada9-91401440bdec | New balance: 10000
2026-01-15 21:43:41 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:43:41 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User deb02190-f9c5-4c93-ada9-91401440bdec upgraded to PLUS tier
2026-01-15 21:43:41 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user deb02190-f9c5-4c93-ada9-91401440bdec from plus to BUSINESS
2026-01-15 21:43:41 - application.services.registration_service - INFO - [registration_service.py:305] - [TIER UPGRADE] Reusing existing live wallet c1e7bb78-dc33-40c9-a512-fdb91f197462
2026-01-15 21:43:41 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User deb02190-f9c5-4c93-ada9-91401440bdec upgraded to BUSINESS tier
2026-01-15 21:43:42 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User deb02190-f9c5-4c93-ada9-91401440bdec downgraded to FREE tier
2026-01-15 21:43:45 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user e10287f2-e5ad-45e0-8d71-79805b30be6d from free to BUSINESS
2026-01-15 21:43:45 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user e10287f2-e5ad-45e0-8d71-79805b30be6d
2026-01-15 21:43:45 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user e10287f2-e5ad-45e0-8d71-79805b30be6d
2026-01-15 21:43:45 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user e10287f2-e5ad-45e0-8d71-79805b30be6d | New balance: 10000
2026-01-15 21:43:45 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:43:45 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User e10287f2-e5ad-45e0-8d71-79805b30be6d upgraded to BUSINESS tier
2026-01-15 21:43:48 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for authflowaba8a7@example.com
2026-01-15 21:43:48 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: b01a1c4f-694b-43ac-ac85-4b28a7552e85
2026-01-15 21:43:48 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 6114f504-2ba1-4a53-9b7d-25be335d1e91
2026-01-15 21:43:48 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user b01a1c4f-694b-43ac-ac85-4b28a7552e85
2026-01-15 21:43:48 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user b01a1c4f-694b-43ac-ac85-4b28a7552e85 | New balance: 10000
2026-01-15 21:43:48 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:43:48 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: authflowaba8a7@example.com
2026-01-15 21:43:49 - application.services.auth_service - WARNING - [auth_service.py:41] - [AUTH BLOCKED] Disabled account login attempt | User: b01a1c4f-694b-43ac-ac85-4b28a7552e85 (authflowaba8a7@example.com)
2026-01-15 21:43:53 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:43:54 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 5a92b088-6bbe-4c07-b529-94795047806f (testuser@example.com) - possible brute force attempt
2026-01-15 21:43:58 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:43:59 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 57df1833-9dd5-4e1f-b73f-74070eda93ab (testuser@example.com) - possible brute force attempt
2026-01-15 21:43:59 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:44:00 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 57df1833-9dd5-4e1f-b73f-74070eda93ab (testuser@example.com) logged in successfully
2026-01-15 21:44:03 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for delete43af01@example.com
2026-01-15 21:44:04 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 62ab63dc-8245-4c7f-a771-cc53ca0bdd8c
2026-01-15 21:44:04 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: e0cee4d7-b9d2-4c4d-9d14-12d3341b5e93
2026-01-15 21:44:04 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 62ab63dc-8245-4c7f-a771-cc53ca0bdd8c
2026-01-15 21:44:04 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 62ab63dc-8245-4c7f-a771-cc53ca0bdd8c | New balance: 10000
2026-01-15 21:44:04 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:44:10 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 8851ce9b-5326-408b-af57-7dc03af14893
2026-01-15 21:44:11 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 8851ce9b-5326-408b-af57-7dc03af14893 | New balance: 10000
2026-01-15 21:44:15 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for unique71be51@example.com
2026-01-15 21:44:15 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 53b6c717-02d3-42a0-a9bd-cc8f5d1c6271
2026-01-15 21:44:16 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 61b8f91e-5f30-4f82-92c2-798330cbc4ba
2026-01-15 21:44:16 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 53b6c717-02d3-42a0-a9bd-cc8f5d1c6271
2026-01-15 21:44:16 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 53b6c717-02d3-42a0-a9bd-cc8f5d1c6271 | New balance: 10000
2026-01-15 21:44:16 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:44:16 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for unique71be51@example.com
2026-01-15 21:44:18 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem9778b3@example.com
2026-01-15 21:44:19 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: bbe74a35-78ea-4e4f-aa7e-4385abb66a8b
2026-01-15 21:44:19 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 8d17edcb-cb5d-481c-883d-e5f28df1a211
2026-01-15 21:44:19 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user bbe74a35-78ea-4e4f-aa7e-4385abb66a8b
2026-01-15 21:44:19 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:45:14 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for lifecycle1ad5e0@example.com
2026-01-15 21:45:15 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 8541c9d4-3d90-422d-a7a5-369324992b35
2026-01-15 21:45:15 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 7af483e1-e406-4937-b671-0ecab7190a3f
2026-01-15 21:45:15 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 8541c9d4-3d90-422d-a7a5-369324992b35
2026-01-15 21:45:15 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 8541c9d4-3d90-422d-a7a5-369324992b35 | New balance: 10000
2026-01-15 21:45:15 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:45:16 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 8541c9d4-3d90-422d-a7a5-369324992b35 from free to PLUS
2026-01-15 21:45:16 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 8541c9d4-3d90-422d-a7a5-369324992b35
2026-01-15 21:45:16 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 8541c9d4-3d90-422d-a7a5-369324992b35 upgraded to PLUS tier
2026-01-15 21:45:19 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User d80f857f-c7bb-46b0-80c9-9d9ce6ceb3dd balance reset to 10000 V-USDT (free)
2026-01-15 21:45:20 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User d80f857f-c7bb-46b0-80c9-9d9ce6ceb3dd balance reset to 10000 V-USDT (paid)
2026-01-15 21:45:23 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 86005d14-9551-4cf7-9b24-7551a7699b1d from free to PLUS
2026-01-15 21:45:23 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 86005d14-9551-4cf7-9b24-7551a7699b1d
2026-01-15 21:45:23 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 86005d14-9551-4cf7-9b24-7551a7699b1d
2026-01-15 21:45:23 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 86005d14-9551-4cf7-9b24-7551a7699b1d | New balance: 10000
2026-01-15 21:45:23 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:45:23 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 86005d14-9551-4cf7-9b24-7551a7699b1d upgraded to PLUS tier
2026-01-15 21:45:23 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user 86005d14-9551-4cf7-9b24-7551a7699b1d from plus to BUSINESS
2026-01-15 21:45:23 - application.services.registration_service - INFO - [registration_service.py:305] - [TIER UPGRADE] Reusing existing live wallet c209d99d-049d-4506-8bd4-a72a07eb2c6a
2026-01-15 21:45:23 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User 86005d14-9551-4cf7-9b24-7551a7699b1d upgraded to BUSINESS tier
2026-01-15 21:45:23 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User 86005d14-9551-4cf7-9b24-7551a7699b1d downgraded to FREE tier
2026-01-15 21:45:26 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user 2ea05964-4eaf-4865-a020-bd8abb959f0c from free to BUSINESS
2026-01-15 21:45:26 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user 2ea05964-4eaf-4865-a020-bd8abb959f0c
2026-01-15 21:45:26 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 2ea05964-4eaf-4865-a020-bd8abb959f0c
2026-01-15 21:45:26 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 2ea05964-4eaf-4865-a020-bd8abb959f0c | New balance: 10000
2026-01-15 21:45:26 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:45:26 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User 2ea05964-4eaf-4865-a020-bd8abb959f0c upgraded to BUSINESS tier
2026-01-15 21:45:29 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for authflow4cba4a@example.com
2026-01-15 21:45:30 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 484d48c1-cb72-448d-a0f3-17b6e8fcf3fd
2026-01-15 21:45:30 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 15feb9f7-a104-4a9a-a160-88c05426d22b
2026-01-15 21:45:30 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 484d48c1-cb72-448d-a0f3-17b6e8fcf3fd
2026-01-15 21:45:30 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 484d48c1-cb72-448d-a0f3-17b6e8fcf3fd | New balance: 10000
2026-01-15 21:45:30 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:45:30 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: authflow4cba4a@example.com
2026-01-15 21:45:31 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 484d48c1-cb72-448d-a0f3-17b6e8fcf3fd (authflow4cba4a@example.com) logged in successfully
2026-01-15 21:45:36 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:45:36 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 8a99fe80-daf6-4319-88a7-58f495e3c46f (testuser@example.com) - possible brute force attempt
2026-01-15 21:45:40 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:45:41 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 8060e952-c6c6-4dfd-be6f-8a399df1c52b (testuser@example.com) - possible brute force attempt
2026-01-15 21:45:41 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:45:41 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 8060e952-c6c6-4dfd-be6f-8a399df1c52b (testuser@example.com) logged in successfully
2026-01-15 21:45:43 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for delete2e1063@example.com
2026-01-15 21:45:44 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 642da1f7-fadc-47a2-b4b3-ac6d60a55ad1
2026-01-15 21:45:44 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 5c0a5a5c-9422-4c65-b30e-e83fcda5d9a2
2026-01-15 21:45:44 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 642da1f7-fadc-47a2-b4b3-ac6d60a55ad1
2026-01-15 21:45:44 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 642da1f7-fadc-47a2-b4b3-ac6d60a55ad1 | New balance: 10000
2026-01-15 21:45:44 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:45:47 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user b3fe7e17-3200-4b0d-9398-cf386ad6cb6c
2026-01-15 21:45:47 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user b3fe7e17-3200-4b0d-9398-cf386ad6cb6c | New balance: 10000
2026-01-15 21:45:50 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for unique4162b4@example.com
2026-01-15 21:45:50 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: df0fc0ae-92c4-4319-ab28-cb35e961424e
2026-01-15 21:45:50 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 7a121c2b-77f2-4129-a405-8ce11599bdda
2026-01-15 21:45:50 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user df0fc0ae-92c4-4319-ab28-cb35e961424e
2026-01-15 21:45:50 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user df0fc0ae-92c4-4319-ab28-cb35e961424e | New balance: 10000
2026-01-15 21:45:50 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:45:50 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for unique4162b4@example.com
2026-01-15 21:45:52 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem1e717c@example.com
2026-01-15 21:45:53 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: a861acb0-d728-4c35-8627-abd1e9933804
2026-01-15 21:45:53 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 0f940348-55fa-41ce-bd19-d07af2c7fb7b
2026-01-15 21:45:53 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user a861acb0-d728-4c35-8627-abd1e9933804
2026-01-15 21:45:53 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:47:11 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for lifecycle624000@example.com
2026-01-15 21:47:13 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 44564913-13af-494d-958d-e9328f2a8da6
2026-01-15 21:47:13 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: b87f970f-ba6f-4df7-bf7b-f1b1b7cae18f
2026-01-15 21:47:13 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 44564913-13af-494d-958d-e9328f2a8da6
2026-01-15 21:47:13 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 44564913-13af-494d-958d-e9328f2a8da6 | New balance: 10000
2026-01-15 21:47:13 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:47:14 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 44564913-13af-494d-958d-e9328f2a8da6 from free to PLUS
2026-01-15 21:47:14 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 44564913-13af-494d-958d-e9328f2a8da6
2026-01-15 21:47:14 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 44564913-13af-494d-958d-e9328f2a8da6 upgraded to PLUS tier
2026-01-15 21:47:19 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User a68ab5a5-37a5-4310-b1bf-41a98d5493a1 balance reset to 10000 V-USDT (free)
2026-01-15 21:47:20 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User a68ab5a5-37a5-4310-b1bf-41a98d5493a1 balance reset to 10000 V-USDT (paid)
2026-01-15 21:47:24 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user a374faf9-0fd8-4a77-8e3b-0f9c547e4f4e from free to PLUS
2026-01-15 21:47:24 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user a374faf9-0fd8-4a77-8e3b-0f9c547e4f4e
2026-01-15 21:47:24 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user a374faf9-0fd8-4a77-8e3b-0f9c547e4f4e
2026-01-15 21:47:24 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user a374faf9-0fd8-4a77-8e3b-0f9c547e4f4e | New balance: 10000
2026-01-15 21:47:24 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:47:24 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User a374faf9-0fd8-4a77-8e3b-0f9c547e4f4e upgraded to PLUS tier
2026-01-15 21:47:24 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user a374faf9-0fd8-4a77-8e3b-0f9c547e4f4e from plus to BUSINESS
2026-01-15 21:47:24 - application.services.registration_service - INFO - [registration_service.py:305] - [TIER UPGRADE] Reusing existing live wallet a92bb5af-220b-442c-b2e9-6539c9444d5e
2026-01-15 21:47:24 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User a374faf9-0fd8-4a77-8e3b-0f9c547e4f4e upgraded to BUSINESS tier
2026-01-15 21:47:25 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User a374faf9-0fd8-4a77-8e3b-0f9c547e4f4e downgraded to FREE tier
2026-01-15 21:47:31 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user d009f000-f688-482f-9d60-2fd99de35065 from free to BUSINESS
2026-01-15 21:47:31 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user d009f000-f688-482f-9d60-2fd99de35065
2026-01-15 21:47:31 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user d009f000-f688-482f-9d60-2fd99de35065
2026-01-15 21:47:31 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user d009f000-f688-482f-9d60-2fd99de35065 | New balance: 10000
2026-01-15 21:47:31 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:47:31 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User d009f000-f688-482f-9d60-2fd99de35065 upgraded to BUSINESS tier
2026-01-15 21:47:35 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for authflowc78218@example.com
2026-01-15 21:47:35 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 56903b71-9692-495b-b852-f7921368890e
2026-01-15 21:47:35 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 9ce6a14e-16bd-4697-a9e5-ff9ed0ea8667
2026-01-15 21:47:35 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 56903b71-9692-495b-b852-f7921368890e
2026-01-15 21:47:36 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 56903b71-9692-495b-b852-f7921368890e | New balance: 10000
2026-01-15 21:47:36 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:47:36 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: authflowc78218@example.com
2026-01-15 21:47:37 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 56903b71-9692-495b-b852-f7921368890e (authflowc78218@example.com) logged in successfully
2026-01-15 21:47:40 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:47:41 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 9c4728d0-8fb8-4bad-a101-1670d47fd8a8 (testuser@example.com) - possible brute force attempt
2026-01-15 21:47:45 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:47:45 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 8c0fc35e-4730-4d65-89d0-97b538ae1552 (testuser@example.com) - possible brute force attempt
2026-01-15 21:47:45 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:47:46 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 8c0fc35e-4730-4d65-89d0-97b538ae1552 (testuser@example.com) logged in successfully
2026-01-15 21:47:49 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for delete75e3c4@example.com
2026-01-15 21:47:49 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: c68ba269-127e-43fc-a4e9-0b7df80501bd
2026-01-15 21:47:49 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 0ef8f1a3-c346-4ba4-9243-76bfe36f4f88
2026-01-15 21:47:49 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user c68ba269-127e-43fc-a4e9-0b7df80501bd
2026-01-15 21:47:50 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user c68ba269-127e-43fc-a4e9-0b7df80501bd | New balance: 10000
2026-01-15 21:47:50 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:47:54 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 467a4b00-9188-4cd7-9599-181a3cbdf9bf
2026-01-15 21:47:54 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 467a4b00-9188-4cd7-9599-181a3cbdf9bf | New balance: 10000
2026-01-15 21:47:56 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for unique67ce4b@example.com
2026-01-15 21:47:57 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: d0fac5f8-72c5-43c7-855d-c35a46ea35d2
2026-01-15 21:47:57 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 28060be2-85bf-4884-b364-49931b631b51
2026-01-15 21:47:57 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user d0fac5f8-72c5-43c7-855d-c35a46ea35d2
2026-01-15 21:47:57 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user d0fac5f8-72c5-43c7-855d-c35a46ea35d2 | New balance: 10000
2026-01-15 21:47:57 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:47:57 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for unique67ce4b@example.com
2026-01-15 21:48:01 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosysteme232b7@example.com
2026-01-15 21:48:02 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: aa6b1798-92a8-49ce-b0cb-d09cd26abdd6
2026-01-15 21:48:02 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 4a53059d-fb55-4abd-89ec-6d42313d1659
2026-01-15 21:48:02 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user aa6b1798-92a8-49ce-b0cb-d09cd26abdd6
2026-01-15 21:48:02 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:48:34 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for newuser@example.com
2026-01-15 21:48:35 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 72dfa115-f88b-4f6c-ac99-908ba5b30e95
2026-01-15 21:48:35 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: db58ee9f-7ea7-4d9c-bbef-bcd582a08209
2026-01-15 21:48:35 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 72dfa115-f88b-4f6c-ac99-908ba5b30e95
2026-01-15 21:48:35 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 72dfa115-f88b-4f6c-ac99-908ba5b30e95 | New balance: 10000
2026-01-15 21:48:35 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:48:38 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for testuser@example.com
2026-01-15 21:48:41 - application.services.registration_service - INFO - [registration_service.py:93] - [PLUS REGISTRATION] Starting for plusnew@example.com
2026-01-15 21:48:42 - application.services.registration_service - INFO - [registration_service.py:96] - [PLUS REGISTRATION] User created | ID: 114afb4c-5768-4241-9cc8-7bde2f82dd81
2026-01-15 21:48:42 - application.services.registration_service - INFO - [registration_service.py:119] - [PLUS REGISTRATION] Wallets created | Demo: 0cb6449c-bcbc-478c-b3a2-f21ffd56402a | Live: 1c895f92-cf89-471b-8dcb-f536de6e21e8
2026-01-15 21:48:42 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 114afb4c-5768-4241-9cc8-7bde2f82dd81
2026-01-15 21:48:42 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 114afb4c-5768-4241-9cc8-7bde2f82dd81 | New balance: 10000
2026-01-15 21:48:44 - application.services.registration_service - INFO - [registration_service.py:130] - [BUSINESS REGISTRATION] Starting for business@example.com
2026-01-15 21:48:45 - application.services.registration_service - INFO - [registration_service.py:133] - [BUSINESS REGISTRATION] User created | ID: cf92abde-4520-4b0a-9f11-3fbf695b033e
2026-01-15 21:48:45 - application.services.registration_service - INFO - [registration_service.py:156] - [BUSINESS REGISTRATION] Wallets created | Demo: 8b0c7068-9535-4539-9fa6-66071b158dae | Live: 85e0260c-007f-4627-b796-5c18f68266a7
2026-01-15 21:48:45 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user cf92abde-4520-4b0a-9f11-3fbf695b033e
2026-01-15 21:48:45 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user cf92abde-4520-4b0a-9f11-3fbf695b033e | New balance: 10000
2026-01-15 21:48:47 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem@example.com
2026-01-15 21:48:48 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 84143865-3847-4612-9f6a-fcbf314dada8
2026-01-15 21:48:48 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: f2d8fc20-7d9d-4d6f-9c1c-36fbf8114f12
2026-01-15 21:48:48 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 84143865-3847-4612-9f6a-fcbf314dada8
2026-01-15 21:48:48 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:49:13 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user a9b834af-682e-4463-b4c1-f890475f567a from free to PLUS
2026-01-15 21:49:13 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user a9b834af-682e-4463-b4c1-f890475f567a
2026-01-15 21:49:13 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user a9b834af-682e-4463-b4c1-f890475f567a
2026-01-15 21:49:13 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user a9b834af-682e-4463-b4c1-f890475f567a | New balance: 10000
2026-01-15 21:49:13 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:49:13 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User a9b834af-682e-4463-b4c1-f890475f567a upgraded to PLUS tier
2026-01-15 21:49:17 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user d8b6af7e-5609-42b0-a806-29d846d59f21 from plus to BUSINESS
2026-01-15 21:49:17 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user d8b6af7e-5609-42b0-a806-29d846d59f21
2026-01-15 21:49:17 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user d8b6af7e-5609-42b0-a806-29d846d59f21
2026-01-15 21:49:17 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user d8b6af7e-5609-42b0-a806-29d846d59f21 | New balance: 10000
2026-01-15 21:49:17 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:49:17 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User d8b6af7e-5609-42b0-a806-29d846d59f21 upgraded to BUSINESS tier
2026-01-15 21:49:29 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User 25b23523-5622-443c-8291-14d5e0a59d21 downgraded to FREE tier
2026-01-15 21:49:34 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user ca6374f6-9ac9-4846-a78a-076abd57bdae
2026-01-15 21:49:34 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user ca6374f6-9ac9-4846-a78a-076abd57bdae | New balance: 10000
2026-01-15 21:49:34 - application.services.registration_service - INFO - [registration_service.py:381] - [DEMO WALLET] Created demo wallet 40b4159b-a466-4107-9677-be72c0d9b514 for user ca6374f6-9ac9-4846-a78a-076abd57bdae with 10000 V-USD
2026-01-15 21:49:38 - application.services.registration_service - INFO - [registration_service.py:365] - [DEMO WALLET] User 897222d9-4758-472f-a6da-fba31a5bdd7f already has demo wallet 1f4ba586-513d-4c8b-8c4b-b691a2979a0d
2026-01-15 21:49:44 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for lifecycle6a87cd@example.com
2026-01-15 21:49:44 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 33e68519-f8b5-4d0d-9f7d-1306776f0016
2026-01-15 21:49:44 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 40aa5604-4d06-468f-b51b-e6d5b97a4845
2026-01-15 21:49:44 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 33e68519-f8b5-4d0d-9f7d-1306776f0016
2026-01-15 21:49:44 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 33e68519-f8b5-4d0d-9f7d-1306776f0016 | New balance: 10000
2026-01-15 21:49:44 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:49:45 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 33e68519-f8b5-4d0d-9f7d-1306776f0016 from free to PLUS
2026-01-15 21:49:45 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 33e68519-f8b5-4d0d-9f7d-1306776f0016
2026-01-15 21:49:45 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 33e68519-f8b5-4d0d-9f7d-1306776f0016 upgraded to PLUS tier
2026-01-15 21:49:49 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 3aeffbf2-1575-4075-85a7-062b63061dc4 balance reset to 10000 V-USDT (free)
2026-01-15 21:49:49 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 3aeffbf2-1575-4075-85a7-062b63061dc4 balance reset to 10000 V-USDT (paid)
2026-01-15 21:49:52 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user a2a464da-ee1f-4297-af11-5318712bf93a from free to PLUS
2026-01-15 21:49:53 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user a2a464da-ee1f-4297-af11-5318712bf93a
2026-01-15 21:49:53 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user a2a464da-ee1f-4297-af11-5318712bf93a
2026-01-15 21:49:53 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user a2a464da-ee1f-4297-af11-5318712bf93a | New balance: 10000
2026-01-15 21:49:53 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:49:53 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User a2a464da-ee1f-4297-af11-5318712bf93a upgraded to PLUS tier
2026-01-15 21:49:53 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user a2a464da-ee1f-4297-af11-5318712bf93a from plus to BUSINESS
2026-01-15 21:49:53 - application.services.registration_service - INFO - [registration_service.py:305] - [TIER UPGRADE] Reusing existing live wallet 21493fd7-b564-4bfd-8911-a8224aa0c3b4
2026-01-15 21:49:53 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User a2a464da-ee1f-4297-af11-5318712bf93a upgraded to BUSINESS tier
2026-01-15 21:49:53 - application.services.registration_service - INFO - [registration_service.py:207] - [TIER DOWNGRADE] User a2a464da-ee1f-4297-af11-5318712bf93a downgraded to FREE tier
2026-01-15 21:49:58 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user 7dcd80a0-e834-4649-a5f9-cb1dc182c598 from free to BUSINESS
2026-01-15 21:49:58 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user 7dcd80a0-e834-4649-a5f9-cb1dc182c598
2026-01-15 21:49:58 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 7dcd80a0-e834-4649-a5f9-cb1dc182c598
2026-01-15 21:49:58 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 7dcd80a0-e834-4649-a5f9-cb1dc182c598 | New balance: 10000
2026-01-15 21:49:58 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:49:58 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User 7dcd80a0-e834-4649-a5f9-cb1dc182c598 upgraded to BUSINESS tier
2026-01-15 21:50:01 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for authflow09bd02@example.com
2026-01-15 21:50:02 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 0cfe47f2-72c7-472f-9e67-4a416557767b
2026-01-15 21:50:02 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 7aa04759-9cf3-4ca2-aa5a-8d51234c8550
2026-01-15 21:50:02 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 0cfe47f2-72c7-472f-9e67-4a416557767b
2026-01-15 21:50:02 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 0cfe47f2-72c7-472f-9e67-4a416557767b | New balance: 10000
2026-01-15 21:50:02 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:50:02 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: authflow09bd02@example.com
2026-01-15 21:50:03 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 0cfe47f2-72c7-472f-9e67-4a416557767b (authflow09bd02@example.com) logged in successfully
2026-01-15 21:50:06 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:50:06 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user b0f3664e-88fd-476b-bc65-19f736ec447d (testuser@example.com) - possible brute force attempt
2026-01-15 21:50:10 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:50:10 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user f3c41a6d-0229-48fc-90e2-7fb107530a6d (testuser@example.com) - possible brute force attempt
2026-01-15 21:50:10 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:50:11 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User f3c41a6d-0229-48fc-90e2-7fb107530a6d (testuser@example.com) logged in successfully
2026-01-15 21:50:13 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for deleteb89a0f@example.com
2026-01-15 21:50:13 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: cc187ba8-b7ab-45e4-9118-ac0a1aed7a87
2026-01-15 21:50:13 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 4dd68b3c-dd15-43e3-bbc7-f2edfc7df45e
2026-01-15 21:50:13 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user cc187ba8-b7ab-45e4-9118-ac0a1aed7a87
2026-01-15 21:50:13 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user cc187ba8-b7ab-45e4-9118-ac0a1aed7a87 | New balance: 10000
2026-01-15 21:50:13 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:50:16 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 9d562fff-de6e-43a4-8ae1-2162e3acea76
2026-01-15 21:50:16 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 9d562fff-de6e-43a4-8ae1-2162e3acea76 | New balance: 10000
2026-01-15 21:50:19 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for unique3b3a13@example.com
2026-01-15 21:50:19 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: 40492a85-c0d2-4b99-8a0a-cb777260738b
2026-01-15 21:50:19 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 164cf9e6-8968-4b17-9ceb-3bd85640b2e5
2026-01-15 21:50:19 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 40492a85-c0d2-4b99-8a0a-cb777260738b
2026-01-15 21:50:20 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 40492a85-c0d2-4b99-8a0a-cb777260738b | New balance: 10000
2026-01-15 21:50:20 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:50:20 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for unique3b3a13@example.com
2026-01-15 21:50:22 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for nosystem95800a@example.com
2026-01-15 21:50:22 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: bbc673d3-869b-4206-91f6-89c4af4d67ad
2026-01-15 21:50:22 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: bc33202e-9007-4a7d-b57e-ff78240e5536
2026-01-15 21:50:22 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user bbc673d3-869b-4206-91f6-89c4af4d67ad
2026-01-15 21:50:22 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:50:24 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: new4a68e1@example.com | Country: NG | IP: 127.0.0.1
2026-01-15 21:50:24 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for new4a68e1@example.com
2026-01-15 21:50:25 - application.services.registration_service - INFO - [registration_service.py:69] - [FREE REGISTRATION] User created | ID: e8e4aed2-d97c-4be4-8808-269923367fb8
2026-01-15 21:50:25 - application.services.registration_service - INFO - [registration_service.py:81] - [FREE REGISTRATION] Demo wallet created | Wallet ID: 0e3be095-6c24-4536-9b40-dea9ff0634bb
2026-01-15 21:50:25 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user e8e4aed2-d97c-4be4-8808-269923367fb8
2026-01-15 21:50:25 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user e8e4aed2-d97c-4be4-8808-269923367fb8 | New balance: 10000
2026-01-15 21:50:25 - application.services.registration_service - INFO - [registration_service.py:84] - [FREE REGISTRATION] 10000 V-USDT issued
2026-01-15 21:50:25 - application.routers.auth - INFO - [auth.py:50] - [REGISTRATION SUCCESS] Free tier user created | ID: e8e4aed2-d97c-4be4-8808-269923367fb8 | Email: new4a68e1@example.com | 10k V-USDT issued | IP: 127.0.0.1
2026-01-15 21:50:28 - application.routers.auth - INFO - [auth.py:32] - [REGISTRATION] Free tier signup | Email: testuser@example.com | Country: NG | IP: 127.0.0.1
2026-01-15 21:50:28 - application.services.registration_service - INFO - [registration_service.py:66] - [FREE REGISTRATION] Starting for testuser@example.com
2026-01-15 21:50:28 - application.routers.auth - WARNING - [auth.py:57] - [REGISTRATION BLOCKED] Email already registered: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:50:39 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:50:39 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:50:40 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 7d692d52-6f79-4686-b538-4f93d8d8aecd (testuser@example.com) logged in successfully
2026-01-15 21:50:40 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 7d692d52-6f79-4686-b538-4f93d8d8aecd | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:50:43 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: testuser@example.com | IP: 127.0.0.1
2026-01-15 21:50:43 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: testuser@example.com
2026-01-15 21:50:43 - application.services.auth_service - WARNING - [auth_service.py:33] - [AUTH FAILED] Invalid password for user 25b74c94-9db5-4a5b-8781-69b1006fd4c5 (testuser@example.com) - possible brute force attempt
2026-01-15 21:50:43 - application.routers.auth - WARNING - [auth.py:197] - [LOGIN FAILED] Wrong password | Email: testuser@example.com | IP: 127.0.0.1 - Possible brute force
2026-01-15 21:50:46 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: nonexistent@example.com | IP: 127.0.0.1
2026-01-15 21:50:46 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: nonexistent@example.com
2026-01-15 21:50:46 - application.services.auth_service - WARNING - [auth_service.py:29] - [AUTH FAILED] Login attempt for non-existent account: nonexistent@example.com
2026-01-15 21:50:46 - application.routers.auth - WARNING - [auth.py:194] - [LOGIN FAILED] User not found | Email: nonexistent@example.com | IP: 127.0.0.1
2026-01-15 21:50:53 - application.routers.users - INFO - [users.py:28] - User 13e5c4f9-84df-4f8b-b41e-d1080bc9ae91 requesting basic profile from 127.0.0.1
2026-01-15 21:51:00 - application.routers.users - INFO - [users.py:147] - User a619b92a-7426-4a73-a6d8-254c8a0ca3bb updating profile from 127.0.0.1
2026-01-15 21:51:00 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/routers/users.py", line 152, in update_current_user
    trader_profile_id = current_user.trader_profile.id if hasattr(current_user, 'trader_profile') and current_user.trader_profile else None
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 179, in update_current_user
    logger.error(f"Unexpected error updating user {current_user.id} from {ip_address}: {e}", exc_info=True)
                                                   ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:51:03 - application.routers.users - INFO - [users.py:147] - User 054a8205-ca53-4a96-a6b7-af1a420b51a2 updating profile from 127.0.0.1
2026-01-15 21:51:03 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/routers/users.py", line 152, in update_current_user
    trader_profile_id = current_user.trader_profile.id if hasattr(current_user, 'trader_profile') and current_user.trader_profile else None
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 179, in update_current_user
    logger.error(f"Unexpected error updating user {current_user.id} from {ip_address}: {e}", exc_info=True)
                                                   ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:51:08 - application.routers.users - INFO - [users.py:325] - [TIER UPGRADE] Plus upgrade request | User: 3cec77b3-b770-4774-a2d2-920448e2173f | IP: 127.0.0.1
2026-01-15 21:51:08 - application.services.registration_service - INFO - [registration_service.py:227] - [TIER UPGRADE] Upgrading user 3cec77b3-b770-4774-a2d2-920448e2173f from free to PLUS
2026-01-15 21:51:08 - application.services.registration_service - INFO - [registration_service.py:250] - [TIER UPGRADE] Created new live wallet for user 3cec77b3-b770-4774-a2d2-920448e2173f
2026-01-15 21:51:08 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 3cec77b3-b770-4774-a2d2-920448e2173f
2026-01-15 21:51:08 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 3cec77b3-b770-4774-a2d2-920448e2173f | New balance: 10000
2026-01-15 21:51:08 - application.services.registration_service - INFO - [registration_service.py:272] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:51:08 - application.services.registration_service - INFO - [registration_service.py:277] - [TIER UPGRADE SUCCESS] User 3cec77b3-b770-4774-a2d2-920448e2173f upgraded to PLUS tier
2026-01-15 21:51:08 - application.routers.users - INFO - [users.py:343] - [TIER UPGRADE SUCCESS] User 3cec77b3-b770-4774-a2d2-920448e2173f upgraded to Plus | IP: 127.0.0.1
2026-01-15 21:51:14 - application.routers.users - INFO - [users.py:364] - [TIER UPGRADE] Business upgrade request | User: 9acf41a3-0dfd-49af-89cb-5f8d8ecb5361 | IP: 127.0.0.1
2026-01-15 21:51:14 - application.services.registration_service - INFO - [registration_service.py:293] - [TIER UPGRADE] Upgrading user 9acf41a3-0dfd-49af-89cb-5f8d8ecb5361 from free to BUSINESS
2026-01-15 21:51:14 - application.services.registration_service - INFO - [registration_service.py:316] - [TIER UPGRADE] Created new live wallet for user 9acf41a3-0dfd-49af-89cb-5f8d8ecb5361
2026-01-15 21:51:14 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 9acf41a3-0dfd-49af-89cb-5f8d8ecb5361
2026-01-15 21:51:14 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 9acf41a3-0dfd-49af-89cb-5f8d8ecb5361 | New balance: 10000
2026-01-15 21:51:14 - application.services.registration_service - INFO - [registration_service.py:338] - [TIER UPGRADE] Created missing demo wallet and issued virtual balance
2026-01-15 21:51:14 - application.services.registration_service - INFO - [registration_service.py:343] - [TIER UPGRADE SUCCESS] User 9acf41a3-0dfd-49af-89cb-5f8d8ecb5361 upgraded to BUSINESS tier
2026-01-15 21:51:14 - application.routers.users - INFO - [users.py:382] - [TIER UPGRADE SUCCESS] User 9acf41a3-0dfd-49af-89cb-5f8d8ecb5361 upgraded to Business | IP: 127.0.0.1
2026-01-15 21:51:23 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:47] - [VIRTUAL RESET] Free reset request from user b16d5c35-4457-427e-a323-a8760da6abcb | IP: 127.0.0.1
2026-01-15 21:51:23 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User b16d5c35-4457-427e-a323-a8760da6abcb balance reset to 10000 V-USDT (free)
2026-01-15 21:51:23 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:66] - [VIRTUAL RESET] Free reset completed for user b16d5c35-4457-427e-a323-a8760da6abcb
2026-01-15 21:51:26 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:88] - [VIRTUAL RESET] Paid reset request from user 253c8629-40da-4a3a-b938-b7f51413267f | IP: 127.0.0.1
2026-01-15 21:51:26 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 253c8629-40da-4a3a-b938-b7f51413267f balance reset to 10000 V-USDT (paid)
2026-01-15 21:51:26 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:110] - [VIRTUAL RESET] Paid reset completed for user 253c8629-40da-4a3a-b938-b7f51413267f
2026-01-15 21:51:28 - application.routers.users - INFO - [users.py:191] - Password change request for user 3080c96b-c376-411c-91c6-83f6f75568b2 from 127.0.0.1
2026-01-15 21:51:29 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/routers/users.py", line 202, in change_password
    trader_profile_id = current_user.trader_profile.id if hasattr(current_user, 'trader_profile') and current_user.trader_profile else None
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 231, in change_password
    logger.error(f"Unexpected error changing password for user {current_user.id} from {ip_address}: {e}", exc_info=True)
                                                                ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:51:31 - application.routers.users - INFO - [users.py:191] - Password change request for user 5110024e-e30b-42af-bf84-3ee26b8d13ac from 127.0.0.1
2026-01-15 21:51:31 - application.routers.users - WARNING - [users.py:220] - Invalid old password provided for user 5110024e-e30b-42af-bf84-3ee26b8d13ac from 127.0.0.1
2026-01-15 21:51:35 - application.routers.users - INFO - [users.py:191] - Password change request for user edb8a2e9-7d6d-4067-8f74-3bc94fba8aea from 127.0.0.1
2026-01-15 21:51:35 - application.routers.users - WARNING - [users.py:223] - New password mismatch for user edb8a2e9-7d6d-4067-8f74-3bc94fba8aea from 127.0.0.1
2026-01-15 21:51:39 - application.routers.users - INFO - [users.py:242] - User 8b8e4ea9-f509-45f9-91a7-9ffb430251f9 (testuser@example.com) requesting account deletion from 127.0.0.1
2026-01-15 21:51:39 - application.main - ERROR - [main.py:54] - Unhandled exception: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "/application/application/routers/users.py", line 245, in delete_current_user
    trader_profile_id = current_user.trader_profile.id if hasattr(current_user, 'trader_profile') and current_user.trader_profile else None
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1131, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/users.py", line 272, in delete_current_user
    logger.error(f"Unexpected error deleting user {current_user.id} from {ip_address}: {e}", exc_info=True)
                                                   ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 306, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-15 21:52:05 - application.services.account_service - WARNING - [account_service.py:252] - User d20a09a7-b633-4123-9e3f-6b7f6a3b3b5e not found
2026-01-15 21:52:45 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user d0ba80ea-92c9-4bff-83a4-ed366374d929
2026-01-15 21:52:46 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user d0ba80ea-92c9-4bff-83a4-ed366374d929 | New balance: 10000
2026-01-15 21:52:48 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 50000 V-USDT to user 466c1f8b-a2b2-44b7-8629-a21d12cd297a
2026-01-15 21:52:48 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 50000 V-USDT issued to user 466c1f8b-a2b2-44b7-8629-a21d12cd297a | New balance: 50000
2026-01-15 21:52:51 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 91f4c3fb-7672-45ed-b5bb-f069bd5b10d5
2026-01-15 21:52:53 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user e318ad75-4fc2-48dd-9d05-111606446a74
2026-01-15 21:52:53 - application.services.ledger_service - ERROR - [ledger_service.py:30] - [CRITICAL] System account 'system_bank_balance' not found - deposits will fail until this is created
2026-01-15 21:52:56 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User e41d6fc7-ec47-4687-9ec6-00a3fb255865 balance reset to 10000 V-USDT (free)
2026-01-15 21:53:02 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 37960f82-9da4-4c7e-a7b4-5874525bbb1e balance reset to 10000 V-USDT (paid)
2026-01-15 21:53:04 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 1653af15-cc58-4fe6-a13e-4f4420277f8b balance reset to 10000 V-USDT (free)
2026-01-15 21:53:19 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user cb9fcf92-0171-47b1-bfe7-8b50b39f75ad
2026-01-15 21:53:21 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user af67e50e-a9fe-4316-aef4-512ebc5dbcd8
2026-01-15 21:53:24 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 17bf99fe-4bad-4428-a3ab-6146029fd5fd
2026-01-15 21:53:24 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 17bf99fe-4bad-4428-a3ab-6146029fd5fd | New balance: 10000
2026-01-15 21:53:27 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user 317a95c0-0f9f-43a2-a65e-ddfb4ea995c2
2026-01-15 21:53:27 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user 317a95c0-0f9f-43a2-a65e-ddfb4ea995c2 | New balance: 10000
2026-01-15 21:53:30 - application.services.registration_service - INFO - [registration_service.py:181] - [WALLET ACTIVATED] Live wallet 8a6669cf-485b-4914-93fa-debdddc2574e activated for user e26d456a-ce5f-4505-bb6d-cf80a83bc77c
2026-01-15 21:53:36 - application.services.registration_service - INFO - [registration_service.py:181] - [WALLET ACTIVATED] Live wallet e278a25f-273e-4e33-8dc7-e8e24b195b53 activated for user bb110201-28b7-4819-adb4-10bd378c539b
2026-01-15 21:53:38 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user b082a120-e34d-4464-a99b-d865bc9aff55
2026-01-15 21:53:39 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user b082a120-e34d-4464-a99b-d865bc9aff55 | New balance: 10000
2026-01-15 21:53:44 - application.services.ledger_service - INFO - [ledger_service.py:460] - [VIRTUAL ISSUANCE] Issuing 10000 V-USDT to user b365720e-fc8e-42d0-a251-4d0988556b0f
2026-01-15 21:53:45 - application.services.ledger_service - INFO - [ledger_service.py:511] - [VIRTUAL ISSUANCE SUCCESS] 10000 V-USDT issued to user b365720e-fc8e-42d0-a251-4d0988556b0f | New balance: 10000
2026-01-15 21:53:49 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 9efe9146-078c-4924-b10f-d96eca815596 balance reset to 10000 V-USDT (free)
2026-01-15 21:53:52 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User c5f72300-c1fb-46e4-be46-b726e14db414 balance reset to 10000 V-USDT (free)
2026-01-15 21:54:05 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 044f01af-6bea-4053-8a44-0d7f76559c53 balance reset to 10000 V-USDT (free)
2026-01-16 20:13:58 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divnejar@gmail.com | IP: 172.18.0.1
2026-01-16 20:13:58 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divnejar@gmail.com
2026-01-16 20:13:58 - application.services.auth_service - WARNING - [auth_service.py:29] - [AUTH FAILED] Login attempt for non-existent account: divnejar@gmail.com
2026-01-16 20:13:58 - application.routers.auth - WARNING - [auth.py:194] - [LOGIN FAILED] User not found | Email: divnejar@gmail.com | IP: 172.18.0.1
2026-01-16 20:14:19 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:14:19 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-16 20:14:20 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-16 20:14:20 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:15:31 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-16 20:15:31 - application.routers.wallet - WARNING - [wallet.py:33] - [WALLET] No wallet found | User: 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-16 20:15:51 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:47] - [VIRTUAL RESET] Free reset request from user 33003f09-a262-4bd2-9d9a-08112383319f | IP: 172.18.0.1
2026-01-16 20:15:51 - application.services.ledger_service - INFO - [ledger_service.py:660] - [VIRTUAL RESET] User 33003f09-a262-4bd2-9d9a-08112383319f balance reset to 10000 V-USDT (free)
2026-01-16 20:15:51 - application.routers.virtual_wallet - INFO - [virtual_wallet.py:66] - [VIRTUAL RESET] Free reset completed for user 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-16 20:16:24 - application.services.sub_service - WARNING - [sub_service.py:55] - User 33003f09-a262-4bd2-9d9a-08112383319f has no active tier subscription
2026-01-16 20:25:41 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:25:41 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-16 20:25:42 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-16 20:25:42 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:25:55 - application.main - ERROR - [main.py:55] - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation "exchange_rates" does not exist
[SQL: SELECT exchange_rates.id, exchange_rates.currency_pair, exchange_rates.rate, exchange_rates.source, exchange_rates.created_at 
FROM exchange_rates ORDER BY exchange_rates.created_at DESC 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedTableError: relation "exchange_rates" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedTableError'>: relation "exchange_rates" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/payments.py", line 18, in get_tier_pricing
    pricing = await PaystackService.get_tier_pricing(db)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/paystack_service.py", line 130, in get_tier_pricing
    rate = await ExchangeRateConverter.get_current_rate(db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/er_cnvrt_service.py", line 19, in get_current_rate
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation "exchange_rates" does not exist
[SQL: SELECT exchange_rates.id, exchange_rates.currency_pair, exchange_rates.rate, exchange_rates.source, exchange_rates.created_at 
FROM exchange_rates ORDER BY exchange_rates.created_at DESC 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-16 20:31:31 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:31:31 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-16 20:31:32 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-16 20:31:32 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:31:42 - application.main - ERROR - [main.py:55] - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation "exchange_rates" does not exist
[SQL: SELECT exchange_rates.id, exchange_rates.currency_pair, exchange_rates.rate, exchange_rates.source, exchange_rates.created_at 
FROM exchange_rates ORDER BY exchange_rates.created_at DESC 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedTableError: relation "exchange_rates" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedTableError'>: relation "exchange_rates" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/routers/payments.py", line 18, in get_tier_pricing
    pricing = await PaystackService.get_tier_pricing(db)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/application/application/services/paystack_service.py", line 130, in get_tier_pricing
    payload = {
           ^^^^^
  File "/application/application/services/er_cnvrt_service.py", line 19, in get_current_rate
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation "exchange_rates" does not exist
[SQL: SELECT exchange_rates.id, exchange_rates.currency_pair, exchange_rates.rate, exchange_rates.source, exchange_rates.created_at 
FROM exchange_rates ORDER BY exchange_rates.created_at DESC 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-16 20:33:27 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:33:42 - application.routers.payments - INFO - [payments.py:44] - [UPGRADE] User 33003f09-a262-4bd2-9d9a-08112383319f initiating upgrade to plus | IP: 172.18.0.1
2026-01-16 20:33:42 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:33:42 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:33:42 - application.services.er_cnvrt_service - INFO - [er_cnvrt_service.py:37] - [CONVERT] $15.0  26250.00 @ rate 1750.0
2026-01-16 20:33:42 - application.services.paystack_service - INFO - [paystack_service.py:114] - [TIER PAYMENT] PLUS tier | User: 33003f09-a262-4bd2-9d9a-08112383319f | $15.0  26,250.00 @ rate 1750.0
2026-01-16 20:33:42 - application.services.paystack_service - INFO - [paystack_service.py:37] - [PAYSTACK] Initializing transaction for user 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 26,250.00 (2625000 kobo)
2026-01-16 20:33:42 - application.services.paystack_service - INFO - [paystack_service.py:44] - [PAYSTACK] Generated reference: dep_33003f09_b1311d469ffb for user 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-16 20:33:42 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 26,250.00 | Ref: dep_33003f09_b1311d469ffb
2026-01-16 20:33:42 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 339c99e0-31f3-4ce8-b54a-ecf2d14e931c created | User: 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 26,250.00 | Ref: dep_33003f09_b1311d469ffb
2026-01-16 20:33:42 - application.services.paystack_service - INFO - [paystack_service.py:62] - [PAYSTACK API] Calling Paystack to initialize payment | Ref: dep_33003f09_b1311d469ffb
2026-01-16 20:33:43 - application.services.paystack_service - INFO - [paystack_service.py:81] - [PAYSTACK SUCCESS] Transaction initialized | Ref: dep_33003f09_b1311d469ffb | User: 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 26,250.00
2026-01-16 20:33:43 - application.routers.payments - INFO - [payments.py:74] - [UPGRADE] Payment initialized | User: 33003f09-a262-4bd2-9d9a-08112383319f | Ref: dep_33003f09_b1311d469ffb | 26,250.00
2026-01-16 20:36:31 - application.routers.webhooks - INFO - [webhooks.py:19] - [WEBHOOK] Received Paystack webhook | IP: 172.18.0.1
2026-01-16 20:36:31 - application.routers.webhooks - INFO - [webhooks.py:48] - [WEBHOOK] Processing event | Event: charge.success | Ref: dep_33003f09_b1311d469ffb | IP: 172.18.0.1
2026-01-16 20:36:31 - application.routers.webhooks - INFO - [webhooks.py:55] - [WEBHOOK] Queued for processing | Event: charge.success | Ref: dep_33003f09_b1311d469ffb
2026-01-16 20:36:33 - application.core.tasks - INFO - [tasks.py:51] - [WEBHOOK PROCESSING] Event: charge.success | Ref: dep_33003f09_b1311d469ffb | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 1/5
2026-01-16 20:36:33 - application.core.tasks - INFO - [tasks.py:60] - [DEPOSIT PROCESSING] Processing successful charge | Ref: dep_33003f09_b1311d469ffb | Paystack ID: 5742939800
2026-01-16 20:36:33 - application.core.tasks - ERROR - [tasks.py:102] - [WEBHOOK ERROR] Processing failed | Ref: dep_33003f09_b1311d469ffb | Error: cannot unpack non-iterable coroutine object | Will retry...
2026-01-16 20:37:03 - application.core.tasks - INFO - [tasks.py:51] - [WEBHOOK PROCESSING] Event: charge.success | Ref: dep_33003f09_b1311d469ffb | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 2/5
2026-01-16 20:37:03 - application.core.tasks - INFO - [tasks.py:60] - [DEPOSIT PROCESSING] Processing successful charge | Ref: dep_33003f09_b1311d469ffb | Paystack ID: 5742939800
2026-01-16 20:37:03 - application.core.tasks - ERROR - [tasks.py:102] - [WEBHOOK ERROR] Processing failed | Ref: dep_33003f09_b1311d469ffb | Error: cannot unpack non-iterable coroutine object | Will retry...
2026-01-16 20:37:33 - application.core.tasks - INFO - [tasks.py:51] - [WEBHOOK PROCESSING] Event: charge.success | Ref: dep_33003f09_b1311d469ffb | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 3/5
2026-01-16 20:37:33 - application.core.tasks - INFO - [tasks.py:60] - [DEPOSIT PROCESSING] Processing successful charge | Ref: dep_33003f09_b1311d469ffb | Paystack ID: 5742939800
2026-01-16 20:37:33 - application.core.tasks - ERROR - [tasks.py:102] - [WEBHOOK ERROR] Processing failed | Ref: dep_33003f09_b1311d469ffb | Error: cannot unpack non-iterable coroutine object | Will retry...
2026-01-16 20:38:03 - application.core.tasks - INFO - [tasks.py:51] - [WEBHOOK PROCESSING] Event: charge.success | Ref: dep_33003f09_b1311d469ffb | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 4/5
2026-01-16 20:38:03 - application.core.tasks - INFO - [tasks.py:60] - [DEPOSIT PROCESSING] Processing successful charge | Ref: dep_33003f09_b1311d469ffb | Paystack ID: 5742939800
2026-01-16 20:38:03 - application.core.tasks - ERROR - [tasks.py:102] - [WEBHOOK ERROR] Processing failed | Ref: dep_33003f09_b1311d469ffb | Error: cannot unpack non-iterable coroutine object | Will retry...
2026-01-16 20:38:33 - application.core.tasks - INFO - [tasks.py:51] - [WEBHOOK PROCESSING] Event: charge.success | Ref: dep_33003f09_b1311d469ffb | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 5/5
2026-01-16 20:38:33 - application.core.tasks - INFO - [tasks.py:60] - [DEPOSIT PROCESSING] Processing successful charge | Ref: dep_33003f09_b1311d469ffb | Paystack ID: 5742939800
2026-01-16 20:38:33 - application.core.tasks - ERROR - [tasks.py:102] - [WEBHOOK ERROR] Processing failed | Ref: dep_33003f09_b1311d469ffb | Error: cannot unpack non-iterable coroutine object | Will retry...
2026-01-16 20:39:03 - application.core.tasks - INFO - [tasks.py:51] - [WEBHOOK PROCESSING] Event: charge.success | Ref: dep_33003f09_b1311d469ffb | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 6/5
2026-01-16 20:39:03 - application.core.tasks - INFO - [tasks.py:60] - [DEPOSIT PROCESSING] Processing successful charge | Ref: dep_33003f09_b1311d469ffb | Paystack ID: 5742939800
2026-01-16 20:39:03 - application.core.tasks - ERROR - [tasks.py:102] - [WEBHOOK ERROR] Processing failed | Ref: dep_33003f09_b1311d469ffb | Error: cannot unpack non-iterable coroutine object | Will retry...
2026-01-16 20:40:23 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:40:23 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-16 20:40:24 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-16 20:40:24 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:41:01 - application.routers.payments - INFO - [payments.py:101] - [VERIFY] User 33003f09-a262-4bd2-9d9a-08112383319f verifying payment | Ref: dep_33003f09_b1311d469ffb  | IP: 172.18.0.1
2026-01-16 20:41:01 - application.services.paystack_service - INFO - [paystack_service.py:197] - [PAYSTACK] Verifying transaction | Ref: dep_33003f09_b1311d469ffb 
2026-01-16 20:41:01 - application.services.paystack_service - INFO - [paystack_service.py:218] - [PAYSTACK VERIFY] Ref: dep_33003f09_b1311d469ffb  | Status: success | Amount: 26,250.00 | Gateway: Successful
2026-01-16 20:41:16 - application.services.sub_service - WARNING - [sub_service.py:55] - User 33003f09-a262-4bd2-9d9a-08112383319f has no active tier subscription
2026-01-16 20:43:15 - application.routers.payments - INFO - [payments.py:44] - [UPGRADE] User 33003f09-a262-4bd2-9d9a-08112383319f initiating upgrade to business | IP: 172.18.0.1
2026-01-16 20:43:15 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:43:15 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:43:15 - application.services.er_cnvrt_service - INFO - [er_cnvrt_service.py:37] - [CONVERT] $49.0  85750.00 @ rate 1750.0
2026-01-16 20:43:15 - application.services.paystack_service - INFO - [paystack_service.py:117] - [TIER PAYMENT] BUSINESS tier | User: 33003f09-a262-4bd2-9d9a-08112383319f | $49.0  85,750.00 @ rate 1750.0 | Ref: tier_business_33003f09_5512e7f7
2026-01-16 20:43:15 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 85,750.00 | Ref: tier_business_33003f09_5512e7f7
2026-01-16 20:43:15 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 3c6e762e-f225-42f5-94a1-eade3196edcc created | User: 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 85,750.00 | Ref: tier_business_33003f09_5512e7f7
2026-01-16 20:43:16 - application.services.paystack_service - INFO - [paystack_service.py:163] - [TIER PAYMENT SUCCESS] Initialized | Ref: tier_business_33003f09_5512e7f7 | User: 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-16 20:43:17 - application.routers.payments - INFO - [payments.py:74] - [UPGRADE] Payment initialized | User: 33003f09-a262-4bd2-9d9a-08112383319f | Ref: tier_business_33003f09_5512e7f7 | 85,750.00
2026-01-16 20:49:03 - application.routers.auth - INFO - [auth.py:148] - [LOGIN] Login attempt | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:49:03 - application.services.auth_service - INFO - [auth_service.py:22] - [AUTH] Login attempt for email: divineuzo7@gmail.com
2026-01-16 20:49:04 - application.services.auth_service - INFO - [auth_service.py:57] - [AUTH SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f (divineuzo7@gmail.com) logged in successfully
2026-01-16 20:49:04 - application.routers.auth - INFO - [auth.py:187] - [LOGIN SUCCESS] User authenticated | ID: 33003f09-a262-4bd2-9d9a-08112383319f | Email: divineuzo7@gmail.com | IP: 172.18.0.1
2026-01-16 20:49:17 - application.services.sub_service - WARNING - [sub_service.py:55] - User 33003f09-a262-4bd2-9d9a-08112383319f has no active tier subscription
2026-01-16 20:49:48 - application.routers.payments - INFO - [payments.py:44] - [UPGRADE] User 33003f09-a262-4bd2-9d9a-08112383319f initiating upgrade to plus | IP: 172.18.0.1
2026-01-16 20:49:48 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:49:48 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:49:48 - application.services.er_cnvrt_service - INFO - [er_cnvrt_service.py:37] - [CONVERT] $15.0  26250.00 @ rate 1750.0
2026-01-16 20:49:48 - application.services.paystack_service - INFO - [paystack_service.py:117] - [TIER PAYMENT] PLUS tier | User: 33003f09-a262-4bd2-9d9a-08112383319f | $15.0  26,250.00 @ rate 1750.0 | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:49:48 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 26,250.00 | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:49:48 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 3ef0bd4d-f932-4c88-9dc5-982e31c86230 created | User: 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 26,250.00 | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:49:50 - application.services.paystack_service - INFO - [paystack_service.py:163] - [TIER PAYMENT SUCCESS] Initialized | Ref: tier_plus_33003f09_a0b76070 | User: 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-16 20:49:50 - application.routers.payments - INFO - [payments.py:74] - [UPGRADE] Payment initialized | User: 33003f09-a262-4bd2-9d9a-08112383319f | Ref: tier_plus_33003f09_a0b76070 | 26,250.00
2026-01-16 20:50:18 - application.routers.webhooks - INFO - [webhooks.py:19] - [WEBHOOK] Received Paystack webhook | IP: 172.18.0.1
2026-01-16 20:50:18 - application.routers.webhooks - INFO - [webhooks.py:48] - [WEBHOOK] Processing event | Event: charge.success | Ref: tier_plus_33003f09_a0b76070 | IP: 172.18.0.1
2026-01-16 20:50:18 - application.routers.webhooks - INFO - [webhooks.py:55] - [WEBHOOK] Queued for processing | Event: charge.success | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:50:21 - application.core.tasks - INFO - [tasks.py:54] - [WEBHOOK PROCESSING] Event: charge.success | Ref: tier_plus_33003f09_a0b76070 | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 1/5
2026-01-16 20:50:21 - application.core.tasks - INFO - [tasks.py:75] - [TIER UPGRADE] Processing tier upgrade | Tier: plus | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:50:21 - application.services.ledger_service - INFO - [ledger_service.py:665] - [SYNC DEPOSIT] Processing | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:50:22 - application.core.tasks - ERROR - [tasks.py:142] - [USER WALLET MISSING] Cannot credit user | Ref: tier_plus_33003f09_a0b76070 | Error: Wallet not found for user 33003f09-a262-4bd2-9d9a-08112383319f not found
2026-01-16 20:50:52 - application.core.tasks - INFO - [tasks.py:54] - [WEBHOOK PROCESSING] Event: charge.success | Ref: tier_plus_33003f09_a0b76070 | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 2/5
2026-01-16 20:50:52 - application.core.tasks - INFO - [tasks.py:75] - [TIER UPGRADE] Processing tier upgrade | Tier: plus | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:50:52 - application.services.ledger_service - INFO - [ledger_service.py:665] - [SYNC DEPOSIT] Processing | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:50:52 - application.core.tasks - ERROR - [tasks.py:142] - [USER WALLET MISSING] Cannot credit user | Ref: tier_plus_33003f09_a0b76070 | Error: Wallet not found for user 33003f09-a262-4bd2-9d9a-08112383319f not found
2026-01-16 20:51:22 - application.core.tasks - INFO - [tasks.py:54] - [WEBHOOK PROCESSING] Event: charge.success | Ref: tier_plus_33003f09_a0b76070 | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 3/5
2026-01-16 20:51:22 - application.core.tasks - INFO - [tasks.py:75] - [TIER UPGRADE] Processing tier upgrade | Tier: plus | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:51:22 - application.services.ledger_service - INFO - [ledger_service.py:665] - [SYNC DEPOSIT] Processing | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:51:22 - application.core.tasks - ERROR - [tasks.py:142] - [USER WALLET MISSING] Cannot credit user | Ref: tier_plus_33003f09_a0b76070 | Error: Wallet not found for user 33003f09-a262-4bd2-9d9a-08112383319f not found
2026-01-16 20:51:52 - application.core.tasks - INFO - [tasks.py:54] - [WEBHOOK PROCESSING] Event: charge.success | Ref: tier_plus_33003f09_a0b76070 | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 4/5
2026-01-16 20:51:52 - application.core.tasks - INFO - [tasks.py:75] - [TIER UPGRADE] Processing tier upgrade | Tier: plus | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:51:52 - application.services.ledger_service - INFO - [ledger_service.py:665] - [SYNC DEPOSIT] Processing | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:51:52 - application.core.tasks - ERROR - [tasks.py:142] - [USER WALLET MISSING] Cannot credit user | Ref: tier_plus_33003f09_a0b76070 | Error: Wallet not found for user 33003f09-a262-4bd2-9d9a-08112383319f not found
2026-01-16 20:52:33 - application.core.tasks - INFO - [tasks.py:54] - [WEBHOOK PROCESSING] Event: charge.success | Ref: tier_plus_33003f09_a0b76070 | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 5/5
2026-01-16 20:52:33 - application.core.tasks - INFO - [tasks.py:75] - [TIER UPGRADE] Processing tier upgrade | Tier: plus | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:52:33 - application.core.tasks - ERROR - [tasks.py:156] - [WEBHOOK ERROR] Processing failed | Ref: tier_plus_33003f09_a0b76070 | Error: name 'select' is not defined | Will retry...
2026-01-16 20:53:03 - application.core.tasks - INFO - [tasks.py:54] - [WEBHOOK PROCESSING] Event: charge.success | Ref: tier_plus_33003f09_a0b76070 | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 6/5
2026-01-16 20:53:03 - application.core.tasks - INFO - [tasks.py:75] - [TIER UPGRADE] Processing tier upgrade | Tier: plus | Ref: tier_plus_33003f09_a0b76070
2026-01-16 20:53:03 - application.core.tasks - ERROR - [tasks.py:156] - [WEBHOOK ERROR] Processing failed | Ref: tier_plus_33003f09_a0b76070 | Error: name 'select' is not defined | Will retry...
2026-01-16 20:54:28 - application.routers.payments - INFO - [payments.py:44] - [UPGRADE] User 33003f09-a262-4bd2-9d9a-08112383319f initiating upgrade to plus | IP: 172.18.0.1
2026-01-16 20:54:28 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:54:28 - application.services.er_cnvrt_service - WARNING - [er_cnvrt_service.py:30] - [RATE] No rate in DB, using fallback
2026-01-16 20:54:28 - application.services.er_cnvrt_service - INFO - [er_cnvrt_service.py:37] - [CONVERT] $15.0  26250.00 @ rate 1750.0
2026-01-16 20:54:28 - application.services.paystack_service - INFO - [paystack_service.py:117] - [TIER PAYMENT] PLUS tier | User: 33003f09-a262-4bd2-9d9a-08112383319f | $15.0  26,250.00 @ rate 1750.0 | Ref: tier_plus_33003f09_62e19f6d
2026-01-16 20:54:28 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 26,250.00 | Ref: tier_plus_33003f09_62e19f6d
2026-01-16 20:54:28 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 7122b4c8-f4a6-476f-9b46-43f89f36b40c created | User: 33003f09-a262-4bd2-9d9a-08112383319f | Amount: 26,250.00 | Ref: tier_plus_33003f09_62e19f6d
2026-01-16 20:54:30 - application.services.paystack_service - INFO - [paystack_service.py:163] - [TIER PAYMENT SUCCESS] Initialized | Ref: tier_plus_33003f09_62e19f6d | User: 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-16 20:54:30 - application.routers.payments - INFO - [payments.py:74] - [UPGRADE] Payment initialized | User: 33003f09-a262-4bd2-9d9a-08112383319f | Ref: tier_plus_33003f09_62e19f6d | 26,250.00
2026-01-16 20:55:03 - application.routers.webhooks - INFO - [webhooks.py:19] - [WEBHOOK] Received Paystack webhook | IP: 172.18.0.1
2026-01-16 20:55:03 - application.routers.webhooks - INFO - [webhooks.py:48] - [WEBHOOK] Processing event | Event: charge.success | Ref: tier_plus_33003f09_62e19f6d | IP: 172.18.0.1
2026-01-16 20:55:03 - application.routers.webhooks - INFO - [webhooks.py:55] - [WEBHOOK] Queued for processing | Event: charge.success | Ref: tier_plus_33003f09_62e19f6d
2026-01-16 20:55:04 - application.core.tasks - INFO - [tasks.py:55] - [WEBHOOK PROCESSING] Event: charge.success | Ref: tier_plus_33003f09_62e19f6d | Amount: 26,250.00 | Customer: divineuzo7@gmail.com | Attempt 1/5
2026-01-16 20:55:04 - application.core.tasks - INFO - [tasks.py:76] - [TIER UPGRADE] Processing tier upgrade | Tier: plus | Ref: tier_plus_33003f09_62e19f6d
2026-01-16 20:55:04 - application.core.tasks - INFO - [tasks.py:91] - [TIER UPGRADE] Marked transaction tier_plus_33003f09_62e19f6d as SUCCESS
2026-01-16 20:55:04 - application.services.registration_service - INFO - [registration_service.py:403] - [SYNC UPGRADE] Upgrading user 33003f09-a262-4bd2-9d9a-08112383319f to PLUS
2026-01-16 20:55:04 - application.services.registration_service - INFO - [registration_service.py:451] - [SYNC UPGRADE] Created/updated tier account for user 33003f09-a262-4bd2-9d9a-08112383319f
2026-01-16 20:55:04 - application.services.registration_service - INFO - [registration_service.py:458] - [SYNC UPGRADE SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f upgraded to PLUS
2026-01-16 20:55:04 - application.core.tasks - INFO - [tasks.py:109] - [TIER UPGRADE SUCCESS] User 33003f09-a262-4bd2-9d9a-08112383319f upgraded to plus | Ref: tier_plus_33003f09_62e19f6d
2026-01-16 20:55:58 - application.services.sub_service - INFO - [sub_service.py:78] - User 33003f09-a262-4bd2-9d9a-08112383319f tier validated: 0/5 follows
2026-01-16 21:05:02 - application.services.registration_service - INFO - [registration_service.py:400] - [SYNC UPGRADE] User 33003f09-a262-4bd2-9d9a-08112383319f already on Plus tier
2026-01-21 20:38:06 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user c5e1613e-1137-4c35-a100-6b050db9d269 | Amount: 50,000.00 | Ref: deposit_6fd504fb3bed
2026-01-21 20:38:06 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 24cbee43-ba13-481d-bbe0-d284d1471682 created | User: c5e1613e-1137-4c35-a100-6b050db9d269 | Amount: 50,000.00 | Ref: deposit_6fd504fb3bed
2026-01-21 20:38:09 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 5279a55e-88ae-4656-8f63-5a17ac90bbf4 | Amount: 10,000.00 | Ref: min_deposit_3d9a77a19baf
2026-01-21 20:38:09 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 7a87a083-ed28-4cc9-8799-6a645d70a5b2 created | User: 5279a55e-88ae-4656-8f63-5a17ac90bbf4 | Amount: 10,000.00 | Ref: min_deposit_3d9a77a19baf
2026-01-21 20:38:14 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user c25005d2-879b-4443-ae51-368e419c82ef | Amount: 10,000,000.00 | Ref: large_deposit_cb109018a1a4
2026-01-21 20:38:14 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 4f28c946-576d-45c4-a204-859e8db90f39 created | User: c25005d2-879b-4443-ae51-368e419c82ef | Amount: 10,000,000.00 | Ref: large_deposit_cb109018a1a4
2026-01-21 20:38:18 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user efe2132d-43f8-41d8-bec4-08eeefd12bb0 | Amount: 10,000.00 | Ref: duplicate_test_0be7abcf46d4
2026-01-21 20:38:18 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction f0f2655b-c2e3-477b-96b7-497fe87e5160 created | User: efe2132d-43f8-41d8-bec4-08eeefd12bb0 | Amount: 10,000.00 | Ref: duplicate_test_0be7abcf46d4
2026-01-21 20:38:18 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user efe2132d-43f8-41d8-bec4-08eeefd12bb0 | Amount: 20,000.00 | Ref: duplicate_test_0be7abcf46d4
2026-01-21 20:38:18 - application.services.ledger_service - ERROR - [ledger_service.py:98] - [DUPLICATE BLOCKED] Deposit reference duplicate_test_0be7abcf46d4 already exists with status TransactionStatus.PENDING
2026-01-21 20:38:21 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 59160e22-cc7e-4bfa-b067-57676be60403 | Amount: 10,000.00 | Ref: no_wallet_028df2273cbd
2026-01-21 20:38:21 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 90527090-18a9-4cc0-af43-0cf49a40e54d created | User: 59160e22-cc7e-4bfa-b067-57676be60403 | Amount: 10,000.00 | Ref: no_wallet_028df2273cbd
2026-01-21 20:38:24 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 54d8c025-4d0e-4453-a39f-1acafde1de1c | Amount: 10,000.00 | Ref: test_deposit_3e1eb3fdf2d0
2026-01-21 20:38:24 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction fcf19988-de6a-4709-a1b5-70bf3f46349c created | User: 54d8c025-4d0e-4453-a39f-1acafde1de1c | Amount: 10,000.00 | Ref: test_deposit_3e1eb3fdf2d0
2026-01-21 20:38:24 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_3e1eb3fdf2d0 | Paystack ID: PAYSTACK_TXN_12345
2026-01-21 20:38:24 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 54d8c025-4d0e-4453-a39f-1acafde1de1c with 10,000.00
2026-01-21 20:38:24 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 54d8c025-4d0e-4453-a39f-1acafde1de1c | Ref: test_deposit_3e1eb3fdf2d0 | User balance: 0.00  10,000.00
2026-01-21 20:38:24 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:28 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user c5fbf2cd-e71a-44d8-b50d-4a1dd7fa5f12 | Amount: 10,000.00 | Ref: test_deposit_12e009924e3e
2026-01-21 20:38:28 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 628350c2-7a27-4eb9-b80e-4997557bf800 created | User: c5fbf2cd-e71a-44d8-b50d-4a1dd7fa5f12 | Amount: 10,000.00 | Ref: test_deposit_12e009924e3e
2026-01-21 20:38:28 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_12e009924e3e | Paystack ID: PAYSTACK_TXN_12345
2026-01-21 20:38:28 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user c5fbf2cd-e71a-44d8-b50d-4a1dd7fa5f12 with 10,000.00
2026-01-21 20:38:28 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user c5fbf2cd-e71a-44d8-b50d-4a1dd7fa5f12 | Ref: test_deposit_12e009924e3e | User balance: 0.00  10,000.00
2026-01-21 20:38:28 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:31 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 9a9de629-2019-463c-a294-ded77d6ecf9f | Amount: 10,000.00 | Ref: test_deposit_a1e2966382f4
2026-01-21 20:38:31 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 0bfef063-aeab-4cf5-a946-fb1653b28b10 created | User: 9a9de629-2019-463c-a294-ded77d6ecf9f | Amount: 10,000.00 | Ref: test_deposit_a1e2966382f4
2026-01-21 20:38:31 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_a1e2966382f4 | Paystack ID: PAYSTACK_TXN_12345
2026-01-21 20:38:31 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 9a9de629-2019-463c-a294-ded77d6ecf9f with 10,000.00
2026-01-21 20:38:31 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 9a9de629-2019-463c-a294-ded77d6ecf9f | Ref: test_deposit_a1e2966382f4 | User balance: 0.00  10,000.00
2026-01-21 20:38:31 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:35 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 76f470e4-8a7e-44cc-8d64-276b5afd4e84 | Amount: 10,000.00 | Ref: test_deposit_199ef2b630f9
2026-01-21 20:38:35 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 2f6fa465-70d0-4160-a8c4-6d0253688e2a created | User: 76f470e4-8a7e-44cc-8d64-276b5afd4e84 | Amount: 10,000.00 | Ref: test_deposit_199ef2b630f9
2026-01-21 20:38:35 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_199ef2b630f9 | Paystack ID: PAYSTACK_TXN_UNIQUE_123
2026-01-21 20:38:35 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 76f470e4-8a7e-44cc-8d64-276b5afd4e84 with 10,000.00
2026-01-21 20:38:35 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 76f470e4-8a7e-44cc-8d64-276b5afd4e84 | Ref: test_deposit_199ef2b630f9 | User balance: 0.00  10,000.00
2026-01-21 20:38:35 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:38 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user e11d71a1-5644-4ce1-b7a6-40a0195ad3ce | Amount: 10,000.00 | Ref: test_deposit_ca2ef434b982
2026-01-21 20:38:38 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 209a952f-76f6-4e8a-9612-d04203f8bce9 created | User: e11d71a1-5644-4ce1-b7a6-40a0195ad3ce | Amount: 10,000.00 | Ref: test_deposit_ca2ef434b982
2026-01-21 20:38:38 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_ca2ef434b982 | Paystack ID: PAYSTACK_12345
2026-01-21 20:38:38 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user e11d71a1-5644-4ce1-b7a6-40a0195ad3ce with 10,000.00
2026-01-21 20:38:38 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user e11d71a1-5644-4ce1-b7a6-40a0195ad3ce | Ref: test_deposit_ca2ef434b982 | User balance: 0.00  10,000.00
2026-01-21 20:38:38 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:42 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 5208f432-b6bb-4cfb-a01d-0c24586f134f | Amount: 10,000.00 | Ref: test_deposit_04f623e6b1bd
2026-01-21 20:38:42 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 5ecce0f1-1ba6-4a93-929d-1d60acad2fa5 created | User: 5208f432-b6bb-4cfb-a01d-0c24586f134f | Amount: 10,000.00 | Ref: test_deposit_04f623e6b1bd
2026-01-21 20:38:42 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_04f623e6b1bd | Paystack ID: PAYSTACK_12345
2026-01-21 20:38:42 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 5208f432-b6bb-4cfb-a01d-0c24586f134f with 10,000.00
2026-01-21 20:38:42 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 5208f432-b6bb-4cfb-a01d-0c24586f134f | Ref: test_deposit_04f623e6b1bd | User balance: 0.00  10,000.00
2026-01-21 20:38:42 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user bd38853d-723c-46e4-b3aa-386dad9f585b | Amount: 10,000.00 | Ref: balance_test_0_89ef90a7
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 3badee6a-2e8c-4ac6-b01b-22e4a7ceed1e created | User: bd38853d-723c-46e4-b3aa-386dad9f585b | Amount: 10,000.00 | Ref: balance_test_0_89ef90a7
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: balance_test_0_89ef90a7 | Paystack ID: PAYSTACK_0
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user bd38853d-723c-46e4-b3aa-386dad9f585b with 10,000.00
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user bd38853d-723c-46e4-b3aa-386dad9f585b | Ref: balance_test_0_89ef90a7 | User balance: 0.00  10,000.00
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user bd38853d-723c-46e4-b3aa-386dad9f585b | Amount: 20,000.00 | Ref: balance_test_1_9d407859
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 4ea3859c-068b-4950-b5c6-dcab144b2413 created | User: bd38853d-723c-46e4-b3aa-386dad9f585b | Amount: 20,000.00 | Ref: balance_test_1_9d407859
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: balance_test_1_9d407859 | Paystack ID: PAYSTACK_1
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user bd38853d-723c-46e4-b3aa-386dad9f585b with 20,000.00
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 20,000.00 credited to user bd38853d-723c-46e4-b3aa-386dad9f585b | Ref: balance_test_1_9d407859 | User balance: 10,000.00  30,000.00
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -10,000.00  -30,000.00
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user bd38853d-723c-46e4-b3aa-386dad9f585b | Amount: 30,000.00 | Ref: balance_test_2_d91115f4
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction aee45803-f1ef-4ba4-b28e-bf73a032f0d0 created | User: bd38853d-723c-46e4-b3aa-386dad9f585b | Amount: 30,000.00 | Ref: balance_test_2_d91115f4
2026-01-21 20:38:46 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: balance_test_2_d91115f4 | Paystack ID: PAYSTACK_2
2026-01-21 20:38:47 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user bd38853d-723c-46e4-b3aa-386dad9f585b with 30,000.00
2026-01-21 20:38:47 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 30,000.00 credited to user bd38853d-723c-46e4-b3aa-386dad9f585b | Ref: balance_test_2_d91115f4 | User balance: 30,000.00  60,000.00
2026-01-21 20:38:47 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -30,000.00  -60,000.00
2026-01-21 20:38:51 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user cc50aa13-ade5-4085-95da-9f27a960de8e | Amount: 10,000.00 | Ref: test_deposit_c4f4d1cfe993
2026-01-21 20:38:51 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 3488b8e4-2035-4a45-a3e2-f708f8cd447f created | User: cc50aa13-ade5-4085-95da-9f27a960de8e | Amount: 10,000.00 | Ref: test_deposit_c4f4d1cfe993
2026-01-21 20:38:51 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_c4f4d1cfe993 | Paystack ID: PAYSTACK_123
2026-01-21 20:38:51 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user cc50aa13-ade5-4085-95da-9f27a960de8e with 10,000.00
2026-01-21 20:38:51 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user cc50aa13-ade5-4085-95da-9f27a960de8e | Ref: test_deposit_c4f4d1cfe993 | User balance: 0.00  10,000.00
2026-01-21 20:38:51 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:55 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 48e8eb77-4ba5-448f-bfe1-135853986d79 | Amount: 10,000.00 | Ref: test_deposit_2517db24d89e
2026-01-21 20:38:55 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction a0846ec2-f20c-4042-9046-206ab988f656 created | User: 48e8eb77-4ba5-448f-bfe1-135853986d79 | Amount: 10,000.00 | Ref: test_deposit_2517db24d89e
2026-01-21 20:38:55 - application.services.ledger_service - WARNING - [ledger_service.py:196] - [DEPOSIT FAILED] Processing failed deposit | Ref: test_deposit_2517db24d89e | Reason: Card declined by bank
2026-01-21 20:38:55 - application.services.ledger_service - WARNING - [ledger_service.py:220] - [DEPOSIT MARKED FAILED] User: 48e8eb77-4ba5-448f-bfe1-135853986d79 | Amount: 10,000.00 | Ref: test_deposit_2517db24d89e | Reason: Card declined by bank
2026-01-21 20:38:58 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user d00959a8-8fd6-4826-b26a-95bc51ec4957 | Amount: 10,000.00 | Ref: test_deposit_82393d141e54
2026-01-21 20:38:58 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction fc3aee2d-8c5d-4dec-b9de-a4b063e62bbc created | User: d00959a8-8fd6-4826-b26a-95bc51ec4957 | Amount: 10,000.00 | Ref: test_deposit_82393d141e54
2026-01-21 20:38:58 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_82393d141e54 | Paystack ID: PAYSTACK_123
2026-01-21 20:38:58 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user d00959a8-8fd6-4826-b26a-95bc51ec4957 with 10,000.00
2026-01-21 20:38:58 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user d00959a8-8fd6-4826-b26a-95bc51ec4957 | Ref: test_deposit_82393d141e54 | User balance: 0.00  10,000.00
2026-01-21 20:38:58 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:38:59 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_82393d141e54 | Paystack ID: PAYSTACK_DUPLICATE
2026-01-21 20:38:59 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_82393d141e54 was already processed - ignoring duplicate
2026-01-21 20:39:03 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7dec8771-07f7-4d63-854f-cb9dc53e533c | Amount: 10,000.00 | Ref: test_deposit_95cbcfd122e5
2026-01-21 20:39:03 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 5523b8a7-3129-4beb-9e88-56fb951ad107 created | User: 7dec8771-07f7-4d63-854f-cb9dc53e533c | Amount: 10,000.00 | Ref: test_deposit_95cbcfd122e5
2026-01-21 20:39:03 - application.services.ledger_service - WARNING - [ledger_service.py:196] - [DEPOSIT FAILED] Processing failed deposit | Ref: test_deposit_95cbcfd122e5 | Reason: Insufficient funds
2026-01-21 20:39:03 - application.services.ledger_service - WARNING - [ledger_service.py:220] - [DEPOSIT MARKED FAILED] User: 7dec8771-07f7-4d63-854f-cb9dc53e533c | Amount: 10,000.00 | Ref: test_deposit_95cbcfd122e5 | Reason: Insufficient funds
2026-01-21 20:39:03 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_95cbcfd122e5 | Paystack ID: PAYSTACK_LATE
2026-01-21 20:39:03 - application.services.ledger_service - ERROR - [ledger_service.py:140] - [INVALID STATE] Cannot process transaction test_deposit_95cbcfd122e5 - current status is failed
2026-01-21 20:39:07 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 4b6e3a30-8561-4217-bc84-8dd0b0752f9c | Amount: 10,000.00 | Ref: test_deposit_cf063bd0ed9f
2026-01-21 20:39:07 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 9556539b-86cd-49e4-b4fa-4d934599d025 created | User: 4b6e3a30-8561-4217-bc84-8dd0b0752f9c | Amount: 10,000.00 | Ref: test_deposit_cf063bd0ed9f
2026-01-21 20:39:07 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_cf063bd0ed9f | Paystack ID: PAYSTACK_123
2026-01-21 20:39:07 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 4b6e3a30-8561-4217-bc84-8dd0b0752f9c with 10,000.00
2026-01-21 20:39:07 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 4b6e3a30-8561-4217-bc84-8dd0b0752f9c | Ref: test_deposit_cf063bd0ed9f | User balance: 0.00  10,000.00
2026-01-21 20:39:07 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:39:07 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_cf063bd0ed9f | Paystack ID: PAYSTACK_123
2026-01-21 20:39:07 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_cf063bd0ed9f was already processed - ignoring duplicate
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user e2fb717c-58ac-44a2-93de-c4ccad7ae42f | Amount: 10,000.00 | Ref: test_deposit_bb35752dfb21
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 6177e256-51ec-4942-b300-83255aa9fe97 created | User: e2fb717c-58ac-44a2-93de-c4ccad7ae42f | Amount: 10,000.00 | Ref: test_deposit_bb35752dfb21
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_bb35752dfb21 | Paystack ID: PAYSTACK_0
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user e2fb717c-58ac-44a2-93de-c4ccad7ae42f with 10,000.00
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user e2fb717c-58ac-44a2-93de-c4ccad7ae42f | Ref: test_deposit_bb35752dfb21 | User balance: 0.00  10,000.00
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_bb35752dfb21 | Paystack ID: PAYSTACK_1
2026-01-21 20:39:11 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_bb35752dfb21 was already processed - ignoring duplicate
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_bb35752dfb21 | Paystack ID: PAYSTACK_2
2026-01-21 20:39:11 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_bb35752dfb21 was already processed - ignoring duplicate
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_bb35752dfb21 | Paystack ID: PAYSTACK_3
2026-01-21 20:39:11 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_bb35752dfb21 was already processed - ignoring duplicate
2026-01-21 20:39:11 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_bb35752dfb21 | Paystack ID: PAYSTACK_4
2026-01-21 20:39:11 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_bb35752dfb21 was already processed - ignoring duplicate
2026-01-21 20:39:15 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user b8411f5b-b27e-4ab0-9828-b958e373e382 | Amount: 10,000.00 | Ref: test_deposit_c98d68699371
2026-01-21 20:39:15 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 5403fa3a-e806-4abe-ac68-642b0afa17e8 created | User: b8411f5b-b27e-4ab0-9828-b958e373e382 | Amount: 10,000.00 | Ref: test_deposit_c98d68699371
2026-01-21 20:39:15 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_c98d68699371 | Paystack ID: CONCURRENT_REF
2026-01-21 20:39:15 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_c98d68699371 | Paystack ID: CONCURRENT_REF
2026-01-21 20:39:15 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user b8411f5b-b27e-4ab0-9828-b958e373e382 with 10,000.00
2026-01-21 20:39:15 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user b8411f5b-b27e-4ab0-9828-b958e373e382 | Ref: test_deposit_c98d68699371 | User balance: 0.00  10,000.00
2026-01-21 20:39:15 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_0_41c194af
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 06b6f484-fe07-4465-9c32-ee8e5b487c1b created | User: 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_0_41c194af
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_0_41c194af | Paystack ID: PAYSTACK_CONC_0
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7d04aa28-c402-490b-8cf1-0d338b46bd9e with 10,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Ref: concurrent_0_41c194af | User balance: 0.00  10,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_1_d3c7f1ec
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction b8cdb3e5-c0b9-42cc-a557-865896e59fdb created | User: 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_1_d3c7f1ec
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_1_d3c7f1ec | Paystack ID: PAYSTACK_CONC_1
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7d04aa28-c402-490b-8cf1-0d338b46bd9e with 10,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Ref: concurrent_1_d3c7f1ec | User balance: 10,000.00  20,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -10,000.00  -20,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_2_9d52ba8b
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 8b500ffc-6354-4777-b0cc-ffd1db47c2e5 created | User: 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_2_9d52ba8b
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_2_9d52ba8b | Paystack ID: PAYSTACK_CONC_2
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7d04aa28-c402-490b-8cf1-0d338b46bd9e with 10,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Ref: concurrent_2_9d52ba8b | User balance: 20,000.00  30,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -20,000.00  -30,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_3_fc767aa5
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction cdf93ddf-2051-4436-a325-26146a280203 created | User: 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_3_fc767aa5
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_3_fc767aa5 | Paystack ID: PAYSTACK_CONC_3
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7d04aa28-c402-490b-8cf1-0d338b46bd9e with 10,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Ref: concurrent_3_fc767aa5 | User balance: 30,000.00  40,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -30,000.00  -40,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_4_df1c6809
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction ddaca0b3-f1ed-4e42-853d-c77a4d86cf40 created | User: 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Amount: 10,000.00 | Ref: concurrent_4_df1c6809
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_4_df1c6809 | Paystack ID: PAYSTACK_CONC_4
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7d04aa28-c402-490b-8cf1-0d338b46bd9e with 10,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 7d04aa28-c402-490b-8cf1-0d338b46bd9e | Ref: concurrent_4_df1c6809 | User balance: 40,000.00  50,000.00
2026-01-21 20:39:22 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -40,000.00  -50,000.00
2026-01-21 20:39:25 - application.services.ledger_service - INFO - [ledger_service.py:288] - Charged performance fee 5000.00 NGN from user 73225ad7-7259-410b-a67a-fb1583974467
2026-01-21 20:39:28 - application.services.ledger_service - INFO - [ledger_service.py:288] - Charged performance fee 2500.00 NGN from user af0fcba9-b75f-4a93-99c9-c4cdf5d647ef
2026-01-21 20:39:36 - application.services.ledger_service - INFO - [ledger_service.py:288] - Charged performance fee 50000.00000000 NGN from user 4d7b7e48-8cfa-4f26-9d36-12c2505d3f83
2026-01-21 20:39:38 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: NONEXISTENT_bcec5338ae644bb0b0a7df38205c9de7 | Paystack ID: PAYSTACK_123
2026-01-21 20:39:38 - application.services.ledger_service - ERROR - [ledger_service.py:132] - [DEPOSIT FAILED] Transaction not found in database | Ref: NONEXISTENT_bcec5338ae644bb0b0a7df38205c9de7
2026-01-21 20:39:41 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user fe406711-f71f-4f77-b62f-04cc94aec12d | Amount: 10,000.00 | Ref: no_wallet_cb20b01dac92
2026-01-21 20:39:41 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction e7c3722b-a983-4e69-bed0-1f247c584082 created | User: fe406711-f71f-4f77-b62f-04cc94aec12d | Amount: 10,000.00 | Ref: no_wallet_cb20b01dac92
2026-01-21 20:39:42 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: no_wallet_cb20b01dac92 | Paystack ID: PAYSTACK_123
2026-01-21 20:39:42 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user fe406711-f71f-4f77-b62f-04cc94aec12d with 10,000.00
2026-01-21 20:39:42 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user fe406711-f71f-4f77-b62f-04cc94aec12d
2026-01-21 20:39:42 - application.services.ledger_service - ERROR - [ledger_service.py:149] - [DEPOSIT FAILED] User fe406711-f71f-4f77-b62f-04cc94aec12d has no active wallet - cannot credit funds
2026-01-21 20:39:45 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 4edd4014-ec9d-4829-ae10-16a4237f9cab
2026-01-21 20:39:48 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 3807560f-41ab-4796-ac21-911793fcc883
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 9b94197a-e660-41cd-b4ef-940c82f0d931 | Amount: 10,000.00 | Ref: calc_test_0_6ce7f6cd
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 6d78e89d-f8d2-4d9b-8b7b-b3c313a5a9c3 created | User: 9b94197a-e660-41cd-b4ef-940c82f0d931 | Amount: 10,000.00 | Ref: calc_test_0_6ce7f6cd
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: calc_test_0_6ce7f6cd | Paystack ID: PAYSTACK_0
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 9b94197a-e660-41cd-b4ef-940c82f0d931 with 10,000.00
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 9b94197a-e660-41cd-b4ef-940c82f0d931 | Ref: calc_test_0_6ce7f6cd | User balance: 0.00  10,000.00
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 9b94197a-e660-41cd-b4ef-940c82f0d931 | Amount: 20,000.00 | Ref: calc_test_1_171f2c09
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 82852490-3231-4637-a81e-05c9cc52ca14 created | User: 9b94197a-e660-41cd-b4ef-940c82f0d931 | Amount: 20,000.00 | Ref: calc_test_1_171f2c09
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: calc_test_1_171f2c09 | Paystack ID: PAYSTACK_1
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 9b94197a-e660-41cd-b4ef-940c82f0d931 with 20,000.00
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 20,000.00 credited to user 9b94197a-e660-41cd-b4ef-940c82f0d931 | Ref: calc_test_1_171f2c09 | User balance: 10,000.00  30,000.00
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -10,000.00  -30,000.00
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 9b94197a-e660-41cd-b4ef-940c82f0d931 | Amount: 30,000.00 | Ref: calc_test_2_8a2806cf
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 03b1b7c3-a804-4470-97bf-58ce0a5bcab0 created | User: 9b94197a-e660-41cd-b4ef-940c82f0d931 | Amount: 30,000.00 | Ref: calc_test_2_8a2806cf
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: calc_test_2_8a2806cf | Paystack ID: PAYSTACK_2
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 9b94197a-e660-41cd-b4ef-940c82f0d931 with 30,000.00
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 30,000.00 credited to user 9b94197a-e660-41cd-b4ef-940c82f0d931 | Ref: calc_test_2_8a2806cf | User balance: 30,000.00  60,000.00
2026-01-21 20:39:54 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -30,000.00  -60,000.00
2026-01-21 20:40:01 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 2a3120a2-eacf-4dff-8cf3-93ef1b5ca232
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_0_90c5a17b
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 42e3e1cd-a4df-4372-b568-238e9dc1d761 created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_0_90c5a17b
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_0_90c5a17b | Paystack ID: PAYSTACK_0
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_0_90c5a17b | User balance: 0.00  10,000.00
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_1_e2f71dfe
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction e20f9bfc-fc19-48b1-b471-2b4461969cf4 created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_1_e2f71dfe
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_1_e2f71dfe | Paystack ID: PAYSTACK_1
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_1_e2f71dfe | User balance: 10,000.00  20,000.00
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -10,000.00  -20,000.00
2026-01-21 20:40:04 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_2_0719276a
2026-01-21 20:40:05 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 144966f6-4ca6-46ba-83a6-fbabccdb1ca8 created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_2_0719276a
2026-01-21 20:40:05 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_2_0719276a | Paystack ID: PAYSTACK_2
2026-01-21 20:40:05 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:05 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_2_0719276a | User balance: 20,000.00  30,000.00
2026-01-21 20:40:05 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -20,000.00  -30,000.00
2026-01-21 20:40:05 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_3_e0ac4563
2026-01-21 20:40:05 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction ddc1e05b-83e6-4bdc-b31c-523465883897 created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_3_e0ac4563
2026-01-21 20:40:05 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_3_e0ac4563 | Paystack ID: PAYSTACK_3
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_3_e0ac4563 | User balance: 30,000.00  40,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -30,000.00  -40,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_4_a15e27fd
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction f04be8b2-d6fa-445c-b40f-30a97d3ad164 created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_4_a15e27fd
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_4_a15e27fd | Paystack ID: PAYSTACK_4
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_4_a15e27fd | User balance: 40,000.00  50,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -40,000.00  -50,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_5_2d945704
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 8a2b5d8e-9ce1-4081-895a-c3002cdc5276 created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_5_2d945704
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_5_2d945704 | Paystack ID: PAYSTACK_5
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_5_2d945704 | User balance: 50,000.00  60,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -50,000.00  -60,000.00
2026-01-21 20:40:06 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_6_8bc6c332
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 4b35322b-c142-4eb0-be5c-1b5e0cc82c48 created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_6_8bc6c332
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_6_8bc6c332 | Paystack ID: PAYSTACK_6
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_6_8bc6c332 | User balance: 60,000.00  70,000.00
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -60,000.00  -70,000.00
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_7_79ef4d20
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 0373df01-9609-442f-ae1e-435db13bb825 created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_7_79ef4d20
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_7_79ef4d20 | Paystack ID: PAYSTACK_7
2026-01-21 20:40:07 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_7_79ef4d20 | User balance: 70,000.00  80,000.00
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -70,000.00  -80,000.00
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_8_e69bad25
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction d03a4ffc-f862-47dc-908f-211ad4c0e1fa created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_8_e69bad25
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_8_e69bad25 | Paystack ID: PAYSTACK_8
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_8_e69bad25 | User balance: 80,000.00  90,000.00
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -80,000.00  -90,000.00
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_9_b37cef07
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 71b6f1f9-60b5-4803-aa24-f927a3aee33c created | User: 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Amount: 10,000.00 | Ref: history_test_9_b37cef07
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_9_b37cef07 | Paystack ID: PAYSTACK_9
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 8e488896-9a6d-42ec-b26f-2cc00a3b656c with 10,000.00
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 8e488896-9a6d-42ec-b26f-2cc00a3b656c | Ref: history_test_9_b37cef07 | User balance: 90,000.00  100,000.00
2026-01-21 20:40:08 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -90,000.00  -100,000.00
2026-01-21 20:40:13 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user be189f2f-c3e4-4176-9d46-f110589e66c4 | Amount: 123.45 | Ref: precision_01af5f4064cc
2026-01-21 20:40:13 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 699a2518-90ae-4381-bdc8-1a9976e03da4 created | User: be189f2f-c3e4-4176-9d46-f110589e66c4 | Amount: 123.45 | Ref: precision_01af5f4064cc
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 123.45 | Ref: multi_precision_0_bb0c7500
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 7a11de89-36a2-4306-a8f3-ae79ccf337a5 created | User: 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 123.45 | Ref: multi_precision_0_bb0c7500
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_0_bb0c7500 | Paystack ID: PAYSTACK_0
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7fbfaab0-6e9d-430b-bddf-36723255a327 with 123.45
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 123.45 credited to user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Ref: multi_precision_0_bb0c7500 | User balance: 0.00  123.45
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -123.45
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 678.90 | Ref: multi_precision_1_53b916bc
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction a48f9ffd-b937-419a-9b4f-737ca5e1acea created | User: 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 678.90 | Ref: multi_precision_1_53b916bc
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_1_53b916bc | Paystack ID: PAYSTACK_1
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7fbfaab0-6e9d-430b-bddf-36723255a327 with 678.90
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 678.90 credited to user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Ref: multi_precision_1_53b916bc | User balance: 123.45  802.35
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -123.45  -802.35
2026-01-21 20:40:16 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 111.11 | Ref: multi_precision_2_cb2e5f56
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 1be76da8-42d6-436c-8cd4-ff828b398505 created | User: 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 111.11 | Ref: multi_precision_2_cb2e5f56
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_2_cb2e5f56 | Paystack ID: PAYSTACK_2
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7fbfaab0-6e9d-430b-bddf-36723255a327 with 111.11
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 111.11 credited to user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Ref: multi_precision_2_cb2e5f56 | User balance: 802.35  913.46
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -802.35  -913.46
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 222.22 | Ref: multi_precision_3_50bb04db
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 93444bdd-47bb-4443-9b3e-b2bfa50773a3 created | User: 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 222.22 | Ref: multi_precision_3_50bb04db
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_3_50bb04db | Paystack ID: PAYSTACK_3
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7fbfaab0-6e9d-430b-bddf-36723255a327 with 222.22
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 222.22 credited to user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Ref: multi_precision_3_50bb04db | User balance: 913.46  1,135.68
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -913.46  -1,135.68
2026-01-21 20:40:17 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 333.33 | Ref: multi_precision_4_95bacbc3
2026-01-21 20:40:18 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 14c4a092-fb8b-4ab5-bf32-e05a836ef6cb created | User: 7fbfaab0-6e9d-430b-bddf-36723255a327 | Amount: 333.33 | Ref: multi_precision_4_95bacbc3
2026-01-21 20:40:18 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_4_95bacbc3 | Paystack ID: PAYSTACK_4
2026-01-21 20:40:18 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 7fbfaab0-6e9d-430b-bddf-36723255a327 with 333.33
2026-01-21 20:40:18 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 333.33 credited to user 7fbfaab0-6e9d-430b-bddf-36723255a327 | Ref: multi_precision_4_95bacbc3 | User balance: 1,135.68  1,469.01
2026-01-21 20:40:18 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -1,135.68  -1,469.01
2026-01-21 20:55:41 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user cfe5c717-9172-43f0-9ba4-63812501f867 | Amount: 50,000.00 | Ref: deposit_fb49797085e1
2026-01-21 20:55:41 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 0563a01d-ddfd-4127-8ccb-c1cc7e3db391 created | User: cfe5c717-9172-43f0-9ba4-63812501f867 | Amount: 50,000.00 | Ref: deposit_fb49797085e1
2026-01-21 20:55:45 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user ecc7d1ae-e1bb-43d8-8643-ded48e2167df | Amount: 10,000.00 | Ref: min_deposit_a0851baf1a72
2026-01-21 20:55:45 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 762d9f00-cf38-4c26-85ae-38c9a5b06425 created | User: ecc7d1ae-e1bb-43d8-8643-ded48e2167df | Amount: 10,000.00 | Ref: min_deposit_a0851baf1a72
2026-01-21 20:55:49 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 252b7c0f-910d-454b-922d-f3429e962233 | Amount: 10,000,000.00 | Ref: large_deposit_e080e1ebf08c
2026-01-21 20:55:49 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 277d5c84-8556-4434-ac7e-cc5dad796056 created | User: 252b7c0f-910d-454b-922d-f3429e962233 | Amount: 10,000,000.00 | Ref: large_deposit_e080e1ebf08c
2026-01-21 20:55:53 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 484532c8-c9bc-43bd-82f0-d30d2f3f626a | Amount: 10,000.00 | Ref: duplicate_test_fcfde0b652dc
2026-01-21 20:55:53 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction f02e646d-d99b-474a-9dfc-8be9f4c05e6c created | User: 484532c8-c9bc-43bd-82f0-d30d2f3f626a | Amount: 10,000.00 | Ref: duplicate_test_fcfde0b652dc
2026-01-21 20:55:53 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 484532c8-c9bc-43bd-82f0-d30d2f3f626a | Amount: 20,000.00 | Ref: duplicate_test_fcfde0b652dc
2026-01-21 20:55:53 - application.services.ledger_service - ERROR - [ledger_service.py:98] - [DUPLICATE BLOCKED] Deposit reference duplicate_test_fcfde0b652dc already exists with status TransactionStatus.PENDING
2026-01-21 20:55:57 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 388dde02-a6b4-404e-ac0c-92a9093e2bc8 | Amount: 10,000.00 | Ref: no_wallet_1d91ce78b264
2026-01-21 20:55:57 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 21ed3b11-ac73-4858-af85-afb4ea392389 created | User: 388dde02-a6b4-404e-ac0c-92a9093e2bc8 | Amount: 10,000.00 | Ref: no_wallet_1d91ce78b264
2026-01-21 20:56:01 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 28ee479c-8f6b-49db-b16a-6568894a1906 | Amount: 10,000.00 | Ref: test_deposit_7e899332e562
2026-01-21 20:56:01 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 33d571a9-6ba1-4707-a02b-b95dd6d4a35a created | User: 28ee479c-8f6b-49db-b16a-6568894a1906 | Amount: 10,000.00 | Ref: test_deposit_7e899332e562
2026-01-21 20:56:01 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_7e899332e562 | Paystack ID: PAYSTACK_TXN_12345
2026-01-21 20:56:01 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 28ee479c-8f6b-49db-b16a-6568894a1906 with 10,000.00
2026-01-21 20:56:01 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 28ee479c-8f6b-49db-b16a-6568894a1906 | Ref: test_deposit_7e899332e562 | User balance: 0.00  10,000.00
2026-01-21 20:56:01 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:04 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 504070a1-a79c-47af-abec-c2d259b4409d | Amount: 10,000.00 | Ref: test_deposit_66a0db31ecf4
2026-01-21 20:56:05 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction efd0618a-d704-4f01-b58d-dfd222ae3b6f created | User: 504070a1-a79c-47af-abec-c2d259b4409d | Amount: 10,000.00 | Ref: test_deposit_66a0db31ecf4
2026-01-21 20:56:05 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_66a0db31ecf4 | Paystack ID: PAYSTACK_TXN_12345
2026-01-21 20:56:05 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 504070a1-a79c-47af-abec-c2d259b4409d with 10,000.00
2026-01-21 20:56:05 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 504070a1-a79c-47af-abec-c2d259b4409d | Ref: test_deposit_66a0db31ecf4 | User balance: 0.00  10,000.00
2026-01-21 20:56:05 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:09 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f80fe707-03ef-4aee-82b9-c2c6d01817cc | Amount: 10,000.00 | Ref: test_deposit_c1b8ad372cfe
2026-01-21 20:56:09 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 441a605d-23f3-4d31-a894-0e829a8bfdf3 created | User: f80fe707-03ef-4aee-82b9-c2c6d01817cc | Amount: 10,000.00 | Ref: test_deposit_c1b8ad372cfe
2026-01-21 20:56:09 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_c1b8ad372cfe | Paystack ID: PAYSTACK_TXN_12345
2026-01-21 20:56:09 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f80fe707-03ef-4aee-82b9-c2c6d01817cc with 10,000.00
2026-01-21 20:56:10 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f80fe707-03ef-4aee-82b9-c2c6d01817cc | Ref: test_deposit_c1b8ad372cfe | User balance: 0.00  10,000.00
2026-01-21 20:56:10 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:14 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 9c2620a4-e748-4fc8-ba89-b69f27ac17ac | Amount: 10,000.00 | Ref: test_deposit_1474d9548cca
2026-01-21 20:56:14 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 90cc0844-f544-4ef9-a785-24b12dc84f98 created | User: 9c2620a4-e748-4fc8-ba89-b69f27ac17ac | Amount: 10,000.00 | Ref: test_deposit_1474d9548cca
2026-01-21 20:56:14 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_1474d9548cca | Paystack ID: PAYSTACK_TXN_UNIQUE_123
2026-01-21 20:56:14 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 9c2620a4-e748-4fc8-ba89-b69f27ac17ac with 10,000.00
2026-01-21 20:56:14 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 9c2620a4-e748-4fc8-ba89-b69f27ac17ac | Ref: test_deposit_1474d9548cca | User balance: 0.00  10,000.00
2026-01-21 20:56:14 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:17 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 85df1eeb-d407-4cd1-8bf4-7f6626dea778 | Amount: 10,000.00 | Ref: test_deposit_95afcb11677a
2026-01-21 20:56:17 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction dc38383b-bcc0-477b-9abe-7ed686fc5d0b created | User: 85df1eeb-d407-4cd1-8bf4-7f6626dea778 | Amount: 10,000.00 | Ref: test_deposit_95afcb11677a
2026-01-21 20:56:17 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_95afcb11677a | Paystack ID: PAYSTACK_12345
2026-01-21 20:56:18 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 85df1eeb-d407-4cd1-8bf4-7f6626dea778 with 10,000.00
2026-01-21 20:56:18 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 85df1eeb-d407-4cd1-8bf4-7f6626dea778 | Ref: test_deposit_95afcb11677a | User balance: 0.00  10,000.00
2026-01-21 20:56:18 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:20 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 39683820-4f01-43fb-a6c2-fbe021502bd9 | Amount: 10,000.00 | Ref: test_deposit_2fde0f848a0b
2026-01-21 20:56:21 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 49cc1801-4f95-4a1e-9b5f-b7facd80cf9e created | User: 39683820-4f01-43fb-a6c2-fbe021502bd9 | Amount: 10,000.00 | Ref: test_deposit_2fde0f848a0b
2026-01-21 20:56:21 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_2fde0f848a0b | Paystack ID: PAYSTACK_12345
2026-01-21 20:56:21 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 39683820-4f01-43fb-a6c2-fbe021502bd9 with 10,000.00
2026-01-21 20:56:21 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 39683820-4f01-43fb-a6c2-fbe021502bd9 | Ref: test_deposit_2fde0f848a0b | User balance: 0.00  10,000.00
2026-01-21 20:56:21 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:24 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user d5187e7e-6e51-40f7-a9fb-522caf2c376f | Amount: 10,000.00 | Ref: balance_test_0_b8212d26
2026-01-21 20:56:24 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 9d64cac9-873e-418b-b0df-a80b518934b1 created | User: d5187e7e-6e51-40f7-a9fb-522caf2c376f | Amount: 10,000.00 | Ref: balance_test_0_b8212d26
2026-01-21 20:56:24 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: balance_test_0_b8212d26 | Paystack ID: PAYSTACK_0
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user d5187e7e-6e51-40f7-a9fb-522caf2c376f with 10,000.00
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user d5187e7e-6e51-40f7-a9fb-522caf2c376f | Ref: balance_test_0_b8212d26 | User balance: 0.00  10,000.00
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user d5187e7e-6e51-40f7-a9fb-522caf2c376f | Amount: 20,000.00 | Ref: balance_test_1_a6838f53
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction f68e1c40-242d-4567-8931-f86236ce7dba created | User: d5187e7e-6e51-40f7-a9fb-522caf2c376f | Amount: 20,000.00 | Ref: balance_test_1_a6838f53
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: balance_test_1_a6838f53 | Paystack ID: PAYSTACK_1
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user d5187e7e-6e51-40f7-a9fb-522caf2c376f with 20,000.00
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 20,000.00 credited to user d5187e7e-6e51-40f7-a9fb-522caf2c376f | Ref: balance_test_1_a6838f53 | User balance: 10,000.00  30,000.00
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -10,000.00  -30,000.00
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user d5187e7e-6e51-40f7-a9fb-522caf2c376f | Amount: 30,000.00 | Ref: balance_test_2_a41cb883
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 1dca366a-bd2c-4644-95d2-28cf0aca706e created | User: d5187e7e-6e51-40f7-a9fb-522caf2c376f | Amount: 30,000.00 | Ref: balance_test_2_a41cb883
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: balance_test_2_a41cb883 | Paystack ID: PAYSTACK_2
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user d5187e7e-6e51-40f7-a9fb-522caf2c376f with 30,000.00
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 30,000.00 credited to user d5187e7e-6e51-40f7-a9fb-522caf2c376f | Ref: balance_test_2_a41cb883 | User balance: 30,000.00  60,000.00
2026-01-21 20:56:25 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -30,000.00  -60,000.00
2026-01-21 20:56:28 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f851d541-55d5-4e1a-a70c-5795a9f1df9c | Amount: 10,000.00 | Ref: test_deposit_a568985349cc
2026-01-21 20:56:28 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction b79e75e3-f9e4-4d80-b27a-a4e6bdd74d9c created | User: f851d541-55d5-4e1a-a70c-5795a9f1df9c | Amount: 10,000.00 | Ref: test_deposit_a568985349cc
2026-01-21 20:56:28 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_a568985349cc | Paystack ID: PAYSTACK_123
2026-01-21 20:56:29 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f851d541-55d5-4e1a-a70c-5795a9f1df9c with 10,000.00
2026-01-21 20:56:29 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f851d541-55d5-4e1a-a70c-5795a9f1df9c | Ref: test_deposit_a568985349cc | User balance: 0.00  10,000.00
2026-01-21 20:56:29 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:33 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user ed33db24-7597-4e79-bca5-1bffb5c37dc7 | Amount: 10,000.00 | Ref: test_deposit_9efc54e76912
2026-01-21 20:56:33 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction d8a1a8e3-8acf-47e3-bb88-ab10eaea4f45 created | User: ed33db24-7597-4e79-bca5-1bffb5c37dc7 | Amount: 10,000.00 | Ref: test_deposit_9efc54e76912
2026-01-21 20:56:33 - application.services.ledger_service - WARNING - [ledger_service.py:196] - [DEPOSIT FAILED] Processing failed deposit | Ref: test_deposit_9efc54e76912 | Reason: Card declined by bank
2026-01-21 20:56:33 - application.services.ledger_service - WARNING - [ledger_service.py:220] - [DEPOSIT MARKED FAILED] User: ed33db24-7597-4e79-bca5-1bffb5c37dc7 | Amount: 10,000.00 | Ref: test_deposit_9efc54e76912 | Reason: Card declined by bank
2026-01-21 20:56:36 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user bdfa480b-429b-465d-aebb-255c72174e09 | Amount: 10,000.00 | Ref: test_deposit_3bae2d90a91e
2026-01-21 20:56:36 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction f5558087-1ec1-4d68-bb7d-9c36146897b5 created | User: bdfa480b-429b-465d-aebb-255c72174e09 | Amount: 10,000.00 | Ref: test_deposit_3bae2d90a91e
2026-01-21 20:56:36 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_3bae2d90a91e | Paystack ID: PAYSTACK_123
2026-01-21 20:56:37 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user bdfa480b-429b-465d-aebb-255c72174e09 with 10,000.00
2026-01-21 20:56:37 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user bdfa480b-429b-465d-aebb-255c72174e09 | Ref: test_deposit_3bae2d90a91e | User balance: 0.00  10,000.00
2026-01-21 20:56:37 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:37 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_3bae2d90a91e | Paystack ID: PAYSTACK_DUPLICATE
2026-01-21 20:56:37 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_3bae2d90a91e was already processed - ignoring duplicate
2026-01-21 20:56:40 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user c4cecd39-88bb-4635-b01a-b466c0859051 | Amount: 10,000.00 | Ref: test_deposit_ae077b9945a4
2026-01-21 20:56:40 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction bbe1c95e-38db-4546-b92d-e95ed125e079 created | User: c4cecd39-88bb-4635-b01a-b466c0859051 | Amount: 10,000.00 | Ref: test_deposit_ae077b9945a4
2026-01-21 20:56:40 - application.services.ledger_service - WARNING - [ledger_service.py:196] - [DEPOSIT FAILED] Processing failed deposit | Ref: test_deposit_ae077b9945a4 | Reason: Insufficient funds
2026-01-21 20:56:40 - application.services.ledger_service - WARNING - [ledger_service.py:220] - [DEPOSIT MARKED FAILED] User: c4cecd39-88bb-4635-b01a-b466c0859051 | Amount: 10,000.00 | Ref: test_deposit_ae077b9945a4 | Reason: Insufficient funds
2026-01-21 20:56:40 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_ae077b9945a4 | Paystack ID: PAYSTACK_LATE
2026-01-21 20:56:40 - application.services.ledger_service - ERROR - [ledger_service.py:140] - [INVALID STATE] Cannot process transaction test_deposit_ae077b9945a4 - current status is failed
2026-01-21 20:56:44 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 2c146169-5e8c-4410-b1b2-0594848f1b09 | Amount: 10,000.00 | Ref: test_deposit_7c924b86658f
2026-01-21 20:56:44 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 8baf1e5f-d03e-4146-a0d6-9b68d1b5fcf0 created | User: 2c146169-5e8c-4410-b1b2-0594848f1b09 | Amount: 10,000.00 | Ref: test_deposit_7c924b86658f
2026-01-21 20:56:44 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_7c924b86658f | Paystack ID: PAYSTACK_123
2026-01-21 20:56:44 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 2c146169-5e8c-4410-b1b2-0594848f1b09 with 10,000.00
2026-01-21 20:56:44 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 2c146169-5e8c-4410-b1b2-0594848f1b09 | Ref: test_deposit_7c924b86658f | User balance: 0.00  10,000.00
2026-01-21 20:56:44 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:44 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_7c924b86658f | Paystack ID: PAYSTACK_123
2026-01-21 20:56:45 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_7c924b86658f was already processed - ignoring duplicate
2026-01-21 20:56:48 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 69b9536e-7a02-4c79-9003-59edd30319c0 | Amount: 10,000.00 | Ref: test_deposit_95af92f3fcc0
2026-01-21 20:56:48 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction fb3e7536-2283-4a95-9797-c41dbade2b9a created | User: 69b9536e-7a02-4c79-9003-59edd30319c0 | Amount: 10,000.00 | Ref: test_deposit_95af92f3fcc0
2026-01-21 20:56:48 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_95af92f3fcc0 | Paystack ID: PAYSTACK_0
2026-01-21 20:56:49 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 69b9536e-7a02-4c79-9003-59edd30319c0 with 10,000.00
2026-01-21 20:56:49 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 69b9536e-7a02-4c79-9003-59edd30319c0 | Ref: test_deposit_95af92f3fcc0 | User balance: 0.00  10,000.00
2026-01-21 20:56:49 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:49 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_95af92f3fcc0 | Paystack ID: PAYSTACK_1
2026-01-21 20:56:49 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_95af92f3fcc0 was already processed - ignoring duplicate
2026-01-21 20:56:49 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_95af92f3fcc0 | Paystack ID: PAYSTACK_2
2026-01-21 20:56:49 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_95af92f3fcc0 was already processed - ignoring duplicate
2026-01-21 20:56:49 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_95af92f3fcc0 | Paystack ID: PAYSTACK_3
2026-01-21 20:56:49 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_95af92f3fcc0 was already processed - ignoring duplicate
2026-01-21 20:56:49 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_95af92f3fcc0 | Paystack ID: PAYSTACK_4
2026-01-21 20:56:49 - application.services.ledger_service - WARNING - [ledger_service.py:136] - [DUPLICATE WEBHOOK] Transaction test_deposit_95af92f3fcc0 was already processed - ignoring duplicate
2026-01-21 20:56:53 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user fabe77f0-3afb-4e2a-8708-5fe61b69a353 | Amount: 10,000.00 | Ref: test_deposit_d8b542a2d951
2026-01-21 20:56:53 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 2c02b70d-af0f-47f0-b080-dc8f757f2b58 created | User: fabe77f0-3afb-4e2a-8708-5fe61b69a353 | Amount: 10,000.00 | Ref: test_deposit_d8b542a2d951
2026-01-21 20:56:53 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_d8b542a2d951 | Paystack ID: CONCURRENT_REF
2026-01-21 20:56:53 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: test_deposit_d8b542a2d951 | Paystack ID: CONCURRENT_REF
2026-01-21 20:56:53 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user fabe77f0-3afb-4e2a-8708-5fe61b69a353 with 10,000.00
2026-01-21 20:56:53 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user fabe77f0-3afb-4e2a-8708-5fe61b69a353 | Ref: test_deposit_d8b542a2d951 | User balance: 0.00  10,000.00
2026-01-21 20:56:53 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_0_b5143e09
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 4ff47c1b-0c03-4586-a3a4-77e55f55ab4f created | User: 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_0_b5143e09
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_0_b5143e09 | Paystack ID: PAYSTACK_CONC_0
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 47064470-f4c9-40b9-86b6-773dea025c9b with 10,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 47064470-f4c9-40b9-86b6-773dea025c9b | Ref: concurrent_0_b5143e09 | User balance: 0.00  10,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_1_010df606
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction da45723a-0b62-4b3e-a969-2e6616a68ba8 created | User: 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_1_010df606
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_1_010df606 | Paystack ID: PAYSTACK_CONC_1
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 47064470-f4c9-40b9-86b6-773dea025c9b with 10,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 47064470-f4c9-40b9-86b6-773dea025c9b | Ref: concurrent_1_010df606 | User balance: 10,000.00  20,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -10,000.00  -20,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_2_bc8567f1
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction c117fdd9-4146-4f2a-9262-cceb8b33098f created | User: 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_2_bc8567f1
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_2_bc8567f1 | Paystack ID: PAYSTACK_CONC_2
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 47064470-f4c9-40b9-86b6-773dea025c9b with 10,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 47064470-f4c9-40b9-86b6-773dea025c9b | Ref: concurrent_2_bc8567f1 | User balance: 20,000.00  30,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -20,000.00  -30,000.00
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_3_8157af21
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction ae71f66e-4228-4468-838f-e555b98b7e86 created | User: 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_3_8157af21
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_3_8157af21 | Paystack ID: PAYSTACK_CONC_3
2026-01-21 20:56:57 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 47064470-f4c9-40b9-86b6-773dea025c9b with 10,000.00
2026-01-21 20:56:58 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 47064470-f4c9-40b9-86b6-773dea025c9b | Ref: concurrent_3_8157af21 | User balance: 30,000.00  40,000.00
2026-01-21 20:56:58 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -30,000.00  -40,000.00
2026-01-21 20:56:58 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_4_e95c27e8
2026-01-21 20:56:58 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction f0278d68-709d-44dc-985a-4118315ddd85 created | User: 47064470-f4c9-40b9-86b6-773dea025c9b | Amount: 10,000.00 | Ref: concurrent_4_e95c27e8
2026-01-21 20:56:58 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: concurrent_4_e95c27e8 | Paystack ID: PAYSTACK_CONC_4
2026-01-21 20:56:58 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 47064470-f4c9-40b9-86b6-773dea025c9b with 10,000.00
2026-01-21 20:56:58 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 47064470-f4c9-40b9-86b6-773dea025c9b | Ref: concurrent_4_e95c27e8 | User balance: 40,000.00  50,000.00
2026-01-21 20:56:58 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -40,000.00  -50,000.00
2026-01-21 20:57:02 - application.services.ledger_service - INFO - [ledger_service.py:288] - Charged performance fee 5000.00 NGN from user 61602d6c-8a5f-464b-91b0-90dad595ac08
2026-01-21 20:57:06 - application.services.ledger_service - INFO - [ledger_service.py:288] - Charged performance fee 2500.00 NGN from user 26431997-4116-4f95-a822-d14110d24500
2026-01-21 20:57:13 - application.services.ledger_service - INFO - [ledger_service.py:288] - Charged performance fee 50000.00000000 NGN from user 2e5e55ba-0667-4ba6-b665-dd838ec4afa5
2026-01-21 20:57:17 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: NONEXISTENT_dcfe200b17af44e5bf20bb116c457bdf | Paystack ID: PAYSTACK_123
2026-01-21 20:57:17 - application.services.ledger_service - ERROR - [ledger_service.py:132] - [DEPOSIT FAILED] Transaction not found in database | Ref: NONEXISTENT_dcfe200b17af44e5bf20bb116c457bdf
2026-01-21 20:57:20 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 2ceac68a-a246-4a07-8572-62cfc5cff11f | Amount: 10,000.00 | Ref: no_wallet_8307a1b662bb
2026-01-21 20:57:20 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction d25d355e-429e-4a41-b4ee-ecd687c66594 created | User: 2ceac68a-a246-4a07-8572-62cfc5cff11f | Amount: 10,000.00 | Ref: no_wallet_8307a1b662bb
2026-01-21 20:57:20 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: no_wallet_8307a1b662bb | Paystack ID: PAYSTACK_123
2026-01-21 20:57:20 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 2ceac68a-a246-4a07-8572-62cfc5cff11f with 10,000.00
2026-01-21 20:57:20 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 2ceac68a-a246-4a07-8572-62cfc5cff11f
2026-01-21 20:57:20 - application.services.ledger_service - ERROR - [ledger_service.py:149] - [DEPOSIT FAILED] User 2ceac68a-a246-4a07-8572-62cfc5cff11f has no active wallet - cannot credit funds
2026-01-21 20:57:24 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 27f145b7-c591-4564-8ada-e0530cf35f75
2026-01-21 20:57:27 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 3b0cbfb4-4771-4f17-89e3-b251ea1b2775
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Amount: 10,000.00 | Ref: calc_test_0_13674744
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 1140b7e4-4a55-4c71-a6d1-f6b1a869afd6 created | User: 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Amount: 10,000.00 | Ref: calc_test_0_13674744
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: calc_test_0_13674744 | Paystack ID: PAYSTACK_0
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 198e26ec-cbcf-485d-90d8-31182a9fc2cb with 10,000.00
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Ref: calc_test_0_13674744 | User balance: 0.00  10,000.00
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Amount: 20,000.00 | Ref: calc_test_1_58c762b2
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction c8adcf4d-b067-4c72-94bc-5bf602a32b0a created | User: 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Amount: 20,000.00 | Ref: calc_test_1_58c762b2
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: calc_test_1_58c762b2 | Paystack ID: PAYSTACK_1
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 198e26ec-cbcf-485d-90d8-31182a9fc2cb with 20,000.00
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 20,000.00 credited to user 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Ref: calc_test_1_58c762b2 | User balance: 10,000.00  30,000.00
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -10,000.00  -30,000.00
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Amount: 30,000.00 | Ref: calc_test_2_812a0b8f
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 48f936e7-00c1-4d32-8cad-513bf8dff9a8 created | User: 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Amount: 30,000.00 | Ref: calc_test_2_812a0b8f
2026-01-21 20:57:35 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: calc_test_2_812a0b8f | Paystack ID: PAYSTACK_2
2026-01-21 20:57:36 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 198e26ec-cbcf-485d-90d8-31182a9fc2cb with 30,000.00
2026-01-21 20:57:36 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 30,000.00 credited to user 198e26ec-cbcf-485d-90d8-31182a9fc2cb | Ref: calc_test_2_812a0b8f | User balance: 30,000.00  60,000.00
2026-01-21 20:57:36 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -30,000.00  -60,000.00
2026-01-21 20:57:43 - application.services.ledger_service - WARNING - [ledger_service.py:59] - [LEDGER] No active wallet found for user 71c2f1c6-761f-4425-b48e-985c7d5de61b
2026-01-21 20:57:46 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_0_ae5547b9
2026-01-21 20:57:46 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction c7b35810-df1b-4a30-985b-5ad2853ecad7 created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_0_ae5547b9
2026-01-21 20:57:46 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_0_ae5547b9 | Paystack ID: PAYSTACK_0
2026-01-21 20:57:46 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_0_ae5547b9 | User balance: 0.00  10,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -10,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_1_a41e670a
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 3424e13f-26ba-4518-809c-42497e63fe63 created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_1_a41e670a
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_1_a41e670a | Paystack ID: PAYSTACK_1
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_1_a41e670a | User balance: 10,000.00  20,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -10,000.00  -20,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_2_518c2fd1
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction e9a2e3b4-10e5-43c1-a8bd-d34194a92ae2 created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_2_518c2fd1
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_2_518c2fd1 | Paystack ID: PAYSTACK_2
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_2_518c2fd1 | User balance: 20,000.00  30,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -20,000.00  -30,000.00
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_3_f5f3ff62
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 4045fc71-f01e-404e-9a64-0c5cd55e4727 created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_3_f5f3ff62
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_3_f5f3ff62 | Paystack ID: PAYSTACK_3
2026-01-21 20:57:47 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_3_f5f3ff62 | User balance: 30,000.00  40,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -30,000.00  -40,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_4_d8c3aa32
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction c7917f49-7da8-42b8-af17-524d85db4371 created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_4_d8c3aa32
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_4_d8c3aa32 | Paystack ID: PAYSTACK_4
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_4_d8c3aa32 | User balance: 40,000.00  50,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -40,000.00  -50,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_5_56e828cf
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction c6e491b6-5950-43c7-8e6c-c2acbc6a214b created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_5_56e828cf
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_5_56e828cf | Paystack ID: PAYSTACK_5
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_5_56e828cf | User balance: 50,000.00  60,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -50,000.00  -60,000.00
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_6_1d3f48dc
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction a14f7416-954e-4a57-954a-707b713842d5 created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_6_1d3f48dc
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_6_1d3f48dc | Paystack ID: PAYSTACK_6
2026-01-21 20:57:48 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_6_1d3f48dc | User balance: 60,000.00  70,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -60,000.00  -70,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_7_82290372
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction dc72684c-9d5d-497a-a0bb-0295d08b35ae created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_7_82290372
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_7_82290372 | Paystack ID: PAYSTACK_7
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_7_82290372 | User balance: 70,000.00  80,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -70,000.00  -80,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_8_80af9a85
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction b76ad37d-a561-4519-969b-9a95ae88980c created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_8_80af9a85
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_8_80af9a85 | Paystack ID: PAYSTACK_8
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_8_80af9a85 | User balance: 80,000.00  90,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -80,000.00  -90,000.00
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_9_965024fe
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 42c6a7c2-6c46-4439-ae5a-e6bd992286aa created | User: f201bd01-d176-4a41-b260-fd06af8cf051 | Amount: 10,000.00 | Ref: history_test_9_965024fe
2026-01-21 20:57:49 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: history_test_9_965024fe | Paystack ID: PAYSTACK_9
2026-01-21 20:57:50 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user f201bd01-d176-4a41-b260-fd06af8cf051 with 10,000.00
2026-01-21 20:57:50 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 10,000.00 credited to user f201bd01-d176-4a41-b260-fd06af8cf051 | Ref: history_test_9_965024fe | User balance: 90,000.00  100,000.00
2026-01-21 20:57:50 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -90,000.00  -100,000.00
2026-01-21 20:57:53 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user d5983386-1cb1-435f-b7a6-3c33e2b930b5 | Amount: 123.45 | Ref: precision_ef8b8bf4ed65
2026-01-21 20:57:53 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction f6e9dff6-f842-4afd-b66c-b41add958280 created | User: d5983386-1cb1-435f-b7a6-3c33e2b930b5 | Amount: 123.45 | Ref: precision_ef8b8bf4ed65
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 123.45 | Ref: multi_precision_0_bc1e68d6
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 2661058f-f677-4c44-b3c1-6b623a4c4ed2 created | User: 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 123.45 | Ref: multi_precision_0_bc1e68d6
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_0_bc1e68d6 | Paystack ID: PAYSTACK_0
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 55ab0703-1278-4ac8-b345-2dfd2443d3dc with 123.45
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 123.45 credited to user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Ref: multi_precision_0_bc1e68d6 | User balance: 0.00  123.45
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: 0.00  -123.45
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 678.90 | Ref: multi_precision_1_4aea68db
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction ad9538c8-c722-4885-9e4c-45e4c11f5720 created | User: 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 678.90 | Ref: multi_precision_1_4aea68db
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_1_4aea68db | Paystack ID: PAYSTACK_1
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 55ab0703-1278-4ac8-b345-2dfd2443d3dc with 678.90
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 678.90 credited to user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Ref: multi_precision_1_4aea68db | User balance: 123.45  802.35
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -123.45  -802.35
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 111.11 | Ref: multi_precision_2_4c91ad52
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 1c6b444b-5c22-40e0-8563-6c9b2b93fa88 created | User: 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 111.11 | Ref: multi_precision_2_4c91ad52
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_2_4c91ad52 | Paystack ID: PAYSTACK_2
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 55ab0703-1278-4ac8-b345-2dfd2443d3dc with 111.11
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 111.11 credited to user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Ref: multi_precision_2_4c91ad52 | User balance: 802.35  913.46
2026-01-21 20:57:58 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -802.35  -913.46
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 222.22 | Ref: multi_precision_3_ce14947c
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction 00d1275c-8905-4d40-a837-0b747bd890bf created | User: 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 222.22 | Ref: multi_precision_3_ce14947c
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_3_ce14947c | Paystack ID: PAYSTACK_3
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 55ab0703-1278-4ac8-b345-2dfd2443d3dc with 222.22
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 222.22 credited to user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Ref: multi_precision_3_ce14947c | User balance: 913.46  1,135.68
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -913.46  -1,135.68
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:88] - [DEPOSIT INIT] Creating pending deposit for user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 333.33 | Ref: multi_precision_4_8357df4a
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:113] - [DEPOSIT PENDING] Transaction a60eb5e3-8e0d-4a1e-b4ee-e7e469c8a217 created | User: 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Amount: 333.33 | Ref: multi_precision_4_8357df4a
2026-01-21 20:57:59 - application.services.ledger_service - INFO - [ledger_service.py:122] - [DEPOSIT PROCESSING] Starting to process deposit | Ref: multi_precision_4_8357df4a | Paystack ID: PAYSTACK_4
2026-01-21 20:58:00 - application.services.ledger_service - INFO - [ledger_service.py:145] - [DEPOSIT] Crediting user 55ab0703-1278-4ac8-b345-2dfd2443d3dc with 333.33
2026-01-21 20:58:00 - application.services.ledger_service - INFO - [ledger_service.py:183] - [DEPOSIT SUCCESS] 333.33 credited to user 55ab0703-1278-4ac8-b345-2dfd2443d3dc | Ref: multi_precision_4_8357df4a | User balance: 1,135.68  1,469.01
2026-01-21 20:58:00 - application.services.ledger_service - INFO - [ledger_service.py:187] - [DOUBLE-ENTRY] Debit Paystack settlement account | Balance: -1,135.68  -1,469.01
